import t from"basekits";import e from"metapatcher";import r from"event-emitter-object";import n from"dom-scripter";import o from"state-manager-object";var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function a(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}function u(t){var e={exports:{}};return t(e,e.exports),e.exports}var s=function(t){return t&&t.Math==Math&&t},c=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof i&&i)||function(){return this}()||Function("return this")(),l=function(t){try{return!!t()}catch(t){return!0}},f=!l((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),p={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,d={f:h&&!p.call({1:2},1)?function(t){var e=h(this,t);return!!e&&e.enumerable}:p},v=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},y={}.toString,g=function(t){return y.call(t).slice(8,-1)},m="".split,b=l((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==g(t)?m.call(t,""):Object(t)}:Object,w=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},E=function(t){return b(w(t))},x=function(t){return"object"==typeof t?null!==t:"function"==typeof t},O=function(t,e){if(!x(t))return t;var r,n;if(e&&"function"==typeof(r=t.toString)&&!x(n=r.call(t)))return n;if("function"==typeof(r=t.valueOf)&&!x(n=r.call(t)))return n;if(!e&&"function"==typeof(r=t.toString)&&!x(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")},S=function(t){return Object(w(t))},j={}.hasOwnProperty,_=function(t,e){return j.call(S(t),e)},A=c.document,L=x(A)&&x(A.createElement),k=function(t){return L?A.createElement(t):{}},T=!f&&!l((function(){return 7!=Object.defineProperty(k("div"),"a",{get:function(){return 7}}).a})),P=Object.getOwnPropertyDescriptor,R={f:f?P:function(t,e){if(t=E(t),e=O(e,!0),T)try{return P(t,e)}catch(t){}if(_(t,e))return v(!d.f.call(t,e),t[e])}},I=function(t){if(!x(t))throw TypeError(String(t)+" is not an object");return t},C=Object.defineProperty,M={f:f?C:function(t,e,r){if(I(t),e=O(e,!0),I(r),T)try{return C(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},F=f?function(t,e,r){return M.f(t,e,v(1,r))}:function(t,e,r){return t[e]=r,t},N=function(t,e){try{F(c,t,e)}catch(r){c[t]=e}return e},D=c["__core-js_shared__"]||N("__core-js_shared__",{}),U=Function.toString;"function"!=typeof D.inspectSource&&(D.inspectSource=function(t){return U.call(t)});var B,K,V,$=D.inspectSource,q=c.WeakMap,G="function"==typeof q&&/native code/.test($(q)),W=u((function(t){(t.exports=function(t,e){return D[t]||(D[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.12.1",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),z=0,H=Math.random(),X=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++z+H).toString(36)},Y=W("keys"),Z=function(t){return Y[t]||(Y[t]=X(t))},J={},Q=c.WeakMap;if(G||D.state){var tt=D.state||(D.state=new Q),et=tt.get,rt=tt.has,nt=tt.set;B=function(t,e){if(rt.call(tt,t))throw new TypeError("Object already initialized");return e.facade=t,nt.call(tt,t,e),e},K=function(t){return et.call(tt,t)||{}},V=function(t){return rt.call(tt,t)}}else{var ot=Z("state");J[ot]=!0,B=function(t,e){if(_(t,ot))throw new TypeError("Object already initialized");return e.facade=t,F(t,ot,e),e},K=function(t){return _(t,ot)?t[ot]:{}},V=function(t){return _(t,ot)}}var it={set:B,get:K,has:V,enforce:function(t){return V(t)?K(t):B(t,{})},getterFor:function(t){return function(e){var r;if(!x(e)||(r=K(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return r}}},at=u((function(t){var e=it.get,r=it.enforce,n=String(String).split("String");(t.exports=function(t,e,o,i){var a,u=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable,l=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||_(o,"name")||F(o,"name",e),(a=r(o)).source||(a.source=n.join("string"==typeof e?e:""))),t!==c?(u?!l&&t[e]&&(s=!0):delete t[e],s?t[e]=o:F(t,e,o)):s?t[e]=o:N(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||$(this)}))})),ut=c,st=function(t){return"function"==typeof t?t:void 0},ct=function(t,e){return arguments.length<2?st(ut[t])||st(c[t]):ut[t]&&ut[t][e]||c[t]&&c[t][e]},lt=Math.ceil,ft=Math.floor,pt=function(t){return isNaN(t=+t)?0:(t>0?ft:lt)(t)},ht=Math.min,dt=function(t){return t>0?ht(pt(t),9007199254740991):0},vt=Math.max,yt=Math.min,gt=function(t,e){var r=pt(t);return r<0?vt(r+e,0):yt(r,e)},mt=function(t){return function(e,r,n){var o,i=E(e),a=dt(i.length),u=gt(n,a);if(t&&r!=r){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===r)return t||u||0;return!t&&-1}},bt={includes:mt(!0),indexOf:mt(!1)},wt=bt.indexOf,Et=function(t,e){var r,n=E(t),o=0,i=[];for(r in n)!_(J,r)&&_(n,r)&&i.push(r);for(;e.length>o;)_(n,r=e[o++])&&(~wt(i,r)||i.push(r));return i},xt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ot=xt.concat("length","prototype"),St={f:Object.getOwnPropertyNames||function(t){return Et(t,Ot)}},jt={f:Object.getOwnPropertySymbols},_t=ct("Reflect","ownKeys")||function(t){var e=St.f(I(t)),r=jt.f;return r?e.concat(r(t)):e},At=function(t,e){for(var r=_t(e),n=M.f,o=R.f,i=0;i<r.length;i++){var a=r[i];_(t,a)||n(t,a,o(e,a))}},Lt=/#|\.prototype\./,kt=function(t,e){var r=Pt[Tt(t)];return r==It||r!=Rt&&("function"==typeof e?l(e):!!e)},Tt=kt.normalize=function(t){return String(t).replace(Lt,".").toLowerCase()},Pt=kt.data={},Rt=kt.NATIVE="N",It=kt.POLYFILL="P",Ct=kt,Mt=R.f,Ft=function(t,e){var r,n,o,i,a,u=t.target,s=t.global,l=t.stat;if(r=s?c:l?c[u]||N(u,{}):(c[u]||{}).prototype)for(n in e){if(i=e[n],o=t.noTargetGet?(a=Mt(r,n))&&a.value:r[n],!Ct(s?n:u+(l?".":"#")+n,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;At(i,o)}(t.sham||o&&o.sham)&&F(i,"sham",!0),at(r,n,i,t)}},Nt=function(){var t=I(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Dt(t,e){return RegExp(t,e)}var Ut={UNSUPPORTED_Y:l((function(){var t=Dt("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:l((function(){var t=Dt("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Bt=RegExp.prototype.exec,Kt=W("native-string-replace",String.prototype.replace),Vt=Bt,$t=function(){var t=/a/,e=/b*/g;return Bt.call(t,"a"),Bt.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),qt=Ut.UNSUPPORTED_Y||Ut.BROKEN_CARET,Gt=void 0!==/()??/.exec("")[1];($t||Gt||qt)&&(Vt=function(t){var e,r,n,o,i=this,a=qt&&i.sticky,u=Nt.call(i),s=i.source,c=0,l=t;return a&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),l=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(s="(?: "+s+")",l=" "+l,c++),r=new RegExp("^(?:"+s+")",u)),Gt&&(r=new RegExp("^"+s+"$(?!\\s)",u)),$t&&(e=i.lastIndex),n=Bt.call(a?r:i,l),a?n?(n.input=n.input.slice(c),n[0]=n[0].slice(c),n.index=i.lastIndex,i.lastIndex+=n[0].length):i.lastIndex=0:$t&&n&&(i.lastIndex=i.global?n.index+n[0].length:e),Gt&&n&&n.length>1&&Kt.call(n[0],r,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(n[o]=void 0)})),n});var Wt=Vt;Ft({target:"RegExp",proto:!0,forced:/./.exec!==Wt},{exec:Wt});var zt,Ht,Xt=ct("navigator","userAgent")||"",Yt=c.process,Zt=Yt&&Yt.versions,Jt=Zt&&Zt.v8;Jt?Ht=(zt=Jt.split("."))[0]<4?1:zt[0]+zt[1]:Xt&&(!(zt=Xt.match(/Edge\/(\d+)/))||zt[1]>=74)&&(zt=Xt.match(/Chrome\/(\d+)/))&&(Ht=zt[1]);var Qt=Ht&&+Ht,te=!!Object.getOwnPropertySymbols&&!l((function(){return!String(Symbol())||!Symbol.sham&&Qt&&Qt<41})),ee=te&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,re=W("wks"),ne=c.Symbol,oe=ee?ne:ne&&ne.withoutSetter||X,ie=function(t){return _(re,t)&&(te||"string"==typeof re[t])||(te&&_(ne,t)?re[t]=ne[t]:re[t]=oe("Symbol."+t)),re[t]},ae=ie("species"),ue=RegExp.prototype,se=!l((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),ce="$0"==="a".replace(/./,"$0"),le=ie("replace"),fe=!!/./[le]&&""===/./[le]("a","$0"),pe=!l((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var r="ab".split(t);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),he=function(t,e,r,n){var o=ie(t),i=!l((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!l((function(){var e=!1,r=/a/;return"split"===t&&((r={}).constructor={},r.constructor[ae]=function(){return r},r.flags="",r[o]=/./[o]),r.exec=function(){return e=!0,null},r[o](""),!e}));if(!i||!a||"replace"===t&&(!se||!ce||fe)||"split"===t&&!pe){var u=/./[o],s=r(o,""[t],(function(t,e,r,n,o){var a=e.exec;return a===Wt||a===ue.exec?i&&!o?{done:!0,value:u.call(e,r,n)}:{done:!0,value:t.call(r,e,n)}:{done:!1}}),{REPLACE_KEEPS_$0:ce,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:fe}),c=s[0],f=s[1];at(String.prototype,t,c),at(ue,o,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}n&&F(ue[o],"sham",!0)},de=function(t){return function(e,r){var n,o,i=String(w(e)),a=pt(r),u=i.length;return a<0||a>=u?t?"":void 0:(n=i.charCodeAt(a))<55296||n>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):n:t?i.slice(a,a+2):o-56320+(n-55296<<10)+65536}},ve={codeAt:de(!1),charAt:de(!0)},ye=ve.charAt,ge=function(t,e,r){return e+(r?ye(t,e).length:1)},me=function(t,e){var r=t.exec;if("function"==typeof r){var n=r.call(t,e);if("object"!=typeof n)throw TypeError("RegExp exec method returned something other than an Object or null");return n}if("RegExp"!==g(t))throw TypeError("RegExp#exec called on incompatible receiver");return Wt.call(t,e)};he("match",1,(function(t,e,r){return[function(e){var r=w(this),n=null==e?void 0:e[t];return void 0!==n?n.call(e,r):new RegExp(e)[t](String(r))},function(t){var n=r(e,t,this);if(n.done)return n.value;var o=I(t),i=String(this);if(!o.global)return me(o,i);var a=o.unicode;o.lastIndex=0;for(var u,s=[],c=0;null!==(u=me(o,i));){var l=String(u[0]);s[c]=l,""===l&&(o.lastIndex=ge(i,dt(o.lastIndex),a)),c++}return 0===c?null:s}]}));var be=Math.floor,we="".replace,Ee=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,xe=/\$([$&'`]|\d{1,2})/g,Oe=function(t,e,r,n,o,i){var a=r+t.length,u=n.length,s=xe;return void 0!==o&&(o=S(o),s=Ee),we.call(i,s,(function(i,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(a);case"<":c=o[s.slice(1,-1)];break;default:var l=+s;if(0===l)return i;if(l>u){var f=be(l/10);return 0===f?i:f<=u?void 0===n[f-1]?s.charAt(1):n[f-1]+s.charAt(1):i}c=n[l-1]}return void 0===c?"":c}))},Se=Math.max,je=Math.min;he("replace",2,(function(t,e,r,n){var o=n.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=n.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(r,n){var o=w(this),i=null==r?void 0:r[t];return void 0!==i?i.call(r,o,n):e.call(String(o),r,n)},function(t,n){if(!o&&i||"string"==typeof n&&-1===n.indexOf(a)){var u=r(e,t,this,n);if(u.done)return u.value}var s=I(t),c=String(this),l="function"==typeof n;l||(n=String(n));var f=s.global;if(f){var p=s.unicode;s.lastIndex=0}for(var h=[];;){var d=me(s,c);if(null===d)break;if(h.push(d),!f)break;""===String(d[0])&&(s.lastIndex=ge(c,dt(s.lastIndex),p))}for(var v,y="",g=0,m=0;m<h.length;m++){d=h[m];for(var b=String(d[0]),w=Se(je(pt(d.index),c.length),0),E=[],x=1;x<d.length;x++)E.push(void 0===(v=d[x])?v:String(v));var O=d.groups;if(l){var S=[b].concat(E,w,c);void 0!==O&&S.push(O);var j=String(n.apply(void 0,S))}else j=Oe(b,c,w,E,O,n);w>=g&&(y+=c.slice(g,w)+j,g=w+b.length)}return y+c.slice(g)}]}));var _e=Object.keys||function(t){return Et(t,xt)},Ae=l((function(){_e(1)}));Ft({target:"Object",stat:!0,forced:Ae},{keys:function(t){return _e(S(t))}});var Le=function(t,e){var r=[][t];return!!r&&l((function(){r.call(null,e||function(){throw 1},1)}))},ke=bt.indexOf,Te=[].indexOf,Pe=!!Te&&1/[1].indexOf(1,-0)<0,Re=Le("indexOf");Ft({target:"Array",proto:!0,forced:Pe||!Re},{indexOf:function(t){return Pe?Te.apply(this,arguments)||0:ke(this,t,arguments.length>1?arguments[1]:void 0)}});var Ie=Array.isArray||function(t){return"Array"==g(t)},Ce=function(t,e,r){var n=O(e);n in t?M.f(t,n,v(0,r)):t[n]=r},Me=ie("species"),Fe=function(t,e){var r;return Ie(t)&&("function"!=typeof(r=t.constructor)||r!==Array&&!Ie(r.prototype)?x(r)&&null===(r=r[Me])&&(r=void 0):r=void 0),new(void 0===r?Array:r)(0===e?0:e)},Ne=ie("species"),De=function(t){return Qt>=51||!l((function(){var e=[];return(e.constructor={})[Ne]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Ue=ie("isConcatSpreadable"),Be=Qt>=51||!l((function(){var t=[];return t[Ue]=!1,t.concat()[0]!==t})),Ke=De("concat"),Ve=function(t){if(!x(t))return!1;var e=t[Ue];return void 0!==e?!!e:Ie(t)};Ft({target:"Array",proto:!0,forced:!Be||!Ke},{concat:function(t){var e,r,n,o,i,a=S(this),u=Fe(a,0),s=0;for(e=-1,n=arguments.length;e<n;e++)if(Ve(i=-1===e?a:arguments[e])){if(s+(o=dt(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(r=0;r<o;r++,s++)r in i&&Ce(u,s,i[r])}else{if(s>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Ce(u,s++,i)}return u.length=s,u}});var $e=De("slice"),qe=ie("species"),Ge=[].slice,We=Math.max;Ft({target:"Array",proto:!0,forced:!$e},{slice:function(t,e){var r,n,o,i=E(this),a=dt(i.length),u=gt(t,a),s=gt(void 0===e?a:e,a);if(Ie(i)&&("function"!=typeof(r=i.constructor)||r!==Array&&!Ie(r.prototype)?x(r)&&null===(r=r[qe])&&(r=void 0):r=void 0,r===Array||void 0===r))return Ge.call(i,u,s);for(n=new(void 0===r?Array:r)(We(s-u,0)),o=0;u<s;u++,o++)u in i&&Ce(n,o,i[u]);return n.length=o,n}});var ze=r.create();function He(t,e){void 0===e&&(e={});for(var r=function(t){for(var e=[],r=0;r<t.length;){var n=t[r];if("*"!==n&&"+"!==n&&"?"!==n)if("\\"!==n)if("{"!==n)if("}"!==n)if(":"!==n)if("("!==n)e.push({type:"CHAR",index:r,value:t[r++]});else{var o=1,i="";if("?"===t[u=r+1])throw new TypeError('Pattern cannot start with "?" at '+u);for(;u<t.length;)if("\\"!==t[u]){if(")"===t[u]){if(0==--o){u++;break}}else if("("===t[u]&&(o++,"?"!==t[u+1]))throw new TypeError("Capturing groups are not allowed at "+u);i+=t[u++]}else i+=t[u++]+t[u++];if(o)throw new TypeError("Unbalanced pattern at "+r);if(!i)throw new TypeError("Missing pattern at "+r);e.push({type:"PATTERN",index:r,value:i}),r=u}else{for(var a="",u=r+1;u<t.length;){var s=t.charCodeAt(u);if(!(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s))break;a+=t[u++]}if(!a)throw new TypeError("Missing parameter name at "+r);e.push({type:"NAME",index:r,value:a}),r=u}else e.push({type:"CLOSE",index:r,value:t[r++]});else e.push({type:"OPEN",index:r,value:t[r++]});else e.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});else e.push({type:"MODIFIER",index:r,value:t[r++]})}return e.push({type:"END",index:r,value:""}),e}(t),n=e.prefixes,o=void 0===n?"./":n,i="[^"+Ze(e.delimiter||"/#?")+"]+?",a=[],u=0,s=0,c="",l=function(t){if(s<r.length&&r[s].type===t)return r[s++].value},f=function(t){var e=l(t);if(void 0!==e)return e;var n=r[s],o=n.type,i=n.index;throw new TypeError("Unexpected "+o+" at "+i+", expected "+t)},p=function(){for(var t,e="";t=l("CHAR")||l("ESCAPED_CHAR");)e+=t;return e};s<r.length;){var h=l("CHAR"),d=l("NAME"),v=l("PATTERN");if(d||v){var y=h||"";-1===o.indexOf(y)&&(c+=y,y=""),c&&(a.push(c),c=""),a.push({name:d||u++,prefix:y,suffix:"",pattern:v||i,modifier:l("MODIFIER")||""})}else{var g=h||l("ESCAPED_CHAR");if(g)c+=g;else if(c&&(a.push(c),c=""),l("OPEN")){y=p();var m=l("NAME")||"",b=l("PATTERN")||"",w=p();f("CLOSE"),a.push({name:m||(b?u++:""),pattern:m&&!b?i:b,prefix:y,suffix:w,modifier:l("MODIFIER")||""})}else f("END")}}return a}function Xe(t,e){void 0===e&&(e={});var r=Je(e),n=e.encode,o=void 0===n?function(t){return t}:n,i=e.validate,a=void 0===i||i,u=t.map((function(t){if("object"==typeof t)return new RegExp("^(?:"+t.pattern+")$",r)}));return function(e){for(var r="",n=0;n<t.length;n++){var i=t[n];if("string"!=typeof i){var s=e?e[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,l="*"===i.modifier||"+"===i.modifier;if(Array.isArray(s)){if(!l)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===s.length){if(c)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var f=0;f<s.length;f++){var p=o(s[f],i);if(a&&!u[n].test(p))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+p+'"');r+=i.prefix+p+i.suffix}}else if("string"!=typeof s&&"number"!=typeof s){if(!c){var h=l?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+h)}}else{p=o(String(s),i);if(a&&!u[n].test(p))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+p+'"');r+=i.prefix+p+i.suffix}}else r+=i}return r}}function Ye(t,e,r){void 0===r&&(r={});var n=r.decode,o=void 0===n?function(t){return t}:n;return function(r){var n=t.exec(r);if(!n)return!1;for(var i=n[0],a=n.index,u=Object.create(null),s=function(t){if(void 0===n[t])return"continue";var r=e[t-1];"*"===r.modifier||"+"===r.modifier?u[r.name]=n[t].split(r.prefix+r.suffix).map((function(t){return o(t,r)})):u[r.name]=o(n[t],r)},c=1;c<n.length;c++)s(c);return{path:i,index:a,params:u}}}function Ze(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function Je(t){return t&&t.sensitive?"":"i"}function Qe(t,e,r){void 0===r&&(r={});for(var n=r.strict,o=void 0!==n&&n,i=r.start,a=void 0===i||i,u=r.end,s=void 0===u||u,c=r.encode,l=void 0===c?function(t){return t}:c,f="["+Ze(r.endsWith||"")+"]|$",p="["+Ze(r.delimiter||"/#?")+"]",h=a?"^":"",d=0,v=t;d<v.length;d++){var y=v[d];if("string"==typeof y)h+=Ze(l(y));else{var g=Ze(l(y.prefix)),m=Ze(l(y.suffix));if(y.pattern)if(e&&e.push(y),g||m)if("+"===y.modifier||"*"===y.modifier){var b="*"===y.modifier?"?":"";h+="(?:"+g+"((?:"+y.pattern+")(?:"+m+g+"(?:"+y.pattern+"))*)"+m+")"+b}else h+="(?:"+g+"("+y.pattern+")"+m+")"+y.modifier;else h+="("+y.pattern+")"+y.modifier;else h+="(?:"+g+m+")"+y.modifier}}if(s)o||(h+=p+"?"),h+=r.endsWith?"(?="+f+")":"$";else{var w=t[t.length-1],E="string"==typeof w?p.indexOf(w[w.length-1])>-1:void 0===w;o||(h+="(?:"+p+"(?="+f+"))?"),E||(h+="(?="+p+"|"+f+")")}return new RegExp(h,Je(r))}function tr(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,n=0,o=r.exec(t.source);o;)e.push({name:o[1]||n++,prefix:"",suffix:"",modifier:"",pattern:""}),o=r.exec(t.source);return t}(t,e):Array.isArray(t)?function(t,e,r){var n=t.map((function(t){return tr(t,e,r).source}));return new RegExp("(?:"+n.join("|")+")",Je(r))}(t,e,r):function(t,e,r){return Qe(He(t,r),e,r)}(t,e,r)}var er=Object.freeze({__proto__:null,parse:He,compile:function(t,e){return Xe(He(t,e),e)},tokensToFunction:Xe,match:function(t,e){var r=[];return Ye(tr(t,r,e),r,e)},regexpToFunction:Ye,tokensToRegexp:Qe,pathToRegexp:tr}),rr=u((function(t,e){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(t,e){},function(t,e,r){var n=Array.prototype,o=Object.prototype,i={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},a=/[&"'<>]/g;function u(t,e){return o.hasOwnProperty.call(t,e)}function s(t){return i[t]}function c(t,e,r){var n,o,i;if(t instanceof Error&&(t=(o=t).name+": "+o.message),Object.setPrototypeOf?Object.setPrototypeOf(n=Error(t),c.prototype):Object.defineProperty(n=this,"message",{enumerable:!1,writable:!0,value:t}),Object.defineProperty(n,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(n,this.constructor),o){var a=Object.getOwnPropertyDescriptor(o,"stack");(i=a&&(a.get||function(){return a.value}))||(i=function(){return o.stack})}else{var u=Error(t).stack;i=function(){return u}}return Object.defineProperty(n,"stack",{get:function(){return i.call(n)}}),Object.defineProperty(n,"cause",{value:o}),n.lineno=e,n.colno=r,n.firstUpdate=!0,n.Update=function(t){var e="("+(t||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?e+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(e+=" [Line "+this.lineno+"]")),e+="\n ",this.firstUpdate&&(e+=" "),this.message=e+(this.message||""),this.firstUpdate=!1,this},n}function l(t){return"[object Function]"===o.toString.call(t)}function f(t){return"[object Array]"===o.toString.call(t)}function p(t){return"[object String]"===o.toString.call(t)}function h(t){return"[object Object]"===o.toString.call(t)}function d(t){var e,r=(e=t)?"string"==typeof e?e.split("."):[e]:[];return function(t){for(var e=t,n=0;n<r.length;n++){var o=r[n];if(!u(e,o))return;e=e[o]}return e}}function v(t){return Array.prototype.slice.call(t)}function y(t,e,r){return Array.prototype.indexOf.call(t||[],e,r)}function g(t){var e=[];for(var r in t)u(t,r)&&e.push(r);return e}(e=t.exports={}).hasOwnProp=u,e.t=function(t,r,n){if(n.Update||(n=new e.TemplateError(n)),n.Update(t),!r){var o=n;(n=Error(o.message)).name=o.name}return n},Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,Error.prototype):c.prototype=Object.create(Error.prototype,{constructor:{value:c}}),e.TemplateError=c,e.escape=function(t){return t.replace(a,s)},e.isFunction=l,e.isArray=f,e.isString=p,e.isObject=h,e.getAttrGetter=d,e.groupBy=function(t,e,r){for(var n={},o=l(e)?e:d(e),i=0;i<t.length;i++){var a=t[i],u=o(a,i);if(void 0===u&&!0===r)throw new TypeError('groupby: attribute "'+e+'" resolved to undefined');(n[u]||(n[u]=[])).push(a)}return n},e.toArray=v,e.without=function(t){var e=[];if(!t)return e;for(var r=t.length,n=v(arguments).slice(1),o=-1;++o<r;)-1===y(n,t[o])&&e.push(t[o]);return e},e.repeat=function(t,e){for(var r="",n=0;n<e;n++)r+=t;return r},e.each=function(t,e,r){if(null!=t)if(n.forEach&&t.forEach===n.forEach)t.forEach(e,r);else if(t.length===+t.length)for(var o=0,i=t.length;o<i;o++)e.call(r,t[o],o,t)},e.map=function(t,e){var r=[];if(null==t)return r;if(n.map&&t.map===n.map)return t.map(e);for(var o=0;o<t.length;o++)r[r.length]=e(t[o],o);return t.length===+t.length&&(r.length=t.length),r},e.asyncIter=function(t,e,r){var n=-1;!function o(){++n<t.length?e(t[n],n,o,r):r()}()},e.asyncFor=function(t,e,r){var n=g(t||{}),o=n.length,i=-1;!function a(){var u=n[++i];i<o?e(u,t[u],i,o,a):r()}()},e.indexOf=y,e.keys=g,e.r=function(t){return g(t).map((function(e){return[e,t[e]]}))},e.u=function(t){return g(t).map((function(e){return t[e]}))},e.f=e.extend=function(t,e){return t=t||{},g(e).forEach((function(r){t[r]=e[r]})),t},e.inOperator=function(t,e){if(f(e)||p(e))return-1!==e.indexOf(t);if(h(e))return t in e;throw Error('Cannot use "in" operator to search for "'+t+'" in unexpected types.')}},function(t,e,r){var n=r(1),o=Array.from,i="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof o,a=function(){function t(t,e){this.variables=Object.create(null),this.parent=t,this.topLevel=!1,this.isolateWrites=e}var e=t.prototype;return e.set=function(t,e,r){var n=t.split("."),o=this.variables,i=this;if(r&&(i=this.resolve(n[0],!0)))i.set(t,e);else{for(var a=0;a<n.length-1;a++){var u=n[a];o[u]||(o[u]={}),o=o[u]}o[n[n.length-1]]=e}},e.get=function(t){var e=this.variables[t];return void 0!==e?e:null},e.lookup=function(t){var e=this.parent,r=this.variables[t];return void 0!==r?r:e&&e.lookup(t)},e.resolve=function(t,e){var r=e&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[t]?this:r&&r.resolve(t)},e.push=function(e){return new t(this,e)},e.pop=function(){return this.parent},t}();function u(t){return t&&Object.prototype.hasOwnProperty.call(t,"__keywords")}function s(t){var e=t.length;return 0===e?0:u(t[e-1])?e-1:e}function c(t){if("string"!=typeof t)return t;this.val=t,this.length=t.length}c.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),c.prototype.valueOf=function(){return this.val},c.prototype.toString=function(){return this.val},t.exports={Frame:a,makeMacro:function(t,e,r){return function(){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var a,c=s(o),l=function(t){var e=t.length;if(e){var r=t[e-1];if(u(r))return r}return{}}(o);if(c>t.length)a=o.slice(0,t.length),o.slice(a.length,c).forEach((function(t,r){r<e.length&&(l[e[r]]=t)})),a.push(l);else if(c<t.length){a=o.slice(0,c);for(var f=c;f<t.length;f++){var p=t[f];a.push(l[p]),delete l[p]}a.push(l)}else a=o;return r.apply(this,a)}},makeKeywordArgs:function(t){return t.__keywords=!0,t},numArgs:s,suppressValue:function(t,e){return t=null!=t?t:"",!e||t instanceof c||(t=n.escape(t.toString())),t},ensureDefined:function(t,e,r){if(null==t)throw new n.TemplateError("attempted to output null or undefined value",e+1,r+1);return t},memberLookup:function(t,e){if(null!=t)return"function"==typeof t[e]?function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];return t[e].apply(t,n)}:t[e]},contextOrFrameLookup:function(t,e,r){var n=e.lookup(r);return void 0!==n?n:t.lookup(r)},callWrap:function(t,e,r,n){if(!t)throw Error("Unable to call `"+e+"`, which is undefined or falsey");if("function"!=typeof t)throw Error("Unable to call `"+e+"`, which is not a function");return t.apply(r,n)},handleError:function(t,e,r){return t.lineno?t:new n.TemplateError(t,e,r)},isArray:n.isArray,keys:n.keys,SafeString:c,copySafeness:function(t,e){return t instanceof c?new c(e):e.toString()},markSafe:function(t){var e=typeof t;return"string"===e?new c(t):"function"!==e?t:function(e){var r=t.apply(this,arguments);return"string"==typeof r?new c(r):r}},asyncEach:function(t,e,r,o){if(n.isArray(t)){var i=t.length;n.asyncIter(t,(function(t,n,o){switch(e){case 1:r(t,n,i,o);break;case 2:r(t[0],t[1],n,i,o);break;case 3:r(t[0],t[1],t[2],n,i,o);break;default:t.push(n,i,o),r.apply(this,t)}}),o)}else n.asyncFor(t,(function(t,e,n,o,i){r(t,e,n,o,i)}),o)},asyncAll:function(t,e,r,o){var i,a,u=0;function s(t,e){u++,a[t]=e,u===i&&o(null,a.join(""))}if(n.isArray(t))if(i=t.length,a=Array(i),0===i)o(null,"");else for(var c=0;c<t.length;c++){var l=t[c];switch(e){case 1:r(l,c,i,s);break;case 2:r(l[0],l[1],c,i,s);break;case 3:r(l[0],l[1],l[2],c,i,s);break;default:l.push(c,i,s),r.apply(this,l)}}else{var f=n.keys(t||{});if(i=f.length,a=Array(i),0===i)o(null,"");else for(var p=0;p<f.length;p++){var h=f[p];r(h,t[h],p,i,s)}}},inOperator:n.inOperator,fromIterator:function(t){return"object"!=typeof t||null===t||n.isArray(t)?t:i&&Symbol.iterator in t?o(t):t}}},function(t,e,r){function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=function(t){var e,r;function o(e){var r;return(r=t.call(this)||this).precompiled=e||{},r}return r=t,(e=o).prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r),o.prototype.getSource=function(t){return this.precompiled[t]?{src:{type:"code",obj:this.precompiled[t]},path:t}:null},o}(r(4));t.exports={PrecompiledLoader:o}},function(t,e,r){function n(t,e){return(n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=r(0),i=r(5).EmitterObj;t.exports=function(t){var e,r;function i(){return t.apply(this,arguments)||this}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,n(e,r);var a=i.prototype;return a.resolve=function(t,e){return o.resolve(o.dirname(t),e)},a.isRelative=function(t){return 0===t.indexOf("./")||0===t.indexOf("../")},i}(i)},function(t,e,r){function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=r(13),s=r(1);function c(t,e,r){r=r||{},s.keys(r).forEach((function(e){var n,o;r[e]=(n=t.prototype[e],o=r[e],"function"!=typeof n||"function"!=typeof o?o:function(){var t=this.parent;this.parent=n;var e=o.apply(this,arguments);return this.parent=t,e})}));var n=function(t){function r(){return t.apply(this,arguments)||this}return i(r,t),o(r,[{key:"typename",get:function(){return e}}]),r}(t);return s.f(n.prototype,r),n}var l=function(){function t(){this.init.apply(this,arguments)}return t.prototype.init=function(){},t.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),c(this,t,e)},o(t,[{key:"typename",get:function(){return this.constructor.name}}]),t}(),f=function(t){function e(){var e,r;return(e=r=t.call(this)||this).init.apply(e,arguments),r}return i(e,t),e.prototype.init=function(){},e.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),c(this,t,e)},o(e,[{key:"typename",get:function(){return this.constructor.name}}]),e}(u);t.exports={Obj:l,EmitterObj:f}},function(t,e,r){var n,o=r(1),i=r(7),a=i.Environment,u=i.Template,s=r(4),c=r(3),l=r(0),f=r(0),p=r(0),h=r(0),d=r(2),v=r(0),y=r(17);function g(t,e){var r;return e=e||{},o.isObject(t)&&(e=t,t=null),c.FileSystemLoader?r=new c.FileSystemLoader(t,{watch:e.watch,noCache:e.noCache}):c.WebLoader&&(r=new c.WebLoader(t,{useCache:e.web&&e.web.useCache,async:e.web&&e.web.async})),n=new a(r,e),e&&e.express&&n.express(e.express),n}t.exports={Environment:a,Template:u,Loader:s,FileSystemLoader:c.FileSystemLoader,NodeResolveLoader:c.NodeResolveLoader,PrecompiledLoader:c.PrecompiledLoader,WebLoader:c.WebLoader,compiler:f,parser:p,lexer:h,runtime:d,lib:o,nodes:v,installJinjaCompat:y,configure:g,reset:function(){n=void 0},compile:function(t,e,r,o){return n||g(),new u(t,e,r,o)},render:function(t,e,r){return n||g(),n.render(t,e,r)},renderString:function(t,e,r){return n||g(),n.renderString(t,e,r)},precompile:l?l.precompile:void 0,precompileString:l?l.precompileString:void 0}},function(t,e,r){function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=r(8),a=r(11),u=r(1),s=r(0),c=r(12),l=r(3),f=l.FileSystemLoader,p=l.WebLoader,h=l.PrecompiledLoader,d=r(14),v=r(15),y=r(5),g=y.Obj,m=y.EmitterObj,b=r(2),w=b.handleError,E=b.Frame,x=r(16);function O(t,e,r){i((function(){t(e,r)}))}var S={type:"code",obj:{root:function(t,e,r,n,o){try{o(null,"")}catch(t){o(w(t,null,null))}}}},j=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.init=function(t,e){var r=this;e=this.opts=e||{},this.opts.dev=!!e.dev,this.opts.autoescape=null==e.autoescape||e.autoescape,this.opts.throwOnUndefined=!!e.throwOnUndefined,this.opts.trimBlocks=!!e.trimBlocks,this.opts.lstripBlocks=!!e.lstripBlocks,this.loaders=[],t?this.loaders=u.isArray(t)?t:[t]:f?this.loaders=[new f("views")]:p&&(this.loaders=[new p("/views")]),"undefined"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new h(window.nunjucksPrecompiled)),this.a(),this.globals=v(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],u.r(c).forEach((function(t){var e=t[0],n=t[1];return r.addFilter(e,n)})),u.r(d).forEach((function(t){var e=t[0],n=t[1];return r.addTest(e,n)}))},r.a=function(){var t=this;this.loaders.forEach((function(e){e.cache={},"function"==typeof e.on&&(e.on("update",(function(r,n){e.cache[r]=null,t.emit("update",r,n,e)})),e.on("load",(function(r,n){t.emit("load",r,n,e)})))}))},r.invalidateCache=function(){this.loaders.forEach((function(t){t.cache={}}))},r.addExtension=function(t,e){return e.__name=t,this.extensions[t]=e,this.extensionsList.push(e),this},r.removeExtension=function(t){var e=this.getExtension(t);e&&(this.extensionsList=u.without(this.extensionsList,e),delete this.extensions[t])},r.getExtension=function(t){return this.extensions[t]},r.hasExtension=function(t){return!!this.extensions[t]},r.addGlobal=function(t,e){return this.globals[t]=e,this},r.getGlobal=function(t){if(void 0===this.globals[t])throw Error("global not found: "+t);return this.globals[t]},r.addFilter=function(t,e,r){var n=e;return r&&this.asyncFilters.push(t),this.filters[t]=n,this},r.getFilter=function(t){if(!this.filters[t])throw Error("filter not found: "+t);return this.filters[t]},r.addTest=function(t,e){return this.tests[t]=e,this},r.getTest=function(t){if(!this.tests[t])throw Error("test not found: "+t);return this.tests[t]},r.resolveTemplate=function(t,e,r){return t.isRelative&&e&&t.isRelative(r)&&t.resolve?t.resolve(e,r):r},r.getTemplate=function(t,e,r,n,o){var i,a=this,s=this,c=null;if(t&&t.raw&&(t=t.raw),u.isFunction(r)&&(o=r,r=null,e=e||!1),u.isFunction(e)&&(o=e,e=!1),t instanceof A)c=t;else{if("string"!=typeof t)throw Error("template names must be a string: "+t);for(var l=0;l<this.loaders.length;l++){var f=this.loaders[l];if(c=f.cache[this.resolveTemplate(f,r,t)])break}}return c?(e&&c.compile(),o?void o(null,c):c):(u.asyncIter(this.loaders,(function(e,n,o,i){function a(t,r){t?i(t):r?(r.loader=e,i(null,r)):o()}t=s.resolveTemplate(e,r,t),e.async?e.getSource(t,a):a(null,e.getSource(t))}),(function(r,u){if(u||r||n||(r=Error("template not found: "+t)),r){if(o)return void o(r);throw r}var s;u?(s=new A(u.src,a,u.path,e),u.noCache||(u.loader.cache[t]=s)):s=new A(S,a,"",e),o?o(null,s):i=s})),i)},r.express=function(t){return x(this,t)},r.render=function(t,e,r){u.isFunction(e)&&(r=e,e=null);var n=null;return this.getTemplate(t,(function(t,o){if(t&&r)O(r,t);else{if(t)throw t;n=o.render(e,r)}})),n},r.renderString=function(t,e,r,n){return u.isFunction(r)&&(n=r,r={}),new A(t,this,(r=r||{}).path).render(e,n)},r.waterfall=function(t,e,r){return a(t,e,r)},e}(m),_=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.init=function(t,e,r){var n=this;this.env=r||new j,this.ctx=u.extend({},t),this.blocks={},this.exported=[],u.keys(e).forEach((function(t){n.addBlock(t,e[t])}))},r.lookup=function(t){return t in this.env.globals&&!(t in this.ctx)?this.env.globals[t]:this.ctx[t]},r.setVariable=function(t,e){this.ctx[t]=e},r.getVariables=function(){return this.ctx},r.addBlock=function(t,e){return this.blocks[t]=this.blocks[t]||[],this.blocks[t].push(e),this},r.getBlock=function(t){if(!this.blocks[t])throw Error('unknown block "'+t+'"');return this.blocks[t][0]},r.getSuper=function(t,e,r,n,o,i){var a=u.indexOf(this.blocks[e]||[],r),s=this.blocks[e][a+1];if(-1===a||!s)throw Error('no super block available for "'+e+'"');s(t,this,n,o,i)},r.addExport=function(t){this.exported.push(t)},r.getExported=function(){var t=this,e={};return this.exported.forEach((function(r){e[r]=t.ctx[r]})),e},e}(g),A=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.init=function(t,e,r,n){if(this.env=e||new j,u.isObject(t))switch(t.type){case"code":this.tmplProps=t.obj;break;case"string":this.tmplStr=t.obj;break;default:throw Error("Unexpected template object type "+t.type+"; expected 'code', or 'string'")}else{if(!u.isString(t))throw Error("src must be a string or an object describing the source");this.tmplStr=t}if(this.path=r,n)try{this.h()}catch(t){throw u.t(this.path,this.env.opts.dev,t)}else this.compiled=!1},r.render=function(t,e,r){var n=this;"function"==typeof t?(r=t,t={}):"function"==typeof e&&(r=e,e=null);var o=!e;try{this.compile()}catch(t){var i=u.t(this.path,this.env.opts.dev,t);if(r)return O(r,i);throw i}var a=new _(t||{},this.blocks,this.env),s=e?e.push(!0):new E;s.topLevel=!0;var c=null,l=!1;return this.rootRenderFunc(this.env,a,s,b,(function(t,e){if(!l||!r||void 0===e)if(t&&(t=u.t(n.path,n.env.opts.dev,t),l=!0),r)o?O(r,t,e):r(t,e);else{if(t)throw t;c=e}})),c},r.getExported=function(t,e,r){"function"==typeof t&&(r=t,t={}),"function"==typeof e&&(r=e,e=null);try{this.compile()}catch(t){if(r)return r(t);throw t}var n=e?e.push():new E;n.topLevel=!0;var o=new _(t||{},this.blocks,this.env);this.rootRenderFunc(this.env,o,n,b,(function(t){t?r(t,null):r(null,o.getExported())}))},r.compile=function(){this.compiled||this.h()},r.h=function(){var t;if(this.tmplProps)t=this.tmplProps;else{var e=s.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);t=Function(e)()}this.blocks=this.v(t),this.rootRenderFunc=t.root,this.compiled=!0},r.v=function(t){var e={};return u.keys(t).forEach((function(r){"b_"===r.slice(0,2)&&(e[r.slice(2)]=t[r])})),e},e}(g);t.exports={Environment:j,Template:A}},function(t,e,r){var n=r(9),o=[],i=[],a=n.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function u(t){var e;(e=o.length?o.pop():new s).task=t,n(e)}function s(){this.task=null}t.exports=u,s.prototype.call=function(){try{this.task.call()}catch(t){u.onerror?u.onerror(t):(i.push(t),a())}finally{this.task=null,o[o.length]=this}}},function(t,e,r){!function(e){function r(t){o.length||n(),o[o.length]=t}t.exports=r;var n,o=[],i=0,a=1024;function u(){for(;i<o.length;){var t=i;if(i+=1,o[t].call(),i>a){for(var e=0,r=o.length-i;e<r;e++)o[e]=o[e+i];o.length-=i,i=0}}o.length=0,i=0}var s,c,l,f=void 0!==e?e:self,p=f.MutationObserver||f.WebKitMutationObserver;function h(t){return function(){var e=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(e),clearInterval(r),t()}}}"function"==typeof p?(s=1,c=new p(u),l=document.createTextNode(""),c.observe(l,{characterData:!0}),n=function(){s=-s,l.data=s}):n=h(u),r.requestFlush=n,r.makeRequestCallFromTimer=h}(r(10))},function(t,e){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){var n;!function(r){var o=function(){var t=Array.prototype.slice.call(arguments);"function"==typeof t[0]&&t[0].apply(null,t.splice(1))},i=function(t){"function"==typeof setImmediate?setImmediate(t):"undefined"!=typeof process&&process.nextTick?process.nextTick(t):setTimeout(t,0)},a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=function(t,e,r){var n=r?i:o;if(e=e||function(){},!a(t))return e(Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var u=function(t){return function(r){if(r)e.apply(null,arguments),e=function(){};else{var o=Array.prototype.slice.call(arguments,1),i=t.next();i?o.push(u(i)):o.push(e),n((function(){t.apply(null,o)}))}}};u(function(t){var e=function(r){var n=function(){return t.length&&t[r].apply(null,arguments),n.next()};return n.next=function(){return r<t.length-1?e(r+1):null},n};return e(0)}(t))()};void 0===(n=function(){return u}.apply(e,[]))||(t.exports=n)}()},function(t,e,r){var n=r(1),o=r(2);function i(t,e){return null==t||!1===t?e:t}function a(t){return t!=t}function u(t){var e=(t=i(t,"")).toLowerCase();return o.copySafeness(t,e.charAt(0).toUpperCase()+e.slice(1))}function s(t){if(n.isString(t))return t.split("");if(n.isObject(t))return n.r(t||{}).map((function(t){return{key:t[0],value:t[1]}}));if(n.isArray(t))return t;throw new n.TemplateError("list filter: type not iterable")}function c(t){return function(e,r,o){void 0===r&&(r="truthy");var i=this,a=i.env.getTest(r);return n.toArray(e).filter((function(e){return a.call(i,e,o)===t}))}}function l(t){return o.copySafeness(t,t.replace(/^\s*|\s*$/g,""))}(e=t.exports={}).abs=Math.abs,e.batch=function(t,e,r){var n,o=[],i=[];for(n=0;n<t.length;n++)n%e==0&&i.length&&(o.push(i),i=[]),i.push(t[n]);if(i.length){if(r)for(n=i.length;n<e;n++)i.push(r);o.push(i)}return o},e.capitalize=u,e.center=function(t,e){if(e=e||80,(t=i(t,"")).length>=e)return t;var r=e-t.length,a=n.repeat(" ",r/2-r%2),u=n.repeat(" ",r/2);return o.copySafeness(t,a+t+u)},e.default=function(t,e,r){return r?t||e:void 0!==t?t:e},e.dictsort=function(t,e,r){if(!n.isObject(t))throw new n.TemplateError("dictsort filter: val must be an object");var o,i=[];for(var a in t)i.push([a,t[a]]);if(void 0===r||"key"===r)o=0;else{if("value"!==r)throw new n.TemplateError("dictsort filter: You can only sort by either key or value");o=1}return i.sort((function(t,r){var i=t[o],a=r[o];return e||(n.isString(i)&&(i=i.toUpperCase()),n.isString(a)&&(a=a.toUpperCase())),i>a?1:i===a?0:-1})),i},e.dump=function(t,e){return JSON.stringify(t,null,e)},e.escape=function(t){return t instanceof o.SafeString?t:(t=null==t?"":t,o.markSafe(n.escape(t.toString())))},e.safe=function(t){return t instanceof o.SafeString?t:(t=null==t?"":t,o.markSafe(t.toString()))},e.first=function(t){return t[0]},e.forceescape=function(t){return t=null==t?"":t,o.markSafe(n.escape(t.toString()))},e.groupby=function(t,e){return n.groupBy(t,e,this.env.opts.throwOnUndefined)},e.indent=function(t,e,r){if(""===(t=i(t,"")))return"";e=e||4;var a=t.split("\n"),u=n.repeat(" ",e),s=a.map((function(t,e){return 0!==e||r?""+u+t:t})).join("\n");return o.copySafeness(t,s)},e.join=function(t,e,r){return e=e||"",r&&(t=n.map(t,(function(t){return t[r]}))),t.join(e)},e.last=function(t){return t[t.length-1]},e.length=function(t){var e=i(t,"");return void 0!==e?"function"==typeof Map&&e instanceof Map||"function"==typeof Set&&e instanceof Set?e.size:!n.isObject(e)||e instanceof o.SafeString?e.length:n.keys(e).length:0},e.list=s,e.lower=function(t){return(t=i(t,"")).toLowerCase()},e.nl2br=function(t){return null==t?"":o.copySafeness(t,t.replace(/\r\n|\n/g,"<br />\n"))},e.random=function(t){return t[Math.floor(Math.random()*t.length)]},e.reject=c(!1),e.rejectattr=function(t,e){return t.filter((function(t){return!t[e]}))},e.select=c(!0),e.selectattr=function(t,e){return t.filter((function(t){return!!t[e]}))},e.replace=function(t,e,r,n){var i=t;if(e instanceof RegExp)return t.replace(e,r);void 0===n&&(n=-1);var a="";if("number"==typeof e)e=""+e;else if("string"!=typeof e)return t;if("number"==typeof t&&(t=""+t),"string"!=typeof t&&!(t instanceof o.SafeString))return t;if(""===e)return a=r+t.split("").join(r)+r,o.copySafeness(t,a);var u=t.indexOf(e);if(0===n||-1===u)return t;for(var s=0,c=0;u>-1&&(-1===n||c<n);)a+=t.substring(s,u)+r,s=u+e.length,c++,u=t.indexOf(e,s);return s<t.length&&(a+=t.substring(s)),o.copySafeness(i,a)},e.reverse=function(t){var e;return(e=n.isString(t)?s(t):n.map(t,(function(t){return t}))).reverse(),n.isString(t)?o.copySafeness(t,e.join("")):e},e.round=function(t,e,r){var n=Math.pow(10,e=e||0);return("ceil"===r?Math.ceil:"floor"===r?Math.floor:Math.round)(t*n)/n},e.slice=function(t,e,r){for(var n=Math.floor(t.length/e),o=t.length%e,i=[],a=0,u=0;u<e;u++){var s=a+u*n;u<o&&a++;var c=a+(u+1)*n,l=t.slice(s,c);r&&u>=o&&l.push(r),i.push(l)}return i},e.sum=function(t,e,r){return void 0===r&&(r=0),e&&(t=n.map(t,(function(t){return t[e]}))),r+t.reduce((function(t,e){return t+e}),0)},e.sort=o.makeMacro(["value","reverse","case_sensitive","attribute"],[],(function(t,e,r,o){var i=this,a=n.map(t,(function(t){return t})),u=n.getAttrGetter(o);return a.sort((function(t,a){var s=o?u(t):t,c=o?u(a):a;if(i.env.opts.throwOnUndefined&&o&&(void 0===s||void 0===c))throw new TypeError('sort: attribute "'+o+'" resolved to undefined');return!r&&n.isString(s)&&n.isString(c)&&(s=s.toLowerCase(),c=c.toLowerCase()),s<c?e?1:-1:s>c?e?-1:1:0})),a})),e.string=function(t){return o.copySafeness(t,t)},e.striptags=function(t,e){var r=l((t=i(t,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,"")),n="";return n=e?r.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):r.replace(/\s+/gi," "),o.copySafeness(t,n)},e.title=function(t){var e=(t=i(t,"")).split(" ").map((function(t){return u(t)}));return o.copySafeness(t,e.join(" "))},e.trim=l,e.truncate=function(t,e,r,n){var a=t;if(e=e||255,(t=i(t,"")).length<=e)return t;if(r)t=t.substring(0,e);else{var u=t.lastIndexOf(" ",e);-1===u&&(u=e),t=t.substring(0,u)}return t+=null!=n?n:"...",o.copySafeness(a,t)},e.upper=function(t){return(t=i(t,"")).toUpperCase()},e.urlencode=function(t){var e=encodeURIComponent;return n.isString(t)?e(t):(n.isArray(t)?t:n.r(t)).map((function(t){var r=t[0],n=t[1];return e(r)+"="+e(n)})).join("&")};var f=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,p=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,h=/^https?:\/\/.*$/,d=/^www\./,v=/\.(?:org|net|com)(?:\:|\/|$)/;e.urlize=function(t,e,r){a(e)&&(e=1/0);var n=!0===r?' rel="nofollow"':"";return t.split(/(\s+)/).filter((function(t){return t&&t.length})).map((function(t){var r=t.match(f),o=r?r[1]:t,i=o.substr(0,e);return h.test(o)?'<a href="'+o+'"'+n+">"+i+"</a>":d.test(o)?'<a href="http://'+o+'"'+n+">"+i+"</a>":p.test(o)?'<a href="mailto:'+o+'">'+o+"</a>":v.test(o)?'<a href="http://'+o+'"'+n+">"+i+"</a>":t})).join("")},e.wordcount=function(t){var e=(t=i(t,""))?t.match(/\w+/g):null;return e?e.length:null},e.float=function(t,e){var r=parseFloat(t);return a(r)?e:r};var y=o.makeMacro(["value","default","base"],[],(function(t,e,r){void 0===r&&(r=10);var n=parseInt(t,r);return a(n)?e:n}));e.int=y,e.d=e.default,e.e=e.escape},function(t,e,r){var n,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,t.exports.once=function(t,e){return new Promise((function(r,n){function o(){void 0!==i&&t.removeListener("error",i),r([].slice.call(arguments))}var i;"error"!==e&&(i=function(r){t.removeListener(e,o),n(r)},t.once("error",i)),t.once(e,o)}))},u.EventEmitter=u,u.prototype.y=void 0,u.prototype.b=0,u.prototype.w=void 0;var s=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t.w?u.defaultMaxListeners:t.w}function f(t,e,r,n){var o,i,a;if(c(r),void 0===(i=t.y)?(i=t.y=Object.create(null),t.b=0):(void 0!==i.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),i=t.y),a=i[e]),void 0===a)a=i[e]=r,++t.b;else if("function"==typeof a?a=i[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(o=l(t))>0&&a.length>o&&!a.warned){a.warned=!0;var u=Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,console&&console.warn&&console.warn(u)}return t}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},o=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(n);return o.listener=r,n.wrapFn=o,o}function h(t,e,r){var n=t.y;if(void 0===n)return[];var o=n[e];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(t){for(var e=Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(o):v(o,o.length)}function d(t){var e=this.y;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function v(t,e){for(var r=Array(e),n=0;n<e;++n)r[n]=t[n];return r}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),u.init=function(){void 0!==this.y&&this.y!==Object.getPrototypeOf(this).y||(this.y=Object.create(null),this.b=0),this.w=this.w||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.w=t,this},u.prototype.getMaxListeners=function(){return l(this)},u.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,o=this.y;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var u=Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var s=o[t];if(void 0===s)return!1;if("function"==typeof s)i(s,this,e);else{var c=s.length,l=v(s,c);for(r=0;r<c;++r)i(l[r],this,e)}return!0},u.prototype.addListener=function(t,e){return f(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return f(this,t,e,!0)},u.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},u.prototype.removeListener=function(t,e){var r,n,o,i,a;if(c(e),void 0===(n=this.y))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this.b?this.y=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,o),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this.y))return this;if(void 0===r.removeListener)return 0===arguments.length?(this.y=Object.create(null),this.b=0):void 0!==r[t]&&(0==--this.b?this.y=Object.create(null):delete r[t]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this.y=Object.create(null),this.b=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},u.prototype.listeners=function(t){return h(this,t,!0)},u.prototype.rawListeners=function(t){return h(this,t,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},u.prototype.listenerCount=d,u.prototype.eventNames=function(){return this.b>0?n(this.y):[]}},function(t,e,r){var n=r(2).SafeString;e.callable=function(t){return"function"==typeof t},e.defined=function(t){return void 0!==t},e.divisibleby=function(t,e){return t%e==0},e.escaped=function(t){return t instanceof n},e.equalto=function(t,e){return t===e},e.eq=e.equalto,e.sameas=e.equalto,e.even=function(t){return t%2==0},e.falsy=function(t){return!t},e.ge=function(t,e){return t>=e},e.greaterthan=function(t,e){return t>e},e.gt=e.greaterthan,e.le=function(t,e){return t<=e},e.lessthan=function(t,e){return t<e},e.lt=e.lessthan,e.lower=function(t){return t.toLowerCase()===t},e.ne=function(t,e){return t!==e},e.null=function(t){return null===t},e.number=function(t){return"number"==typeof t},e.odd=function(t){return t%2==1},e.string=function(t){return"string"==typeof t},e.truthy=function(t){return!!t},e.undefined=function(t){return void 0===t},e.upper=function(t){return t.toUpperCase()===t},e.iterable=function(t){return"undefined"!=typeof Symbol?!!t[Symbol.iterator]:Array.isArray(t)||"string"==typeof t},e.mapping=function(t){var e=null!=t&&"object"==typeof t&&!Array.isArray(t);return Set?e&&!(t instanceof Set):e}},function(t,e,r){t.exports=function(){return{range:function(t,e,r){void 0===e?(e=t,t=0,r=1):r||(r=1);var n=[];if(r>0)for(var o=t;o<e;o+=r)n.push(o);else for(var i=t;i>e;i+=r)n.push(i);return n},cycler:function(){return t=Array.prototype.slice.call(arguments),e=-1,{current:null,reset:function(){e=-1,this.current=null},next:function(){return++e>=t.length&&(e=0),this.current=t[e],this.current}};var t,e},joiner:function(t){return function(t){t=t||",";var e=!0;return function(){var r=e?"":t;return e=!1,r}}(t)}}}},function(t,e,r){var n=r(0);t.exports=function(t,e){function r(t,e){if(this.name=t,this.path=t,this.defaultEngine=e.defaultEngine,this.ext=n.extname(t),!this.ext&&!this.defaultEngine)throw Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return r.prototype.render=function(e,r){t.render(this.name,e,r)},e.set("view",r),e.set("nunjucksEnv",t),t}},function(t,e,r){t.exports=function(){var t,e,r=this.runtime,n=this.lib,o=this.compiler.Compiler,i=this.parser.Parser,a=(this.nodes,this.lexer,r.contextOrFrameLookup),u=r.memberLookup;function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}o&&(t=o.prototype.assertType),i&&(e=i.prototype.parseAggregate),r.contextOrFrameLookup=function(t,e,r){var n=a.apply(this,arguments);if(void 0!==n)return n;switch(r){case"True":return!0;case"False":return!1;case"None":return null;default:return}};var c={pop:function(t){if(void 0===t)return this.pop();if(t>=this.length||t<0)throw Error("KeyError");return this.splice(t,1)},append:function(t){return this.push(t)},remove:function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return this.splice(e,1);throw Error("ValueError")},count:function(t){for(var e=0,r=0;r<this.length;r++)this[r]===t&&e++;return e},index:function(t){var e;if(-1===(e=this.indexOf(t)))throw Error("ValueError");return e},find:function(t){return this.indexOf(t)},insert:function(t,e){return this.splice(t,0,e)}},l={items:function(){return n.r(this)},values:function(){return n.u(this)},keys:function(){return n.keys(this)},get:function(t,e){var r=this[t];return void 0===r&&(r=e),r},has_key:function(t){return s(this,t)},pop:function(t,e){var r=this[t];if(void 0===r&&void 0!==e)r=e;else{if(void 0===r)throw Error("KeyError");delete this[t]}return r},popitem:function(){var t=n.keys(this);if(!t.length)throw Error("KeyError");var e=t[0],r=this[e];return delete this[e],[e,r]},setdefault:function(t,e){return void 0===e&&(e=null),t in this||(this[t]=e),this[t]},update:function(t){return n.f(this,t),null}};return l.iteritems=l.items,l.itervalues=l.values,l.iterkeys=l.keys,r.memberLookup=function(t,e,o){return 4===arguments.length?function(t,e,n,o){t=t||[],null===e&&(e=o<0?t.length-1:0),null===n?n=o<0?-1:t.length:n<0&&(n+=t.length),e<0&&(e+=t.length);for(var i=[],a=e;!(a<0||a>t.length||o>0&&a>=n||o<0&&a<=n);a+=o)i.push(r.memberLookup(t,a));return i}.apply(this,arguments):(t=t||{},n.isArray(t)&&s(c,e)?c[e].bind(t):n.isObject(t)&&s(l,e)?l[e].bind(t):u.apply(this,arguments))},function(){r.contextOrFrameLookup=a,r.memberLookup=u,o&&(o.prototype.assertType=t),i&&(i.prototype.parseAggregate=e)}}}])})),nr=[].join,or=b!=Object,ir=Le("join",",");
/*! Browser bundle of nunjucks 3.2.3 (slim, only works with precompiled templates) */function ar(t){this.scripter=t}Ft({target:"Array",proto:!0,forced:or||!ir},{join:function(t){return nr.call(E(this),void 0===t?",":t)}}),function(){
/*
   * Library to normalize key codes across browsers.  This works with keydown
   * events; keypress events are not fired for all keys, and the codes are
   * different for them.  It returns an object with the following fields:
   * { int code, bool shift, bool alt, bool ctrl }.  The normalized keycodes
   * obey the following rules:
   *
   * For alphabetic characters, the ASCII code of the uppercase version
   *
   * For codes that are identical across all browsers (this includes all
   * modifiers, esc, delete, arrows, etc.), the common keycode
   *
   * For numeric keypad keys, the value returned by numkey().
   * (Usually 96 + the number)
   *
   * For symbols, the ASCII code of the character that appears when shift
   * is not held down, EXCEPT for '" => 222 (conflicts with right-arrow/pagedown),
   * .> => 190 (conflicts with Delete) and `~ => 126 (conflicts with Num0).
   *
   * Basic usage:
   * document.onkeydown = function(e) {
   *    do_something_with(KeyCode.translateEvent(e)
   * };
   *
   * The naming conventions for functions use 'code' to represent an integer
   * keycode, 'key' to represent a key description (specified above), and 'e'
   * to represent an event object.
   *
   * There's also functionality to track and detect which keys are currently
   * being held down: install 'key_up' and 'key_down' on their respective event
   * handlers, and then check with 'is_down'.
   *
   * @fileoverview
   * @author Jonathan Tang
   * @version 0.9
   * @license BSD
   */
var t=["ctrl","alt","shift"],e={},r={58:59,43:61,60:44,95:45,62:46,63:47,96:192,124:92,39:222,34:222,33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:58,123:91,125:93};function n(t){return t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase()}navigator.userAgent.indexOf("Gecko"),navigator.userAgent.indexOf("MSIE");var o=-1!=navigator.platform.indexOf("Win"),i=window.opera&&window.opera.version()<9.5,a=navigator.vendor&&-1!=navigator.vendor.indexOf("KDE"),u=navigator.vendor&&-1!=navigator.vendor.indexOf("iCab"),s={};if(i&&o)e=s;else if(i||a||u){var c=[33,64,35,36,37,94,38,42,40,41,58,43,60,95,62,63,124,34];e=s;for(var l=0;l<c.length;++l)e[c[l]]=r[c[l]]}else e={186:59,187:61,188:44,109:95,107:61,189:95,190:62,191:47,192:126,219:91,220:92,221:93};a&&(e[0]=45,e[127]=46,e[45]=95);var f={32:"SPACE",13:"ENTER",9:"TAB",8:"BACKSPACE",16:"SHIFT",17:"CTRL",18:"ALT",20:"CAPS_LOCK",144:"NUM_LOCK",145:"SCROLL_LOCK",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",33:"PAGE_UP",34:"PAGE_DOWN",36:"HOME",35:"END",45:"INSERT",46:"DELETE",27:"ESCAPE",19:"PAUSE",222:"'"};var p={codes:{},ctrl:!1,alt:!1,shift:!1};function h(t){p.ctrl=t.ctrl,p.alt=t.alt,p.shift=t.shift}function d(t,e){return t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift}if(void 0!==window.KeyCode)var v=window.KeyCode;var y=window.KeyCode={no_conflict:function(){return window.KeyCode=v,y},fkey:function(t){return 111+t},numkey:function(t){switch(t){case"*":return 106;case"/":return 111;case".":return 110;default:return 96+t}},key:function(t){var e,n=t.charCodeAt(0);return(e=n)>=97&&e<=122?n-32:r[n]||n},key_equals:function(t,e){return t.code==e.code&&d(t,e)},translate_key_code:function(t){return e[t]||t},translate_event:function(t){var e=(t=t||window.event).which||t.keyCode;return{code:y.translate_key_code(e),shift:t.shiftKey,alt:t.altKey,ctrl:t.ctrlKey}},key_down:function(t){var e=y.translate_event(t);p.codes[e.code]=e.code,h(e)},key_up:function(t){var e=y.translate_event(t);delete p.codes[e.code],h(e)},is_down:function(t){var e=t.code;return e==y.CTRL?p.ctrl:e==y.ALT?p.alt:e==y.SHIFT?p.shift:void 0!==p.codes[e]&&d(t,p)},hot_key:function(e){for(var r=[],o=0;o<t.length;++o){var i=t[o];e[i]&&i.toUpperCase()!=f[e.code]&&r.push(n(i))}var a=e.code,u=f[a]||function(t){return t>=112&&t<=123&&"F"+(t-111)}(a)||function(t){if(t>=96&&t<106)return"Num"+(t-96);switch(t){case 106:return"Num*";case 111:return"Num/";case 110:return"Num.";default:return!1}}(a)||String.fromCharCode(a);return r.push(n(u)),r.join("+")}};for(var g in f)y[f[g]]=g}(),ar.prototype.insert=function(t){switch(t.type){case"text/javascript":return this.scripter.injectjs(t.url,{id:t.id,async:t.async,attrs:t.attrs,location:t.location,global:t.global});case"text/css":return this.scripter.injectcss(t.url,{id:t.id,attrs:t.attrs,location:t.location});default:throw new Error("Invalid External type.")}};var ur=ar,sr=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},cr=[],lr=cr.sort,fr=l((function(){cr.sort(void 0)})),pr=l((function(){cr.sort(null)})),hr=Le("sort");Ft({target:"Array",proto:!0,forced:fr||!pr||!hr},{sort:function(t){return void 0===t?lr.call(S(this)):lr.call(S(this),sr(t))}});var dr=M.f,vr=Function.prototype,yr=vr.toString,gr=/^\s*function ([^ (]*)/;f&&!("name"in vr)&&dr(vr,"name",{configurable:!0,get:function(){try{return yr.call(this).match(gr)[1]}catch(t){return""}}});var mr=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return I(r),function(t){if(!x(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(n),e?t.call(r,n):r.__proto__=n,r}}():void 0);Ft({target:"Object",stat:!0},{setPrototypeOf:mr});var br=!l((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),wr=Z("IE_PROTO"),Er=Object.prototype,xr=br?Object.getPrototypeOf:function(t){return t=S(t),_(t,wr)?t[wr]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Er:null},Or=l((function(){xr(1)}));function Sr(t,e,r){var n=new Error(t,e,r);return n.name="RouteNotFound",Object.setPrototypeOf(n,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(n,Sr),n}Ft({target:"Object",stat:!0,forced:Or,sham:!br},{getPrototypeOf:function(t){return xr(S(t))}}),Sr.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Sr,Error):Sr.__proto__=Error;var jr=Sr,_r=a(er),Ar=jr;function Lr(){this.routes=[],this.middlewares=[]}Lr.prototype.getRouteByTag=function(t){for(var e=0;e<this.routes.length;e++)if(this.routes[e].opts.tag==t)return this.routes[e]},Lr.prototype.insert=function(t){t.isMiddleware()?this.middlewares.push(t):this.routes.push(t),this.sortByDepth()},Lr.prototype.match=function(t){for(var e=0;e<this.routes.length;e++){var r=this.routes[e].pathMatcher(t);if(r)return[this.routes[e],r]}throw new Ar("Invalid request path: "+t)},Lr.prototype.matchMiddleware=function(t){for(var e=0;e<this.middlewares.length;e++){var r=this.middlewares[e].pathMatcher(t);if(r)return[this.middlewares[e],r]}return[]},Lr.prototype.hasMatch=function(t){for(var e=0;e<this.routes.length;e++){if(this.routes[e].pathMatcher(t))return!0}return!1},Lr.prototype.sortByDepth=function(){this.routes.sort((function(t,e){return t.pathDepth>e.pathDepth?-1:t.pathDepth<e.pathDepth?1:0})),this.middlewares.sort((function(t,e){return t.pathDepth>e.pathDepth?-1:t.pathDepth<e.pathDepth?1:0}))};var kr=Lr,Tr=function(t,e,r){if(sr(t),void 0===e)return t;switch(r){case 0:return function(){return t.call(e)};case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,o){return t.call(e,r,n,o)}}return function(){return t.apply(e,arguments)}},Pr=[].push,Rr=function(t){var e=1==t,r=2==t,n=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,l,f){for(var p,h,d=S(s),v=b(d),y=Tr(c,l,3),g=dt(v.length),m=0,w=f||Fe,E=e?w(s,g):r||a?w(s,0):void 0;g>m;m++)if((u||m in v)&&(h=y(p=v[m],m,d),t))if(e)E[m]=h;else if(h)switch(t){case 3:return!0;case 5:return p;case 6:return m;case 2:Pr.call(E,p)}else switch(t){case 4:return!1;case 7:Pr.call(E,p)}return i?-1:n||o?o:E}},Ir={forEach:Rr(0),map:Rr(1),filter:Rr(2),some:Rr(3),every:Rr(4),find:Rr(5),findIndex:Rr(6),filterOut:Rr(7)},Cr=Ir.filter,Mr=De("filter");Ft({target:"Array",proto:!0,forced:!Mr},{filter:function(t){return Cr(this,t,arguments.length>1?arguments[1]:void 0)}});var Fr=Object.assign,Nr=Object.defineProperty,Dr=!Fr||l((function(){if(f&&1!==Fr({b:1},Fr(Nr({},"a",{enumerable:!0,get:function(){Nr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach((function(t){e[t]=t})),7!=Fr({},t)[r]||_e(Fr({},e)).join("")!=n}))?function(t,e){for(var r=S(t),n=arguments.length,o=1,i=jt.f,a=d.f;n>o;)for(var u,s=b(arguments[o++]),c=i?_e(s).concat(i(s)):_e(s),l=c.length,p=0;l>p;)u=c[p++],f&&!a.call(s,u)||(r[u]=s[u]);return r}:Fr;function Ur(t,e,r){var n=new Error(t,e,r);return n.name="ComponentNotFound",Object.setPrototypeOf(n,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(n,Ur),n}Ft({target:"Object",stat:!0,forced:Object.assign!==Dr},{assign:Dr}),Ur.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Ur,Error):Ur.__proto__=Error;var Br=Ur;function Kr(){this.components=[],this.defaultParamsStore={}}Kr.prototype.insert=function(t){this.components.push(t)},Kr.prototype.getComponentByName=function(t){/[^0-9]/.test(t.slice(-1))&&(t+="0");var e=this.components.filter((function(e){return e.name==t}));if(!e||e.length<1)throw new Br('View component "'+t+'" not found.');return e[0]},Kr.prototype.updateDefaultParams=function(t){this.defaultParamsStore=Object.assign({},this.defaultParamsStore,t)},Kr.prototype.getDefaultParams=function(t){return this.defaultParamsStore[t]};var Vr=Kr,$r=t.objectkit;function qr(){this.path=null}qr.prototype.set=function(t){var e=$r.getProp(t,"path"),r=this.path!=e;this.path=e,this.params=$r.getProp(t,"params"),this.component=$r.getProp(t,"component"),this.route=t.route,r&&(window.history.pushState(null,null,this.path),ze.emit("SCREEN",[{path:this.path}]))},qr.prototype.get=function(){return{path:this.path,params:this.params}};var Gr=qr,Wr=t.validationkit;function zr(t){this.element=t}zr.prototype.cleanup=function(){this.element.innerHTML=""},zr.prototype.patch=function(t){this.element.innerHTML=t},zr.prototype.findChildren=function(){var t=this.element.querySelectorAll("[data-frond-component]");return Wr.isEmpty(t)?[]:t},zr.prototype.findChildByName=function(t){var e=this.element.querySelector('[data-frond-component="'+t+'"]');if(e)return e;var r=t.slice(-1);if(0==r){var n=this.element.querySelector('[data-frond-component="'+t.slice(0,-1)+'"]');if(n)return n}if(/[^0-9]/.test(r)){var o=this.element.querySelector('[data-frond-component="'+t+'0"]');if(o)return o}return null};var Hr=zr,Xr={};Xr[ie("toStringTag")]="z";var Yr="[object z]"===String(Xr),Zr=ie("toStringTag"),Jr="Arguments"==g(function(){return arguments}()),Qr=Yr?g:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Zr))?r:Jr?g(e):"Object"==(n=g(e))&&"function"==typeof e.callee?"Arguments":n},tn=Yr?{}.toString:function(){return"[object "+Qr(this)+"]"};Yr||at(Object.prototype,"toString",tn,{unsafe:!0});var en=c.Promise,rn=M.f,nn=ie("toStringTag"),on=function(t,e,r){t&&!_(t=r?t:t.prototype,nn)&&rn(t,nn,{configurable:!0,value:e})},an=ie("species"),un=function(t){var e=ct(t),r=M.f;f&&e&&!e[an]&&r(e,an,{configurable:!0,get:function(){return this}})},sn={},cn=ie("iterator"),ln=Array.prototype,fn=ie("iterator"),pn=function(t){var e=t.return;if(void 0!==e)return I(e.call(t)).value},hn=function(t,e){this.stopped=t,this.result=e},dn=function(t,e,r){var n,o,i,a,u,s,c,l,f=r&&r.that,p=!(!r||!r.AS_ENTRIES),h=!(!r||!r.IS_ITERATOR),d=!(!r||!r.INTERRUPTED),v=Tr(e,f,1+p+d),y=function(t){return n&&pn(n),new hn(!0,t)},g=function(t){return p?(I(t),d?v(t[0],t[1],y):v(t[0],t[1])):d?v(t,y):v(t)};if(h)n=t;else{if("function"!=typeof(o=function(t){if(null!=t)return t[fn]||t["@@iterator"]||sn[Qr(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(l=o)&&(sn.Array===l||ln[cn]===l)){for(i=0,a=dt(t.length);a>i;i++)if((u=g(t[i]))&&u instanceof hn)return u;return new hn(!1)}n=o.call(t)}for(s=n.next;!(c=s.call(n)).done;){try{u=g(c.value)}catch(t){throw pn(n),t}if("object"==typeof u&&u&&u instanceof hn)return u}return new hn(!1)},vn=ie("iterator"),yn=!1;try{var gn=0,mn={next:function(){return{done:!!gn++}},return:function(){yn=!0}};mn[vn]=function(){return this},Array.from(mn,(function(){throw 2}))}catch(t){}var bn,wn,En,xn=ie("species"),On=function(t,e){var r,n=I(t).constructor;return void 0===n||null==(r=I(n)[xn])?e:sr(r)},Sn=ct("document","documentElement"),jn=/(?:iphone|ipod|ipad).*applewebkit/i.test(Xt),_n="process"==g(c.process),An=c.location,Ln=c.setImmediate,kn=c.clearImmediate,Tn=c.process,Pn=c.MessageChannel,Rn=c.Dispatch,In=0,Cn={},Mn=function(t){if(Cn.hasOwnProperty(t)){var e=Cn[t];delete Cn[t],e()}},Fn=function(t){return function(){Mn(t)}},Nn=function(t){Mn(t.data)},Dn=function(t){c.postMessage(t+"",An.protocol+"//"+An.host)};Ln&&kn||(Ln=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return Cn[++In]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},bn(In),In},kn=function(t){delete Cn[t]},_n?bn=function(t){Tn.nextTick(Fn(t))}:Rn&&Rn.now?bn=function(t){Rn.now(Fn(t))}:Pn&&!jn?(En=(wn=new Pn).port2,wn.port1.onmessage=Nn,bn=Tr(En.postMessage,En,1)):c.addEventListener&&"function"==typeof postMessage&&!c.importScripts&&An&&"file:"!==An.protocol&&!l(Dn)?(bn=Dn,c.addEventListener("message",Nn,!1)):bn="onreadystatechange"in k("script")?function(t){Sn.appendChild(k("script")).onreadystatechange=function(){Sn.removeChild(this),Mn(t)}}:function(t){setTimeout(Fn(t),0)});var Un,Bn,Kn,Vn,$n,qn,Gn,Wn,zn={set:Ln,clear:kn},Hn=/web0s(?!.*chrome)/i.test(Xt),Xn=R.f,Yn=zn.set,Zn=c.MutationObserver||c.WebKitMutationObserver,Jn=c.document,Qn=c.process,to=c.Promise,eo=Xn(c,"queueMicrotask"),ro=eo&&eo.value;ro||(Un=function(){var t,e;for(_n&&(t=Qn.domain)&&t.exit();Bn;){e=Bn.fn,Bn=Bn.next;try{e()}catch(t){throw Bn?Vn():Kn=void 0,t}}Kn=void 0,t&&t.enter()},jn||_n||Hn||!Zn||!Jn?to&&to.resolve?((Gn=to.resolve(void 0)).constructor=to,Wn=Gn.then,Vn=function(){Wn.call(Gn,Un)}):Vn=_n?function(){Qn.nextTick(Un)}:function(){Yn.call(c,Un)}:($n=!0,qn=Jn.createTextNode(""),new Zn(Un).observe(qn,{characterData:!0}),Vn=function(){qn.data=$n=!$n}));var no,oo,io,ao,uo=ro||function(t){var e={fn:t,next:void 0};Kn&&(Kn.next=e),Bn||(Bn=e,Vn()),Kn=e},so=function(t){var e,r;this.promise=new t((function(t,n){if(void 0!==e||void 0!==r)throw TypeError("Bad Promise constructor");e=t,r=n})),this.resolve=sr(e),this.reject=sr(r)},co={f:function(t){return new so(t)}},lo=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},fo="object"==typeof window,po=zn.set,ho=ie("species"),vo="Promise",yo=it.get,go=it.set,mo=it.getterFor(vo),bo=en&&en.prototype,wo=en,Eo=bo,xo=c.TypeError,Oo=c.document,So=c.process,jo=co.f,_o=jo,Ao=!!(Oo&&Oo.createEvent&&c.dispatchEvent),Lo="function"==typeof PromiseRejectionEvent,ko=!1,To=Ct(vo,(function(){var t=$(wo)!==String(wo);if(!t&&66===Qt)return!0;if(Qt>=51&&/native code/.test(wo))return!1;var e=new wo((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(e.constructor={})[ho]=r,!(ko=e.then((function(){}))instanceof r)||!t&&fo&&!Lo})),Po=To||!function(t,e){if(!e&&!yn)return!1;var r=!1;try{var n={};n[vn]=function(){return{next:function(){return{done:r=!0}}}},t(n)}catch(t){}return r}((function(t){wo.all(t).catch((function(){}))})),Ro=function(t){var e;return!(!x(t)||"function"!=typeof(e=t.then))&&e},Io=function(t,e){if(!t.notified){t.notified=!0;var r=t.reactions;uo((function(){for(var n=t.value,o=1==t.state,i=0;r.length>i;){var a,u,s,c=r[i++],l=o?c.ok:c.fail,f=c.resolve,p=c.reject,h=c.domain;try{l?(o||(2===t.rejection&&No(t),t.rejection=1),!0===l?a=n:(h&&h.enter(),a=l(n),h&&(h.exit(),s=!0)),a===c.promise?p(xo("Promise-chain cycle")):(u=Ro(a))?u.call(a,f,p):f(a)):p(n)}catch(t){h&&!s&&h.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Mo(t)}))}},Co=function(t,e,r){var n,o;Ao?((n=Oo.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),c.dispatchEvent(n)):n={promise:e,reason:r},!Lo&&(o=c["on"+t])?o(n):"unhandledrejection"===t&&function(t,e){var r=c.console;r&&r.error&&(1===arguments.length?r.error(t):r.error(t,e))}("Unhandled promise rejection",r)},Mo=function(t){po.call(c,(function(){var e,r=t.facade,n=t.value;if(Fo(t)&&(e=lo((function(){_n?So.emit("unhandledRejection",n,r):Co("unhandledrejection",r,n)})),t.rejection=_n||Fo(t)?2:1,e.error))throw e.value}))},Fo=function(t){return 1!==t.rejection&&!t.parent},No=function(t){po.call(c,(function(){var e=t.facade;_n?So.emit("rejectionHandled",e):Co("rejectionhandled",e,t.value)}))},Do=function(t,e,r){return function(n){t(e,n,r)}},Uo=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,Io(t,!0))},Bo=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw xo("Promise can't be resolved itself");var n=Ro(e);n?uo((function(){var r={done:!1};try{n.call(e,Do(Bo,r,t),Do(Uo,r,t))}catch(e){Uo(r,e,t)}})):(t.value=e,t.state=1,Io(t,!1))}catch(e){Uo({done:!1},e,t)}}};if(To&&(Eo=(wo=function(t){!function(t,e,r){if(!(t instanceof e))throw TypeError("Incorrect "+(r?r+" ":"")+"invocation")}(this,wo,vo),sr(t),no.call(this);var e=yo(this);try{t(Do(Bo,e),Do(Uo,e))}catch(t){Uo(e,t)}}).prototype,(no=function(t){go(this,{type:vo,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,r){for(var n in e)at(t,n,e[n],r);return t}(Eo,{then:function(t,e){var r=mo(this),n=jo(On(this,wo));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=_n?So.domain:void 0,r.parent=!0,r.reactions.push(n),0!=r.state&&Io(r,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),oo=function(){var t=new no,e=yo(t);this.promise=t,this.resolve=Do(Bo,e),this.reject=Do(Uo,e)},co.f=jo=function(t){return t===wo||t===io?new oo(t):_o(t)},"function"==typeof en&&bo!==Object.prototype)){ao=bo.then,ko||(at(bo,"then",(function(t,e){var r=this;return new wo((function(t,e){ao.call(r,t,e)})).then(t,e)}),{unsafe:!0}),at(bo,"catch",Eo.catch,{unsafe:!0}));try{delete bo.constructor}catch(t){}mr&&mr(bo,Eo)}Ft({global:!0,wrap:!0,forced:To},{Promise:wo}),on(wo,vo,!1),un(vo),io=ct(vo),Ft({target:vo,stat:!0,forced:To},{reject:function(t){var e=jo(this);return e.reject.call(void 0,t),e.promise}}),Ft({target:vo,stat:!0,forced:To},{resolve:function(t){return function(t,e){if(I(t),x(e)&&e.constructor===t)return e;var r=co.f(t);return(0,r.resolve)(e),r.promise}(this,t)}}),Ft({target:vo,stat:!0,forced:Po},{all:function(t){var e=this,r=jo(e),n=r.resolve,o=r.reject,i=lo((function(){var r=sr(e.resolve),i=[],a=0,u=1;dn(t,(function(t){var s=a++,c=!1;i.push(void 0),u++,r.call(e,t).then((function(t){c||(c=!0,i[s]=t,--u||n(i))}),o)})),--u||n(i)}));return i.error&&o(i.value),r.promise},race:function(t){var e=this,r=jo(e),n=r.reject,o=lo((function(){var o=sr(e.resolve);dn(t,(function(t){o.call(e,t).then(r.resolve,n)}))}));return o.error&&n(o.value),r.promise}});var Ko=ie("match"),Vo=function(t){var e;return x(t)&&(void 0!==(e=t[Ko])?!!e:"RegExp"==g(t))},$o=Ut.UNSUPPORTED_Y,qo=[].push,Go=Math.min;function Wo(){this.assets=Object.assign({},window.frondjs.assetManifest||{})}he("split",2,(function(t,e,r){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,r){var n=String(w(this)),o=void 0===r?4294967295:r>>>0;if(0===o)return[];if(void 0===t)return[n];if(!Vo(t))return e.call(n,t,o);for(var i,a,u,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,c+"g");(i=Wt.call(f,n))&&!((a=f.lastIndex)>l&&(s.push(n.slice(l,i.index)),i.length>1&&i.index<n.length&&qo.apply(s,i.slice(1)),u=i[0].length,l=a,s.length>=o));)f.lastIndex===i.index&&f.lastIndex++;return l===n.length?!u&&f.test("")||s.push(""):s.push(n.slice(l)),s.length>o?s.slice(0,o):s}:"0".split(void 0,0).length?function(t,r){return void 0===t&&0===r?[]:e.call(this,t,r)}:e,[function(e,r){var o=w(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,r):n.call(String(o),e,r)},function(t,o){var i=r(n,t,this,o,n!==e);if(i.done)return i.value;var a=I(t),u=String(this),s=On(a,RegExp),c=a.unicode,l=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+($o?"g":"y"),f=new s($o?"^(?:"+a.source+")":a,l),p=void 0===o?4294967295:o>>>0;if(0===p)return[];if(0===u.length)return null===me(f,u)?[u]:[];for(var h=0,d=0,v=[];d<u.length;){f.lastIndex=$o?0:d;var y,g=me(f,$o?u.slice(d):u);if(null===g||(y=Go(dt(f.lastIndex+($o?d:0)),u.length))===h)d=ge(u,d,c);else{if(v.push(u.slice(h,d)),v.length===p)return v;for(var m=1;m<=g.length-1;m++)if(v.push(g[m]),v.length===p)return v;d=h=y}}return v.push(u.slice(h)),v}]}),$o),Wo.prototype.has=function(t){return this.assets.hasOwnProperty(t)},Wo.prototype.get=function(t){if(!this.assets.hasOwnProperty(t))throw new Error("No such asset.");return this.assets[t]},Wo.prototype.asObject=function(){return this.assets};var zo=new Wo,Ho=M.f,Xo=St.f,Yo=it.enforce,Zo=ie("match"),Jo=c.RegExp,Qo=Jo.prototype,ti=/a/g,ei=/a/g,ri=new Jo(ti)!==ti,ni=Ut.UNSUPPORTED_Y;if(f&&Ct("RegExp",!ri||ni||l((function(){return ei[Zo]=!1,Jo(ti)!=ti||Jo(ei)==ei||"/a/i"!=Jo(ti,"i")})))){for(var oi=function(t,e){var r,n=this instanceof oi,o=Vo(t),i=void 0===e;if(!n&&o&&t.constructor===oi&&i)return t;ri?o&&!i&&(t=t.source):t instanceof oi&&(i&&(e=Nt.call(t)),t=t.source),ni&&(r=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a,u,s,c,l,f=(a=ri?new Jo(t,e):Jo(t,e),u=n?this:Qo,s=oi,mr&&"function"==typeof(c=u.constructor)&&c!==s&&x(l=c.prototype)&&l!==s.prototype&&mr(a,l),a);ni&&r&&(Yo(f).sticky=!0);return f},ii=function(t){t in oi||Ho(oi,t,{configurable:!0,get:function(){return Jo[t]},set:function(e){Jo[t]=e}})},ai=Xo(Jo),ui=0;ai.length>ui;)ii(ai[ui++]);Qo.constructor=oi,oi.prototype=Qo,at(c,"RegExp",oi)}un("RegExp");var si=RegExp.prototype,ci=si.toString,li=l((function(){return"/a/b"!=ci.call({source:"a",flags:"b"})})),fi="toString"!=ci.name;(li||fi)&&at(RegExp.prototype,"toString",(function(){var t=I(this),e=String(t.source),r=t.flags;return"/"+e+"/"+String(void 0===r&&t instanceof RegExp&&!("flags"in si)?Nt.call(t):r)}),{unsafe:!0});var pi="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",hi="["+pi+"]",di=RegExp("^"+hi+hi+"*"),vi=RegExp(hi+hi+"*$"),yi=function(t){return function(e){var r=String(w(e));return 1&t&&(r=r.replace(di,"")),2&t&&(r=r.replace(vi,"")),r}},gi={start:yi(1),end:yi(2),trim:yi(3)},mi=gi.trim,bi=c.parseInt,wi=/^[+-]?0[Xx]/,Ei=8!==bi(pi+"08")||22!==bi(pi+"0x16")?function(t,e){var r=mi(String(t));return bi(r,e>>>0||(wi.test(r)?16:10))}:bi;Ft({global:!0,forced:parseInt!=Ei},{parseInt:Ei});var xi=function t(e){this.domain="messages",this.locale_data=void 0;var r=["domain","locale_data"];if(this.isValidObject(e))for(var n in e)for(var o=0;o<r.length;o++)n==r[o]&&this.isValidObject(e[n])&&(this[n]=e[n]);var i=this.locale_data;if(this.locale_data=void 0,this.parse_locale_data(i),void 0===t._locale_data[this.domain])throw new Error("Error: Gettext 'locale_data' does not contain the domain '"+this.domain+"'");return this};xi.context_glue="\\004",xi._locale_data={},xi.prototype.parse_locale_data=function(t){for(var e in void 0===xi._locale_data&&(xi._locale_data={}),t)if(t.hasOwnProperty(e)&&this.isValidObject(t[e])){var r=!1;for(var n in t[e]){r=!0;break}if(r){var o=t[e];for(var i in""==e&&(e="messages"),this.isValidObject(xi._locale_data[e])||(xi._locale_data[e]={}),this.isValidObject(xi._locale_data[e].head)||(xi._locale_data[e].head={}),this.isValidObject(xi._locale_data[e].msgs)||(xi._locale_data[e].msgs={}),o)if(""==i){var a=o[i];for(var u in a){var s=u.toLowerCase();xi._locale_data[e].head[s]=a[u]}}else xi._locale_data[e].msgs[i]=o[i]}}for(var e in xi._locale_data)if(this.isValidObject(xi._locale_data[e].head["plural-forms"])&&void 0===xi._locale_data[e].head.plural_func){var c=xi._locale_data[e].head["plural-forms"];if(!new RegExp("^(\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;a-zA-Z0-9_()])+)","m").test(c))throw new Error("Syntax error in language file. Plural-Forms header is invalid ["+c+"]");var l=xi._locale_data[e].head["plural-forms"];/;\s*$/.test(l)||(l=l.concat(";"));var f="var plural; var nplurals; "+l+' return { "nplural" : nplurals, "plural" : (plural === true ? 1 : plural ? plural : 0) };';xi._locale_data[e].head.plural_func=new Function("n",f)}else void 0===xi._locale_data[e].head.plural_func&&(xi._locale_data[e].head.plural_func=function(t){return{nplural:2,plural:1!=t?1:0}})},xi.prototype.textdomain=function(t){return t&&t.length&&(this.domain=t),this.domain},xi.prototype.gettext=function(t){return this.dcnpgettext(null,undefined,t,undefined,undefined,undefined)},xi.prototype.dgettext=function(t,e){return this.dcnpgettext(t,undefined,e,undefined,undefined,undefined)},xi.prototype.dcgettext=function(t,e,r){return this.dcnpgettext(t,undefined,e,undefined,undefined,r)},xi.prototype.ngettext=function(t,e,r){return this.dcnpgettext(null,undefined,t,e,r,undefined)},xi.prototype.dngettext=function(t,e,r,n){return this.dcnpgettext(t,undefined,e,r,n,undefined)},xi.prototype.dcngettext=function(t,e,r,n,o){return this.dcnpgettext(t,undefined,e,r,n,o,o)},xi.prototype.pgettext=function(t,e){return this.dcnpgettext(null,t,e,undefined,undefined,undefined)},xi.prototype.dpgettext=function(t,e,r){return this.dcnpgettext(t,e,r,undefined,undefined,undefined)},xi.prototype.dcpgettext=function(t,e,r,n){return this.dcnpgettext(t,e,r,undefined,undefined,n)},xi.prototype.npgettext=function(t,e,r,n){return this.dcnpgettext(null,t,e,r,n,undefined)},xi.prototype.dnpgettext=function(t,e,r,n,o){return this.dcnpgettext(t,e,r,n,o,undefined)},xi.prototype.dcnpgettext=function(t,e,r,n,o,i){if(!this.isValidObject(r))return"";var a=this.isValidObject(n),u=this.isValidObject(e)?e+xi.context_glue+r:r,s=this.isValidObject(t)?t:this.isValidObject(this.domain)?this.domain:"messages",c=new Array;if(void 0!==xi._locale_data&&this.isValidObject(xi._locale_data[s]))c.push(xi._locale_data[s]);else if(void 0!==xi._locale_data)for(var l in xi._locale_data)c.push(xi._locale_data[l]);var f,p=[],h=!1;if(c.length)for(var d=0;d<c.length;d++){var v=c[d];if(this.isValidObject(v.msgs[u])){for(var y=0;y<v.msgs[u].length;y++)p[y]=v.msgs[u][y];if(p.shift(),f=v,h=!0,p.length>0&&0!=p[0].length)break}}0!=p.length&&0!=p[0].length||(p=[r,n]);var g=p[0];if(a){var m;if(h&&this.isValidObject(f.head.plural_func)){var b=f.head.plural_func(o);b.plural||(b.plural=0),b.nplural||(b.nplural=0),b.nplural<=b.plural&&(b.plural=0),m=b.plural}else m=1!=o?1:0;this.isValidObject(p[m])&&(g=p[m])}return g},xi.strargs=function(t,e){null==e||void 0===e?e=[]:e.constructor!=Array&&(e=[e]);for(var r="";;){var n,o=t.indexOf("%");if(-1==o){r+=t;break}if(r+=t.substr(0,o),"%%"==t.substr(o,2))r+="%",t=t.substr(o+2);else if(n=t.substr(o).match(/^%(\d+)/)){var i=parseInt(n[1]),a=n[1].length;i>0&&null!=e[i-1]&&void 0!==e[i-1]&&(r+=e[i-1]),t=t.substr(o+1+a)}else r+="%",t=t.substr(o+1)}return r},xi.prototype.strargs=function(t,e){return xi.strargs(t,e)},xi.prototype.isArray=function(t){return this.isValidObject(t)&&t.constructor==Array},xi.prototype.isValidObject=function(t){return null!=t&&void 0!==t};var Oi=xi,Si=t.validationkit,ji=t.typekit;function _i(){this.gettext=null,this.appLocale=null,this.opts={},this.multilingual=!1,window._=function(t){return t}}_i.prototype.defaultOptions={localStorageKeyName:"frond_locale",carryAppLocaleIn:"ADDRESS_BAR",host:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},_i.prototype.reMatchLocaleInPath=/^(\/[a-zA-Z]{2}(-[a-zA-Z]{2})?)\/?(?![a-zA-Z0-9]+)/,_i.prototype.isMultilingual=function(){return!0===this.multilingual},_i.prototype.getAppLocale=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0===t?this.slugifyLocale(this.appLocale):this.appLocale},_i.prototype.isLocaleCarriedOnAddressBar=function(){return"ADDRESS_BAR"==this.opts.carryAppLocaleIn},_i.prototype.isNotDefaultLocale=function(){return!!this.isMultilingual()&&this.getAppLocale()!=this.opts.defaultLocale},_i.prototype.configure=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,r=window.frondjs.supportedLocales;return new Promise((function(n,o){return Si.isEmpty(r)?o(new Error("You set i18n but there is no translation found. Did you forget to translate the files inside translations folder?")):Si.isEmpty(t.defaultLocale)?o(new Error("You should set defaultLocale.")):(r&&r.length>1&&(e.multilingual=!0),e.opts=Object.assign({},e.defaultOptions,t),e.appLocale=e.detectAppLocale(r),void e.loadTranslation().then((function(t){return ji.isObject(t)?(e.gettext=new Oi({domain:"messages",locale_data:{messages:t}}),window._=function(t){return e.gettext.gettext(t)},n()):n()})))}))},_i.prototype.changeAppLocale=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{reload:!0},r=this;return new Promise((function(n,o){var i=window.frondjs.supportedLocales,a=r.formatLocale(t);if(-1===i.indexOf(a))throw new Error("Unsupported locale.");if(r.appLocale==a)return n();if("ADDRESS_BAR"==r.opts.carryAppLocaleIn)window.location.href=r.opts.host+"/"+(r.opts.defaultLocale==a?"":r.slugifyLocale(a));else{if("LOCAL_STORAGE"!=r.opts.carryAppLocaleIn)throw new Error("The carryAppLocaleIn option seems invalid.");localStorage.setItem(r.opts.localStorageKeyName,a),!0===e.reload?window.location.reload():(r.appLocale=a,r.loadTranslation().then((function(t){return ji.isObject(t)?(r.gettext=new Oi({domain:"messages",locale_data:{messages:t}}),window._=function(t){return r.gettext.gettext(t)},n()):n()})))}}))},_i.prototype.detectAppLocale=function(t){var e=null;if("ADDRESS_BAR"==this.opts.carryAppLocaleIn){var r=window.location.pathname;if(!this.reMatchLocaleInPath.test(r))return this.opts.defaultLocale;e=r.match(this.reMatchLocaleInPath)[0].replace(/\/+/g,"")}else{if("LOCAL_STORAGE"!=this.opts.carryAppLocaleIn)throw new Error("The carryAppLocaleIn option seems invalid.");e=localStorage.getItem(this.opts.localStorageKeyName)}return e?(e=this.formatLocale(e),-1!==t.indexOf(e)?e:this.opts.defaultLocale):this.opts.defaultLocale},_i.prototype.loadTranslation=function(){var t=null;try{t=zo.get("translations/"+this.appLocale+".json")}catch(t){return Promise.resolve(null)}return fetch(this.opts.host+"/"+t).then((function(t){return t.json()}))},_i.prototype.slugifyLocale=function(t){return t.toLowerCase().replace("_","-")},_i.prototype.formatLocale=function(t){var e=t.split(/[_-]/);return e[0]+"_"+e[1].toUpperCase()};var Ai=new _i;function Li(t){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ki(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ti(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Pi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ri(){this.internalsPrefix="FROND_",this.state=o.create({})}Ri.prototype.set=function(t,e){this.state.updateState(ki({},t,e))},Ri.prototype.setInternal=function(t,e){return this.set(this.internalsPrefix+t,e)},Ri.prototype.get=function(t){var e=this.state.getState();return e.hasOwnProperty(t)?e[t]:void 0},Ri.prototype.getInternal=function(t){return this.get(this.internalsPrefix+t)},Ri.prototype.asObject=function(){return this.state.getState()};var Ii=new Ri,Ci=t.objectkit;function Mi(){this.store={}}Mi.prototype.set=function(t,e){return this.store[t]=e,this},Mi.prototype.get=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Ci.getProp(this.store,t,e)};var Fi=new Mi,Ni=Ir.map,Di=De("map");Ft({target:"Array",proto:!0,forced:!Di},{map:function(t){return Ni(this,t,arguments.length>1?arguments[1]:void 0)}});var Ui,Bi=f?Object.defineProperties:function(t,e){I(t);for(var r,n=_e(e),o=n.length,i=0;o>i;)M.f(t,r=n[i++],e[r]);return t},Ki=Z("IE_PROTO"),Vi=function(){},$i=function(t){return"<script>"+t+"<\/script>"},qi=function(){try{Ui=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;qi=Ui?function(t){t.write($i("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ui):((e=k("iframe")).style.display="none",Sn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write($i("document.F=Object")),t.close(),t.F);for(var r=xt.length;r--;)delete qi.prototype[xt[r]];return qi()};J[Ki]=!0;var Gi=Object.create||function(t,e){var r;return null!==t?(Vi.prototype=I(t),r=new Vi,Vi.prototype=null,r[Ki]=t):r=qi(),void 0===e?r:Bi(r,e)},Wi=ie("unscopables"),zi=Array.prototype;null==zi[Wi]&&M.f(zi,Wi,{configurable:!0,value:Gi(null)});var Hi,Xi,Yi,Zi=function(t){zi[Wi][t]=!0},Ji=ie("iterator"),Qi=!1;[].keys&&("next"in(Yi=[].keys())?(Xi=xr(xr(Yi)))!==Object.prototype&&(Hi=Xi):Qi=!0),(null==Hi||l((function(){var t={};return Hi[Ji].call(t)!==t})))&&(Hi={}),_(Hi,Ji)||F(Hi,Ji,(function(){return this}));var ta={IteratorPrototype:Hi,BUGGY_SAFARI_ITERATORS:Qi},ea=ta.IteratorPrototype,ra=function(){return this},na=ta.IteratorPrototype,oa=ta.BUGGY_SAFARI_ITERATORS,ia=ie("iterator"),aa=function(){return this},ua=function(t,e,r,n,o,i,a){!function(t,e,r){var n=e+" Iterator";t.prototype=Gi(ea,{next:v(1,r)}),on(t,n,!1),sn[n]=ra}(r,e,n);var u,s,c,l=function(t){if(t===o&&y)return y;if(!oa&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new r(this,t)}}return function(){return new r(this)}},f=e+" Iterator",p=!1,h=t.prototype,d=h[ia]||h["@@iterator"]||o&&h[o],y=!oa&&d||l(o),g="Array"==e&&h.entries||d;if(g&&(u=xr(g.call(new t)),na!==Object.prototype&&u.next&&(xr(u)!==na&&(mr?mr(u,na):"function"!=typeof u[ia]&&F(u,ia,aa)),on(u,f,!0))),"values"==o&&d&&"values"!==d.name&&(p=!0,y=function(){return d.call(this)}),h[ia]!==y&&F(h,ia,y),sn[e]=y,o)if(s={values:l("values"),keys:i?y:l("keys"),entries:l("entries")},a)for(c in s)(oa||p||!(c in h))&&at(h,c,s[c]);else Ft({target:e,proto:!0,forced:oa||p},s);return s},sa=it.set,ca=it.getterFor("Array Iterator"),la=ua(Array,"Array",(function(t,e){sa(this,{type:"Array Iterator",target:E(t),index:0,kind:e})}),(function(){var t=ca(this),e=t.target,r=t.kind,n=t.index++;return!e||n>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==r?{value:n,done:!1}:"values"==r?{value:e[n],done:!1}:{value:[n,e[n]],done:!1}}),"values");sn.Arguments=sn.Array,Zi("keys"),Zi("values"),Zi("entries");var fa=ve.charAt,pa=it.set,ha=it.getterFor("String Iterator");ua(String,"String",(function(t){pa(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=ha(this),r=e.string,n=e.index;return n>=r.length?{value:void 0,done:!0}:(t=fa(r,n),e.index+=t.length,{value:t,done:!1})}));var da={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},va=ie("iterator"),ya=ie("toStringTag"),ga=la.values;for(var ma in da){var ba=c[ma],wa=ba&&ba.prototype;if(wa){if(wa[va]!==ga)try{F(wa,va,ga)}catch(t){wa[va]=ga}if(wa[ya]||F(wa,ya,ma),da[ma])for(var Ea in la)if(wa[Ea]!==la[Ea])try{F(wa,Ea,la[Ea])}catch(t){wa[Ea]=la[Ea]}}}var xa=function(t,e,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.id=t,this.url=e,this.type=r,this.async=n,this.location=o,this.attrs=i,this.global=a},Oa=t.typekit,Sa=function(t,e){var r=t.externalsRepository;if(!Oa.isArray(e))throw new Error("Invalid type.");var n=e.map((function(t){return new xa(t.id,t.url,t.type,t.async||!0,t.location||"bodyEnd",t.attrs||{},t.global||null)})).map((function(t){return r.insert(t)}));return Promise.all(n)};function ja(t,e,r){this.pathExpression=t,this.pathMatcher=_r.match(this.pathExpression,{decode:decodeURIComponent}),this.pathDepth=_r.pathToRegexp(t).length,this.opts=e,this.componentname=r}ja.prototype.isMiddleware=function(){return!0===this.opts.middleware};var _a=ja,Aa=gi.trim;Ft({target:"String",proto:!0,forced:function(t){return l((function(){return!!pi[t]()||"âÂá "!="âÂá "[t]()||pi[t].name!==t}))}("trim")},{trim:function(){return Aa(this)}});var La=t.typekit;t.objectkit;var ka=t.functionkit;function Ta(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;this.name=t,this.prevState=null,this.state=n,this.initialEvents=o,this.services=i,this.template=e,this.eventEmitter=r.create(),this.ready=!1,this.refs={},this.rehydrate=a,this.initState(u),this.registerEvents()}Ta.prototype.origin=window.location.origin,Ta.prototype.initState=function(t){if(La.isObject(this.state))this._hasState=!0,!1===this.rehydrate&&(this.state._rehydrate_toggle=!0),this.state=o.create(Object.assign({},this.state,t||{}));else if(La.isFunction(this.state)){this._hasState=!0;var e=this.state.apply(this);!1===this.rehydrate&&(e._rehydrate_toggle=!0),this.state=o.create(Object.assign({},e,t||{}))}else this._hasState=!1,this.state=void 0},Ta.prototype.getState=function(){return this.state?this.state.getState():{}},Ta.prototype.getPrevState=function(){return this.prevState},Ta.prototype.updateState=function(t){this.prevState=this.getState(),this.state.updateState(t)},Ta.prototype.hasState=function(){return this._hasState},Ta.prototype.registerEvents=function(){var t=this;La.isObject(this.initialEvents)?(this.hasEvents=!0,Object.keys(this.initialEvents).map((function(e){return t.eventEmitter.on(e,t.initialEvents[e])}))):this.hasEvents=!1},Ta.prototype.on=function(t,e){this.eventEmitter.on(t,e)},Ta.prototype.emit=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!("update"==t&&!1===this.ready||"ready"==t&&!0===this.ready))return"ready"==t&&(this.ready=!0),this.eventEmitter.emit.apply(this,[t,e])},Ta.prototype.next=function(){this.eventEmitter.emit("_next")},Ta.prototype.restoreInputValues=function(t){var e=window.history.state;e&&Object.keys(e).map((function(r){var n='input[name="'.concat(r,'"], select[name="').concat(r,'"], textarea[name="').concat(r,'"]'),o=t.querySelector(n);o&&(o.value=e[r])}))},Ta.prototype.rememberInputs=function(t){var e=t.querySelectorAll("input,select,textarea");if(e)for(var r=["file","button","checkbox","hidden","image","password","radio","reset","submit"],n=function(){var t=e[o],n=t.tagName.toLowerCase();if(!t.getAttribute("name"))return"continue";if(1==t.dataset.frondUncontrolled)return"continue";var i=t.getAttribute("type");if("input"==n&&-1!==r.indexOf(i))return"continue";var a=t.getAttribute("name");t.addEventListener("change",(function(t){var e=Object.assign({},window.history.state||{},ki({},a,t.target.value));window.history.replaceState(e,null)}))},o=0;o<e.length;o++)n()},Ta.prototype.findReferences=function(t){for(var e=t.querySelectorAll("[data-frond-ref]"),r=0;r<e.length;r++){var n=e[r].dataset.frondRef;if(-1!==n.indexOf("[]")){var o=n.replace("[]","");La.isArray(this.refs[o])?this.refs[o].push(e[r]):this.refs[o]=[e[r]]}else this.refs[n]=e[r]}},Ta.prototype.findNativeLinks=function(t,e,r){for(var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=t.querySelectorAll("a[href]"),a=function(){var t=i[u],a=t.getAttribute("href");if(!a||"#"==a.slice(0,1))return"continue";var s="/"==a.slice(0,1),c=-1!==a.indexOf(n.origin);if(!s&&!c)return"continue";var l=o+(c?a.slice(n.origin.length):a);t.setAttribute("href",l),e.hasMatch(l)&&t.addEventListener("click",(function(t){return r(t,l)}))},u=0;u<i.length;u++)a()},Ta.prototype.registerServices=function(t){for(var e=t.querySelectorAll("[data-frond-service]"),r=0;r<e.length;r++)for(var n=e[r],o=n.dataset.frondService.trim().split(" "),i=0;i<o.length;i++){var a=Ti(o[i].split(":"),2),u=a[0],s=a[1];this.registerService(n,u,s)}},Ta.prototype.registerService=function(t,e,r){var n=this;switch(e){case"enter":t.addEventListener("keydown",(function(t){if("Enter"==window.KeyCode.hot_key(window.KeyCode.translate_event(t)))return n.services[r].apply(n,[t])}));break;case"keydown":t.addEventListener("keydown",(function(t){var e=window.KeyCode.hot_key(window.KeyCode.translate_event(t));return n.services[r].apply(n,[t,e])}));break;case"keyup":t.addEventListener("keyup",(function(t){var e=window.KeyCode.hot_key(window.KeyCode.translate_event(t));return n.services[r].apply(n,[t,e])}));break;case"hover":t.addEventListener("mouseover",ka.debounce((function(t){return n.services[r].apply(n,[t,!0])}),200,{trailing:!0})),t.addEventListener("mouseleave",ka.debounce((function(t){return n.services[r].apply(n,[t,!1])}),200,{trailing:!0}));break;case"change":"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName||t.addEventListener("input",ka.debounce((function(t){return n.services[r].apply(n,[t])}),200,{trailing:!0})),"SELECT"==t.tagName&&t.addEventListener("change",(function(t){return n.services[r].apply(n,[t])}));break;default:t.addEventListener(e,(function(t){return n.services[r].apply(n,[t])}))}},Ta.prototype.call=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.services;if("function"!=typeof r[t])throw new Error("No service found with the name "+t);return r[t].apply(this,e)};var Pa=Ta;t.validationkit;var Ra=t.objectkit,Ia=function t(e,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=null;try{a=e.componentRepository.getComponentByName(r)}catch(t){throw t.name,t}var u=e.config.getInternal("rehydrate");if(u)i.initialRender&&e.config.setInternal("rehydrate",!1);else{var s=Object.assign({},{frond:e.config.asObject(),assets:zo.asObject(),params:Ra.getProp(i,"params",{})},a.getState()),c=e.nunjucks.render(a.template.name,s);n.patch(c)}a.restoreInputValues(n.element),a.rememberInputs(n.element),a.findReferences(n.element),a.findNativeLinks(n.element,e.routeRepository,e.onNativeLinkClick,e.config.getInternal("ROUTES_PREFIX")||""),a.registerServices(n.element);for(var l=n.findChildren(),f=0;f<l.length;f++){var p=l[f].dataset.frondComponent;t(e,p,new Hr(l[f]),[],{})}o.length>0&&a.eventEmitter.once("_next",(function(){e.requestRepository.set({path:o[1].path,params:o[1].params,component:o[0].componentname}),t(e,o[0].componentname,n)})),a.emit("update",[a.getPrevState(),a.getState()]),a.emit("ready"),a.emit("render")},Ca=function(t,e){if("string"==typeof e)return t.componentRepository.getComponentByName(e);var r=e();if(!r.name)throw new Error("Component should have a name.");r.template.childComponentParams&&t.componentRepository.updateDefaultParams(r.template.childComponentParams);for(var n=r.instances||1,o=function(){var e=r.name+i,o=new Pa(e,r.template,r.state||void 0,r.on||void 0,r.services||void 0,!r.hasOwnProperty("rehydrate")||r.rehydrate,t.componentRepository.getDefaultParams(e));if(o.hasState&&(!1===o.rehydrate&&o.on("ready",(function(){!1===t.config.getInternal("rehydrate")&&o.updateState({_rehydrate_toggle:!o.getState()._rehydrate_toggle})})),o.state.subscribe((function(e,r){var n=t.rootWrapperDOMElement.findChildByName(o.name),i=n?new Hr(n):t.rootWrapperDOMElement;Ia(t,o.name,i)}))),t.componentRepository.insert(o),1==n)return{v:o}},i=0;i<n;i++){var a=o();if("object"===Li(a))return a.v}};t.typekit;var Ma=function(t,e,r,n){var o=Ca(t,n),i=(t.config.getInternal("ROUTES_PREFIX")||"")+e;"/"==i.slice(-1)&&i.length>1&&(i=i.slice(0,-1));var a=new _a(i,r,o.name);return t.routeRepository.insert(a),a},Fa=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.config.getInternal("ROUTES_PREFIX")||"";o&&0!==r.indexOf(o)&&(r=o+r),r.length>1&&"/"==r.slice(-1)&&(r=r.slice(0,-1));var i=e.routeRepository.matchMiddleware(r),a=null;try{a=e.routeRepository.match(r)}catch(n){if("RouteNotFound"==n.name){var u=e.routeRepository.getRouteByTag("notFound").pathExpression;if(r!=u)return t(e,u)}throw n}if(window.scrollTo(0,0),i.length>0){window.history.pushState(null,null,e.requestRepository.path);var s=Ti(i,2),c=s[0];return s[1],void Ia(e,c.componentname,e.rootWrapperDOMElement,a)}e.requestRepository.set({path:a[1].path,params:a[1].params,component:a[0].componentname,route:a[0]}),Ia(e,a[0].componentname,e.rootWrapperDOMElement,[],n)},Na=t.typekit;_r.match;var Da=function(){var t=Sa,r=Ma,i=Ca,a=Fa,u=n.create(),s=new ur(u),c=new kr,l=new Vr,f=new Gr,p={externalsRepository:s,routeRepository:c,componentRepository:l,requestRepository:f,nunjucks:null,config:Ii};function h(t){a(p,t)}return p.onNativeLinkClick=function(t,e){return t.preventDefault(),h(e)},window.onpopstate=function(t){return h(document.location.pathname)},{config:p.config,state:o.create({}),request:f,eventEmitter:ze,i18n:Ai,init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.rootWrapperDOMElement=new Hr(t);var r=new rr.Environment;r.addGlobal("_",(function(t){return window._(t)})),p.nunjucks=r,e.autoAddLocalePrefixToRoutes=!e.hasOwnProperty("autoAddLocalePrefixToRoutes")||e.autoAddLocalePrefixToRoutes,Ai.isNotDefaultLocale()&&Ai.isLocaleCarriedOnAddressBar()&&e.autoAddLocalePrefixToRoutes&&(e.ROUTES_PREFIX="/"+Ai.getAppLocale(!0)),e.rehydrate=e.hasOwnProperty("rehydrate")?e.rehydrate:"rehydrate"in t.dataset?1==t.dataset.rehydrate:t.innerHTML.length>0;var n=["ROUTES_PREFIX","rehydrate"];e.ROUTES_PREFIX&&(e.ROUTES_PREFIX=("/"+e.ROUTES_PREFIX).replace(/\/\//,"/"));for(var o=Object.keys(e),i=0;i<o.length;i++){var a=o[i];-1!==n.indexOf(a)&&p.config.setInternal(a,e[a])}},externals:{inject:function(e){return t(p,e)}},meta:e,scripter:u,route:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=void 0===n?{}:e,i=void 0===n?e:n;if(!Na.isObject(o))throw new Error("Invalid route options.");if(!Na.isFunction(i))throw new Error("Invalid route component.");return r(p,t,o,i)},component:function(){return i.apply(void 0,[p].concat(Array.prototype.slice.call(arguments)))},middleware:function(t,e,n){var o=void 0===n?{}:e,i=void 0===n?e:n;if(!Na.isObject(o))throw new Error("Invalid route options.");if(!Na.isFunction(i))throw new Error("Invalid route component.");return o.middleware=!0,r(p,t,o,i)},render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a(p,t.path,{initialRender:!0})},goto:h,asset:zo,memoryStore:Fi,getRouteByTag:function(){return c.getRouteByTag()},getCurrentRoute:function(){return f.get()}}}();export default Da;
