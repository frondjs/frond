define(["basekits","metapatcher","event-emitter-object","dom-scripter","state-manager-object"],(function(t,e,n,r,o){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=i(t),u=i(e),s=i(n),c=i(r),f=i(o),l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function p(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})})),e}function h(t){var e={exports:{}};return t(e,e.exports),e.exports}var d=function(t){return t&&t.Math==Math&&t},v=d("object"==typeof globalThis&&globalThis)||d("object"==typeof window&&window)||d("object"==typeof self&&self)||d("object"==typeof l&&l)||function(){return this}()||Function("return this")(),y=function(t){try{return!!t()}catch(t){return!0}},g=!y((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),m={}.propertyIsEnumerable,b=Object.getOwnPropertyDescriptor,w={f:b&&!m.call({1:2},1)?function(t){var e=b(this,t);return!!e&&e.enumerable}:m},E=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},x={}.toString,O=function(t){return x.call(t).slice(8,-1)},S="".split,j=y((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==O(t)?S.call(t,""):Object(t)}:Object,_=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},A=function(t){return j(_(t))},k=function(t){return"object"==typeof t?null!==t:"function"==typeof t},L=function(t,e){if(!k(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!k(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!k(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!k(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},T={}.hasOwnProperty,R=function(t,e){return T.call(t,e)},P=v.document,I=k(P)&&k(P.createElement),C=function(t){return I?P.createElement(t):{}},M=!g&&!y((function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a})),F=Object.getOwnPropertyDescriptor,N={f:g?F:function(t,e){if(t=A(t),e=L(e,!0),M)try{return F(t,e)}catch(t){}if(R(t,e))return E(!w.f.call(t,e),t[e])}},D=function(t){if(!k(t))throw TypeError(String(t)+" is not an object");return t},U=Object.defineProperty,B={f:g?U:function(t,e,n){if(D(t),e=L(e,!0),D(n),M)try{return U(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},V=g?function(t,e,n){return B.f(t,e,E(1,n))}:function(t,e,n){return t[e]=n,t},$=function(t,e){try{V(v,t,e)}catch(n){v[t]=e}return e},K="__core-js_shared__",G=v[K]||$(K,{}),W=Function.toString;"function"!=typeof G.inspectSource&&(G.inspectSource=function(t){return W.call(t)});var q,z,H,X=G.inspectSource,Y=v.WeakMap,Z="function"==typeof Y&&/native code/.test(X(Y)),J=h((function(t){(t.exports=function(t,e){return G[t]||(G[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.9.1",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),Q=0,tt=Math.random(),et=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+tt).toString(36)},nt=J("keys"),rt=function(t){return nt[t]||(nt[t]=et(t))},ot={},it=v.WeakMap;if(Z){var at=G.state||(G.state=new it),ut=at.get,st=at.has,ct=at.set;q=function(t,e){return e.facade=t,ct.call(at,t,e),e},z=function(t){return ut.call(at,t)||{}},H=function(t){return st.call(at,t)}}else{var ft=rt("state");ot[ft]=!0,q=function(t,e){return e.facade=t,V(t,ft,e),e},z=function(t){return R(t,ft)?t[ft]:{}},H=function(t){return R(t,ft)}}var lt={set:q,get:z,has:H,enforce:function(t){return H(t)?z(t):q(t,{})},getterFor:function(t){return function(e){var n;if(!k(e)||(n=z(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},pt=h((function(t){var e=lt.get,n=lt.enforce,r=String(String).split("String");(t.exports=function(t,e,o,i){var a,u=!!i&&!!i.unsafe,s=!!i&&!!i.enumerable,c=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||R(o,"name")||V(o,"name",e),(a=n(o)).source||(a.source=r.join("string"==typeof e?e:""))),t!==v?(u?!c&&t[e]&&(s=!0):delete t[e],s?t[e]=o:V(t,e,o)):s?t[e]=o:$(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||X(this)}))})),ht=v,dt=function(t){return"function"==typeof t?t:void 0},vt=function(t,e){return arguments.length<2?dt(ht[t])||dt(v[t]):ht[t]&&ht[t][e]||v[t]&&v[t][e]},yt=Math.ceil,gt=Math.floor,mt=function(t){return isNaN(t=+t)?0:(t>0?gt:yt)(t)},bt=Math.min,wt=function(t){return t>0?bt(mt(t),9007199254740991):0},Et=Math.max,xt=Math.min,Ot=function(t,e){var n=mt(t);return n<0?Et(n+e,0):xt(n,e)},St=function(t){return function(e,n,r){var o,i=A(e),a=wt(i.length),u=Ot(r,a);if(t&&n!=n){for(;a>u;)if((o=i[u++])!=o)return!0}else for(;a>u;u++)if((t||u in i)&&i[u]===n)return t||u||0;return!t&&-1}},jt={includes:St(!0),indexOf:St(!1)},_t=jt.indexOf,At=function(t,e){var n,r=A(t),o=0,i=[];for(n in r)!R(ot,n)&&R(r,n)&&i.push(n);for(;e.length>o;)R(r,n=e[o++])&&(~_t(i,n)||i.push(n));return i},kt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Lt=kt.concat("length","prototype"),Tt={f:Object.getOwnPropertyNames||function(t){return At(t,Lt)}},Rt={f:Object.getOwnPropertySymbols},Pt=vt("Reflect","ownKeys")||function(t){var e=Tt.f(D(t)),n=Rt.f;return n?e.concat(n(t)):e},It=function(t,e){for(var n=Pt(e),r=B.f,o=N.f,i=0;i<n.length;i++){var a=n[i];R(t,a)||r(t,a,o(e,a))}},Ct=/#|\.prototype\./,Mt=function(t,e){var n=Nt[Ft(t)];return n==Ut||n!=Dt&&("function"==typeof e?y(e):!!e)},Ft=Mt.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},Nt=Mt.data={},Dt=Mt.NATIVE="N",Ut=Mt.POLYFILL="P",Bt=Mt,Vt=N.f,$t=function(t,e){var n,r,o,i,a,u=t.target,s=t.global,c=t.stat;if(n=s?v:c?v[u]||$(u,{}):(v[u]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(a=Vt(n,r))&&a.value:n[r],!Bt(s?r:u+(c?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;It(i,o)}(t.sham||o&&o.sham)&&V(i,"sham",!0),pt(n,r,i,t)}},Kt=function(){var t=D(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Gt(t,e){return RegExp(t,e)}var Wt={UNSUPPORTED_Y:y((function(){var t=Gt("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:y((function(){var t=Gt("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},qt=RegExp.prototype.exec,zt=String.prototype.replace,Ht=qt,Xt=function(){var t=/a/,e=/b*/g;return qt.call(t,"a"),qt.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Yt=Wt.UNSUPPORTED_Y||Wt.BROKEN_CARET,Zt=void 0!==/()??/.exec("")[1];(Xt||Zt||Yt)&&(Ht=function(t){var e,n,r,o,i=this,a=Yt&&i.sticky,u=Kt.call(i),s=i.source,c=0,f=t;return a&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),f=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(s="(?: "+s+")",f=" "+f,c++),n=new RegExp("^(?:"+s+")",u)),Zt&&(n=new RegExp("^"+s+"$(?!\\s)",u)),Xt&&(e=i.lastIndex),r=qt.call(a?n:i,f),a?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Xt&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),Zt&&r&&r.length>1&&zt.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var Jt=Ht;$t({target:"RegExp",proto:!0,forced:/./.exec!==Jt},{exec:Jt});var Qt,te,ee="process"==O(v.process),ne=vt("navigator","userAgent")||"",re=v.process,oe=re&&re.versions,ie=oe&&oe.v8;ie?te=(Qt=ie.split("."))[0]+Qt[1]:ne&&(!(Qt=ne.match(/Edge\/(\d+)/))||Qt[1]>=74)&&(Qt=ne.match(/Chrome\/(\d+)/))&&(te=Qt[1]);var ae=te&&+te,ue=!!Object.getOwnPropertySymbols&&!y((function(){return!Symbol.sham&&(ee?38===ae:ae>37&&ae<41)})),se=ue&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,ce=J("wks"),fe=v.Symbol,le=se?fe:fe&&fe.withoutSetter||et,pe=function(t){return R(ce,t)&&(ue||"string"==typeof ce[t])||(ue&&R(fe,t)?ce[t]=fe[t]:ce[t]=le("Symbol."+t)),ce[t]},he=pe("species"),de=!y((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),ve="$0"==="a".replace(/./,"$0"),ye=pe("replace"),ge=!!/./[ye]&&""===/./[ye]("a","$0"),me=!y((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),be=function(t,e,n,r){var o=pe(t),i=!y((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),a=i&&!y((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[he]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!a||"replace"===t&&(!de||!ve||ge)||"split"===t&&!me){var u=/./[o],s=n(o,""[t],(function(t,e,n,r,o){return e.exec===Jt?i&&!o?{done:!0,value:u.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:ve,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:ge}),c=s[0],f=s[1];pt(String.prototype,t,c),pt(RegExp.prototype,o,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}r&&V(RegExp.prototype[o],"sham",!0)},we=function(t){return function(e,n){var r,o,i=String(_(e)),a=mt(n),u=i.length;return a<0||a>=u?t?"":void 0:(r=i.charCodeAt(a))<55296||r>56319||a+1===u||(o=i.charCodeAt(a+1))<56320||o>57343?t?i.charAt(a):r:t?i.slice(a,a+2):o-56320+(r-55296<<10)+65536}},Ee={codeAt:we(!1),charAt:we(!0)},xe=Ee.charAt,Oe=function(t,e,n){return e+(n?xe(t,e).length:1)},Se=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==O(t))throw TypeError("RegExp#exec called on incompatible receiver");return Jt.call(t,e)};be("match",1,(function(t,e,n){return[function(e){var n=_(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=D(t),i=String(this);if(!o.global)return Se(o,i);var a=o.unicode;o.lastIndex=0;for(var u,s=[],c=0;null!==(u=Se(o,i));){var f=String(u[0]);s[c]=f,""===f&&(o.lastIndex=Oe(i,wt(o.lastIndex),a)),c++}return 0===c?null:s}]}));var je=function(t){return Object(_(t))},_e=Math.floor,Ae="".replace,ke=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Le=/\$([$&'`]|\d{1,2})/g,Te=function(t,e,n,r,o,i){var a=n+t.length,u=r.length,s=Le;return void 0!==o&&(o=je(o),s=ke),Ae.call(i,s,(function(i,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(a);case"<":c=o[s.slice(1,-1)];break;default:var f=+s;if(0===f)return i;if(f>u){var l=_e(f/10);return 0===l?i:l<=u?void 0===r[l-1]?s.charAt(1):r[l-1]+s.charAt(1):i}c=r[f-1]}return void 0===c?"":c}))},Re=Math.max,Pe=Math.min;be("replace",2,(function(t,e,n,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,a=o?"$":"$0";return[function(n,r){var o=_(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):e.call(String(o),n,r)},function(t,r){if(!o&&i||"string"==typeof r&&-1===r.indexOf(a)){var u=n(e,t,this,r);if(u.done)return u.value}var s=D(t),c=String(this),f="function"==typeof r;f||(r=String(r));var l=s.global;if(l){var p=s.unicode;s.lastIndex=0}for(var h=[];;){var d=Se(s,c);if(null===d)break;if(h.push(d),!l)break;""===String(d[0])&&(s.lastIndex=Oe(c,wt(s.lastIndex),p))}for(var v,y="",g=0,m=0;m<h.length;m++){d=h[m];for(var b=String(d[0]),w=Re(Pe(mt(d.index),c.length),0),E=[],x=1;x<d.length;x++)E.push(void 0===(v=d[x])?v:String(v));var O=d.groups;if(f){var S=[b].concat(E,w,c);void 0!==O&&S.push(O);var j=String(r.apply(void 0,S))}else j=Te(b,c,w,E,O,r);w>=g&&(y+=c.slice(g,w)+j,g=w+b.length)}return y+c.slice(g)}]}));var Ie=Object.keys||function(t){return At(t,kt)},Ce=y((function(){Ie(1)}));$t({target:"Object",stat:!0,forced:Ce},{keys:function(t){return Ie(je(t))}});var Me=function(t,e){var n=[][t];return!!n&&y((function(){n.call(null,e||function(){throw 1},1)}))},Fe=jt.indexOf,Ne=[].indexOf,De=!!Ne&&1/[1].indexOf(1,-0)<0,Ue=Me("indexOf");$t({target:"Array",proto:!0,forced:De||!Ue},{indexOf:function(t){return De?Ne.apply(this,arguments)||0:Fe(this,t,arguments.length>1?arguments[1]:void 0)}});var Be=Array.isArray||function(t){return"Array"==O(t)},Ve=function(t,e,n){var r=L(e);r in t?B.f(t,r,E(0,n)):t[r]=n},$e=pe("species"),Ke=function(t,e){var n;return Be(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Be(n.prototype)?k(n)&&null===(n=n[$e])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Ge=pe("species"),We=function(t){return ae>=51||!y((function(){var e=[];return(e.constructor={})[Ge]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},qe=pe("isConcatSpreadable"),ze=9007199254740991,He="Maximum allowed index exceeded",Xe=ae>=51||!y((function(){var t=[];return t[qe]=!1,t.concat()[0]!==t})),Ye=We("concat"),Ze=function(t){if(!k(t))return!1;var e=t[qe];return void 0!==e?!!e:Be(t)};$t({target:"Array",proto:!0,forced:!Xe||!Ye},{concat:function(t){var e,n,r,o,i,a=je(this),u=Ke(a,0),s=0;for(e=-1,r=arguments.length;e<r;e++)if(Ze(i=-1===e?a:arguments[e])){if(s+(o=wt(i.length))>ze)throw TypeError(He);for(n=0;n<o;n++,s++)n in i&&Ve(u,s,i[n])}else{if(s>=ze)throw TypeError(He);Ve(u,s++,i)}return u.length=s,u}});var Je=We("slice"),Qe=pe("species"),tn=[].slice,en=Math.max;$t({target:"Array",proto:!0,forced:!Je},{slice:function(t,e){var n,r,o,i=A(this),a=wt(i.length),u=Ot(t,a),s=Ot(void 0===e?a:e,a);if(Be(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Be(n.prototype)?k(n)&&null===(n=n[Qe])&&(n=void 0):n=void 0,n===Array||void 0===n))return tn.call(i,u,s);for(r=new(void 0===n?Array:n)(en(s-u,0)),o=0;u<s;u++,o++)u in i&&Ve(r,o,i[u]);return r.length=o,r}});var nn=s.default.create();function rn(t,e){void 0===e&&(e={});for(var n=function(t){for(var e=[],n=0;n<t.length;){var r=t[n];if("*"!==r&&"+"!==r&&"?"!==r)if("\\"!==r)if("{"!==r)if("}"!==r)if(":"!==r)if("("!==r)e.push({type:"CHAR",index:n,value:t[n++]});else{var o=1,i="";if("?"===t[u=n+1])throw new TypeError('Pattern cannot start with "?" at '+u);for(;u<t.length;)if("\\"!==t[u]){if(")"===t[u]){if(0==--o){u++;break}}else if("("===t[u]&&(o++,"?"!==t[u+1]))throw new TypeError("Capturing groups are not allowed at "+u);i+=t[u++]}else i+=t[u++]+t[u++];if(o)throw new TypeError("Unbalanced pattern at "+n);if(!i)throw new TypeError("Missing pattern at "+n);e.push({type:"PATTERN",index:n,value:i}),n=u}else{for(var a="",u=n+1;u<t.length;){var s=t.charCodeAt(u);if(!(s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122||95===s))break;a+=t[u++]}if(!a)throw new TypeError("Missing parameter name at "+n);e.push({type:"NAME",index:n,value:a}),n=u}else e.push({type:"CLOSE",index:n,value:t[n++]});else e.push({type:"OPEN",index:n,value:t[n++]});else e.push({type:"ESCAPED_CHAR",index:n++,value:t[n++]});else e.push({type:"MODIFIER",index:n,value:t[n++]})}return e.push({type:"END",index:n,value:""}),e}(t),r=e.prefixes,o=void 0===r?"./":r,i="[^"+un(e.delimiter||"/#?")+"]+?",a=[],u=0,s=0,c="",f=function(t){if(s<n.length&&n[s].type===t)return n[s++].value},l=function(t){var e=f(t);if(void 0!==e)return e;var r=n[s],o=r.type,i=r.index;throw new TypeError("Unexpected "+o+" at "+i+", expected "+t)},p=function(){for(var t,e="";t=f("CHAR")||f("ESCAPED_CHAR");)e+=t;return e};s<n.length;){var h=f("CHAR"),d=f("NAME"),v=f("PATTERN");if(d||v){var y=h||"";-1===o.indexOf(y)&&(c+=y,y=""),c&&(a.push(c),c=""),a.push({name:d||u++,prefix:y,suffix:"",pattern:v||i,modifier:f("MODIFIER")||""})}else{var g=h||f("ESCAPED_CHAR");if(g)c+=g;else if(c&&(a.push(c),c=""),f("OPEN")){y=p();var m=f("NAME")||"",b=f("PATTERN")||"",w=p();l("CLOSE"),a.push({name:m||(b?u++:""),pattern:m&&!b?i:b,prefix:y,suffix:w,modifier:f("MODIFIER")||""})}else l("END")}}return a}function on(t,e){void 0===e&&(e={});var n=sn(e),r=e.encode,o=void 0===r?function(t){return t}:r,i=e.validate,a=void 0===i||i,u=t.map((function(t){if("object"==typeof t)return new RegExp("^(?:"+t.pattern+")$",n)}));return function(e){for(var n="",r=0;r<t.length;r++){var i=t[r];if("string"!=typeof i){var s=e?e[i.name]:void 0,c="?"===i.modifier||"*"===i.modifier,f="*"===i.modifier||"+"===i.modifier;if(Array.isArray(s)){if(!f)throw new TypeError('Expected "'+i.name+'" to not repeat, but got an array');if(0===s.length){if(c)continue;throw new TypeError('Expected "'+i.name+'" to not be empty')}for(var l=0;l<s.length;l++){var p=o(s[l],i);if(a&&!u[r].test(p))throw new TypeError('Expected all "'+i.name+'" to match "'+i.pattern+'", but got "'+p+'"');n+=i.prefix+p+i.suffix}}else if("string"!=typeof s&&"number"!=typeof s){if(!c){var h=f?"an array":"a string";throw new TypeError('Expected "'+i.name+'" to be '+h)}}else{p=o(String(s),i);if(a&&!u[r].test(p))throw new TypeError('Expected "'+i.name+'" to match "'+i.pattern+'", but got "'+p+'"');n+=i.prefix+p+i.suffix}}else n+=i}return n}}function an(t,e,n){void 0===n&&(n={});var r=n.decode,o=void 0===r?function(t){return t}:r;return function(n){var r=t.exec(n);if(!r)return!1;for(var i=r[0],a=r.index,u=Object.create(null),s=function(t){if(void 0===r[t])return"continue";var n=e[t-1];"*"===n.modifier||"+"===n.modifier?u[n.name]=r[t].split(n.prefix+n.suffix).map((function(t){return o(t,n)})):u[n.name]=o(r[t],n)},c=1;c<r.length;c++)s(c);return{path:i,index:a,params:u}}}function un(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function sn(t){return t&&t.sensitive?"":"i"}function cn(t,e,n){void 0===n&&(n={});for(var r=n.strict,o=void 0!==r&&r,i=n.start,a=void 0===i||i,u=n.end,s=void 0===u||u,c=n.encode,f=void 0===c?function(t){return t}:c,l="["+un(n.endsWith||"")+"]|$",p="["+un(n.delimiter||"/#?")+"]",h=a?"^":"",d=0,v=t;d<v.length;d++){var y=v[d];if("string"==typeof y)h+=un(f(y));else{var g=un(f(y.prefix)),m=un(f(y.suffix));if(y.pattern)if(e&&e.push(y),g||m)if("+"===y.modifier||"*"===y.modifier){var b="*"===y.modifier?"?":"";h+="(?:"+g+"((?:"+y.pattern+")(?:"+m+g+"(?:"+y.pattern+"))*)"+m+")"+b}else h+="(?:"+g+"("+y.pattern+")"+m+")"+y.modifier;else h+="("+y.pattern+")"+y.modifier;else h+="(?:"+g+m+")"+y.modifier}}if(s)o||(h+=p+"?"),h+=n.endsWith?"(?="+l+")":"$";else{var w=t[t.length-1],E="string"==typeof w?p.indexOf(w[w.length-1])>-1:void 0===w;o||(h+="(?:"+p+"(?="+l+"))?"),E||(h+="(?="+p+"|"+l+")")}return new RegExp(h,sn(n))}function fn(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;for(var n=/\((?:\?<(.*?)>)?(?!\?)/g,r=0,o=n.exec(t.source);o;)e.push({name:o[1]||r++,prefix:"",suffix:"",modifier:"",pattern:""}),o=n.exec(t.source);return t}(t,e):Array.isArray(t)?function(t,e,n){var r=t.map((function(t){return fn(t,e,n).source}));return new RegExp("(?:"+r.join("|")+")",sn(n))}(t,e,n):function(t,e,n){return cn(rn(t,n),e,n)}(t,e,n)}var ln=Object.freeze({__proto__:null,parse:rn,compile:function(t,e){return on(rn(t,e),e)},tokensToFunction:on,match:function(t,e){var n=[];return an(fn(t,n,e),n,e)},regexpToFunction:an,tokensToRegexp:cn,pathToRegexp:fn}),pn=h((function(t,e){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([function(t,e){},function(t,e,n){var r=Array.prototype,o=Object.prototype,i={"&":"&amp;",'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;"},a=/[&"'<>]/g;function u(t,e){return o.hasOwnProperty.call(t,e)}function s(t){return i[t]}function c(t,e,n){var r,o,i;if(t instanceof Error&&(t=(o=t).name+": "+o.message),Object.setPrototypeOf?Object.setPrototypeOf(r=Error(t),c.prototype):Object.defineProperty(r=this,"message",{enumerable:!1,writable:!0,value:t}),Object.defineProperty(r,"name",{value:"Template render error"}),Error.captureStackTrace&&Error.captureStackTrace(r,this.constructor),o){var a=Object.getOwnPropertyDescriptor(o,"stack");(i=a&&(a.get||function(){return a.value}))||(i=function(){return o.stack})}else{var u=Error(t).stack;i=function(){return u}}return Object.defineProperty(r,"stack",{get:function(){return i.call(r)}}),Object.defineProperty(r,"cause",{value:o}),r.lineno=e,r.colno=n,r.firstUpdate=!0,r.Update=function(t){var e="("+(t||"unknown path")+")";return this.firstUpdate&&(this.lineno&&this.colno?e+=" [Line "+this.lineno+", Column "+this.colno+"]":this.lineno&&(e+=" [Line "+this.lineno+"]")),e+="\n ",this.firstUpdate&&(e+=" "),this.message=e+(this.message||""),this.firstUpdate=!1,this},r}function f(t){return"[object Function]"===o.toString.call(t)}function l(t){return"[object Array]"===o.toString.call(t)}function p(t){return"[object String]"===o.toString.call(t)}function h(t){return"[object Object]"===o.toString.call(t)}function d(t){var e,n=(e=t)?"string"==typeof e?e.split("."):[e]:[];return function(t){for(var e=t,r=0;r<n.length;r++){var o=n[r];if(!u(e,o))return;e=e[o]}return e}}function v(t){return Array.prototype.slice.call(t)}function y(t,e,n){return Array.prototype.indexOf.call(t||[],e,n)}function g(t){var e=[];for(var n in t)u(t,n)&&e.push(n);return e}(e=t.exports={}).hasOwnProp=u,e.t=function(t,n,r){if(r.Update||(r=new e.TemplateError(r)),r.Update(t),!n){var o=r;(r=Error(o.message)).name=o.name}return r},Object.setPrototypeOf?Object.setPrototypeOf(c.prototype,Error.prototype):c.prototype=Object.create(Error.prototype,{constructor:{value:c}}),e.TemplateError=c,e.escape=function(t){return t.replace(a,s)},e.isFunction=f,e.isArray=l,e.isString=p,e.isObject=h,e.getAttrGetter=d,e.groupBy=function(t,e,n){for(var r={},o=f(e)?e:d(e),i=0;i<t.length;i++){var a=t[i],u=o(a,i);if(void 0===u&&!0===n)throw new TypeError('groupby: attribute "'+e+'" resolved to undefined');(r[u]||(r[u]=[])).push(a)}return r},e.toArray=v,e.without=function(t){var e=[];if(!t)return e;for(var n=t.length,r=v(arguments).slice(1),o=-1;++o<n;)-1===y(r,t[o])&&e.push(t[o]);return e},e.repeat=function(t,e){for(var n="",r=0;r<e;r++)n+=t;return n},e.each=function(t,e,n){if(null!=t)if(r.forEach&&t.forEach===r.forEach)t.forEach(e,n);else if(t.length===+t.length)for(var o=0,i=t.length;o<i;o++)e.call(n,t[o],o,t)},e.map=function(t,e){var n=[];if(null==t)return n;if(r.map&&t.map===r.map)return t.map(e);for(var o=0;o<t.length;o++)n[n.length]=e(t[o],o);return t.length===+t.length&&(n.length=t.length),n},e.asyncIter=function(t,e,n){var r=-1;!function o(){++r<t.length?e(t[r],r,o,n):n()}()},e.asyncFor=function(t,e,n){var r=g(t||{}),o=r.length,i=-1;!function a(){var u=r[++i];i<o?e(u,t[u],i,o,a):n()}()},e.indexOf=y,e.keys=g,e.r=function(t){return g(t).map((function(e){return[e,t[e]]}))},e.u=function(t){return g(t).map((function(e){return t[e]}))},e.f=e.extend=function(t,e){return t=t||{},g(e).forEach((function(n){t[n]=e[n]})),t},e.inOperator=function(t,e){if(l(e)||p(e))return-1!==e.indexOf(t);if(h(e))return t in e;throw Error('Cannot use "in" operator to search for "'+t+'" in unexpected types.')}},function(t,e,n){var r=n(1),o=Array.from,i="function"==typeof Symbol&&Symbol.iterator&&"function"==typeof o,a=function(){function t(t,e){this.variables=Object.create(null),this.parent=t,this.topLevel=!1,this.isolateWrites=e}var e=t.prototype;return e.set=function(t,e,n){var r=t.split("."),o=this.variables,i=this;if(n&&(i=this.resolve(r[0],!0)))i.set(t,e);else{for(var a=0;a<r.length-1;a++){var u=r[a];o[u]||(o[u]={}),o=o[u]}o[r[r.length-1]]=e}},e.get=function(t){var e=this.variables[t];return void 0!==e?e:null},e.lookup=function(t){var e=this.parent,n=this.variables[t];return void 0!==n?n:e&&e.lookup(t)},e.resolve=function(t,e){var n=e&&this.isolateWrites?void 0:this.parent;return void 0!==this.variables[t]?this:n&&n.resolve(t)},e.push=function(e){return new t(this,e)},e.pop=function(){return this.parent},t}();function u(t){return t&&Object.prototype.hasOwnProperty.call(t,"__keywords")}function s(t){var e=t.length;return 0===e?0:u(t[e-1])?e-1:e}function c(t){if("string"!=typeof t)return t;this.val=t,this.length=t.length}c.prototype=Object.create(String.prototype,{length:{writable:!0,configurable:!0,value:0}}),c.prototype.valueOf=function(){return this.val},c.prototype.toString=function(){return this.val},t.exports={Frame:a,makeMacro:function(t,e,n){return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];var a,c=s(o),f=function(t){var e=t.length;if(e){var n=t[e-1];if(u(n))return n}return{}}(o);if(c>t.length)a=o.slice(0,t.length),o.slice(a.length,c).forEach((function(t,n){n<e.length&&(f[e[n]]=t)})),a.push(f);else if(c<t.length){a=o.slice(0,c);for(var l=c;l<t.length;l++){var p=t[l];a.push(f[p]),delete f[p]}a.push(f)}else a=o;return n.apply(this,a)}},makeKeywordArgs:function(t){return t.__keywords=!0,t},numArgs:s,suppressValue:function(t,e){return t=null!=t?t:"",!e||t instanceof c||(t=r.escape(t.toString())),t},ensureDefined:function(t,e,n){if(null==t)throw new r.TemplateError("attempted to output null or undefined value",e+1,n+1);return t},memberLookup:function(t,e){if(null!=t)return"function"==typeof t[e]?function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];return t[e].apply(t,r)}:t[e]},contextOrFrameLookup:function(t,e,n){var r=e.lookup(n);return void 0!==r?r:t.lookup(n)},callWrap:function(t,e,n,r){if(!t)throw Error("Unable to call `"+e+"`, which is undefined or falsey");if("function"!=typeof t)throw Error("Unable to call `"+e+"`, which is not a function");return t.apply(n,r)},handleError:function(t,e,n){return t.lineno?t:new r.TemplateError(t,e,n)},isArray:r.isArray,keys:r.keys,SafeString:c,copySafeness:function(t,e){return t instanceof c?new c(e):e.toString()},markSafe:function(t){var e=typeof t;return"string"===e?new c(t):"function"!==e?t:function(e){var n=t.apply(this,arguments);return"string"==typeof n?new c(n):n}},asyncEach:function(t,e,n,o){if(r.isArray(t)){var i=t.length;r.asyncIter(t,(function(t,r,o){switch(e){case 1:n(t,r,i,o);break;case 2:n(t[0],t[1],r,i,o);break;case 3:n(t[0],t[1],t[2],r,i,o);break;default:t.push(r,i,o),n.apply(this,t)}}),o)}else r.asyncFor(t,(function(t,e,r,o,i){n(t,e,r,o,i)}),o)},asyncAll:function(t,e,n,o){var i,a,u=0;function s(t,e){u++,a[t]=e,u===i&&o(null,a.join(""))}if(r.isArray(t))if(i=t.length,a=Array(i),0===i)o(null,"");else for(var c=0;c<t.length;c++){var f=t[c];switch(e){case 1:n(f,c,i,s);break;case 2:n(f[0],f[1],c,i,s);break;case 3:n(f[0],f[1],f[2],c,i,s);break;default:f.push(c,i,s),n.apply(this,f)}}else{var l=r.keys(t||{});if(i=l.length,a=Array(i),0===i)o(null,"");else for(var p=0;p<l.length;p++){var h=l[p];n(h,t[h],p,i,s)}}},inOperator:r.inOperator,fromIterator:function(t){return"object"!=typeof t||null===t||r.isArray(t)?t:i&&Symbol.iterator in t?o(t):t}}},function(t,e,n){function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=function(t){var e,n;function o(e){var n;return(n=t.call(this)||this).precompiled=e||{},n}return n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),o.prototype.getSource=function(t){return this.precompiled[t]?{src:{type:"code",obj:this.precompiled[t]},path:t}:null},o}(n(4));t.exports={PrecompiledLoader:o}},function(t,e,n){function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var o=n(0),i=n(5).EmitterObj;t.exports=function(t){var e,n;function i(){return t.apply(this,arguments)||this}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n);var a=i.prototype;return a.resolve=function(t,e){return o.resolve(o.dirname(t),e)},a.isRelative=function(t){return 0===t.indexOf("./")||0===t.indexOf("../")},i}(i)},function(t,e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(13),s=n(1);function c(t,e,n){n=n||{},s.keys(n).forEach((function(e){var r,o;n[e]=(r=t.prototype[e],o=n[e],"function"!=typeof r||"function"!=typeof o?o:function(){var t=this.parent;this.parent=r;var e=o.apply(this,arguments);return this.parent=t,e})}));var r=function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),o(n,[{key:"typename",get:function(){return e}}]),n}(t);return s.f(r.prototype,n),r}var f=function(){function t(){this.init.apply(this,arguments)}return t.prototype.init=function(){},t.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),c(this,t,e)},o(t,[{key:"typename",get:function(){return this.constructor.name}}]),t}(),l=function(t){function e(){var e,n;return(e=n=t.call(this)||this).init.apply(e,arguments),n}return i(e,t),e.prototype.init=function(){},e.extend=function(t,e){return"object"==typeof t&&(e=t,t="anonymous"),c(this,t,e)},o(e,[{key:"typename",get:function(){return this.constructor.name}}]),e}(u);t.exports={Obj:f,EmitterObj:l}},function(t,e,n){var r,o=n(1),i=n(7),a=i.Environment,u=i.Template,s=n(4),c=n(3),f=n(0),l=n(0),p=n(0),h=n(0),d=n(2),v=n(0),y=n(17);function g(t,e){var n;return e=e||{},o.isObject(t)&&(e=t,t=null),c.FileSystemLoader?n=new c.FileSystemLoader(t,{watch:e.watch,noCache:e.noCache}):c.WebLoader&&(n=new c.WebLoader(t,{useCache:e.web&&e.web.useCache,async:e.web&&e.web.async})),r=new a(n,e),e&&e.express&&r.express(e.express),r}t.exports={Environment:a,Template:u,Loader:s,FileSystemLoader:c.FileSystemLoader,NodeResolveLoader:c.NodeResolveLoader,PrecompiledLoader:c.PrecompiledLoader,WebLoader:c.WebLoader,compiler:l,parser:p,lexer:h,runtime:d,lib:o,nodes:v,installJinjaCompat:y,configure:g,reset:function(){r=void 0},compile:function(t,e,n,o){return r||g(),new u(t,e,n,o)},render:function(t,e,n){return r||g(),r.render(t,e,n)},renderString:function(t,e,n){return r||g(),r.renderString(t,e,n)},precompile:f?f.precompile:void 0,precompileString:f?f.precompileString:void 0}},function(t,e,n){function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var i=n(8),a=n(11),u=n(1),s=n(0),c=n(12),f=n(3),l=f.FileSystemLoader,p=f.WebLoader,h=f.PrecompiledLoader,d=n(14),v=n(15),y=n(5),g=y.Obj,m=y.EmitterObj,b=n(2),w=b.handleError,E=b.Frame,x=n(16);function O(t,e,n){i((function(){t(e,n)}))}var S={type:"code",obj:{root:function(t,e,n,r,o){try{o(null,"")}catch(t){o(w(t,null,null))}}}},j=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e){var n=this;e=this.opts=e||{},this.opts.dev=!!e.dev,this.opts.autoescape=null==e.autoescape||e.autoescape,this.opts.throwOnUndefined=!!e.throwOnUndefined,this.opts.trimBlocks=!!e.trimBlocks,this.opts.lstripBlocks=!!e.lstripBlocks,this.loaders=[],t?this.loaders=u.isArray(t)?t:[t]:l?this.loaders=[new l("views")]:p&&(this.loaders=[new p("/views")]),"undefined"!=typeof window&&window.nunjucksPrecompiled&&this.loaders.unshift(new h(window.nunjucksPrecompiled)),this.a(),this.globals=v(),this.filters={},this.tests={},this.asyncFilters=[],this.extensions={},this.extensionsList=[],u.r(c).forEach((function(t){var e=t[0],r=t[1];return n.addFilter(e,r)})),u.r(d).forEach((function(t){var e=t[0],r=t[1];return n.addTest(e,r)}))},n.a=function(){var t=this;this.loaders.forEach((function(e){e.cache={},"function"==typeof e.on&&(e.on("update",(function(n,r){e.cache[n]=null,t.emit("update",n,r,e)})),e.on("load",(function(n,r){t.emit("load",n,r,e)})))}))},n.invalidateCache=function(){this.loaders.forEach((function(t){t.cache={}}))},n.addExtension=function(t,e){return e.__name=t,this.extensions[t]=e,this.extensionsList.push(e),this},n.removeExtension=function(t){var e=this.getExtension(t);e&&(this.extensionsList=u.without(this.extensionsList,e),delete this.extensions[t])},n.getExtension=function(t){return this.extensions[t]},n.hasExtension=function(t){return!!this.extensions[t]},n.addGlobal=function(t,e){return this.globals[t]=e,this},n.getGlobal=function(t){if(void 0===this.globals[t])throw Error("global not found: "+t);return this.globals[t]},n.addFilter=function(t,e,n){var r=e;return n&&this.asyncFilters.push(t),this.filters[t]=r,this},n.getFilter=function(t){if(!this.filters[t])throw Error("filter not found: "+t);return this.filters[t]},n.addTest=function(t,e){return this.tests[t]=e,this},n.getTest=function(t){if(!this.tests[t])throw Error("test not found: "+t);return this.tests[t]},n.resolveTemplate=function(t,e,n){return t.isRelative&&e&&t.isRelative(n)&&t.resolve?t.resolve(e,n):n},n.getTemplate=function(t,e,n,r,o){var i,a=this,s=this,c=null;if(t&&t.raw&&(t=t.raw),u.isFunction(n)&&(o=n,n=null,e=e||!1),u.isFunction(e)&&(o=e,e=!1),t instanceof A)c=t;else{if("string"!=typeof t)throw Error("template names must be a string: "+t);for(var f=0;f<this.loaders.length;f++){var l=this.loaders[f];if(c=l.cache[this.resolveTemplate(l,n,t)])break}}return c?(e&&c.compile(),o?void o(null,c):c):(u.asyncIter(this.loaders,(function(e,r,o,i){function a(t,n){t?i(t):n?(n.loader=e,i(null,n)):o()}t=s.resolveTemplate(e,n,t),e.async?e.getSource(t,a):a(null,e.getSource(t))}),(function(n,u){if(u||n||r||(n=Error("template not found: "+t)),n){if(o)return void o(n);throw n}var s;u?(s=new A(u.src,a,u.path,e),u.noCache||(u.loader.cache[t]=s)):s=new A(S,a,"",e),o?o(null,s):i=s})),i)},n.express=function(t){return x(this,t)},n.render=function(t,e,n){u.isFunction(e)&&(n=e,e=null);var r=null;return this.getTemplate(t,(function(t,o){if(t&&n)O(n,t);else{if(t)throw t;r=o.render(e,n)}})),r},n.renderString=function(t,e,n,r){return u.isFunction(n)&&(r=n,n={}),new A(t,this,(n=n||{}).path).render(e,r)},n.waterfall=function(t,e,n){return a(t,e,n)},e}(m),_=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e,n){var r=this;this.env=n||new j,this.ctx=u.extend({},t),this.blocks={},this.exported=[],u.keys(e).forEach((function(t){r.addBlock(t,e[t])}))},n.lookup=function(t){return t in this.env.globals&&!(t in this.ctx)?this.env.globals[t]:this.ctx[t]},n.setVariable=function(t,e){this.ctx[t]=e},n.getVariables=function(){return this.ctx},n.addBlock=function(t,e){return this.blocks[t]=this.blocks[t]||[],this.blocks[t].push(e),this},n.getBlock=function(t){if(!this.blocks[t])throw Error('unknown block "'+t+'"');return this.blocks[t][0]},n.getSuper=function(t,e,n,r,o,i){var a=u.indexOf(this.blocks[e]||[],n),s=this.blocks[e][a+1];if(-1===a||!s)throw Error('no super block available for "'+e+'"');s(t,this,r,o,i)},n.addExport=function(t){this.exported.push(t)},n.getExported=function(){var t=this,e={};return this.exported.forEach((function(n){e[n]=t.ctx[n]})),e},e}(g),A=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var n=e.prototype;return n.init=function(t,e,n,r){if(this.env=e||new j,u.isObject(t))switch(t.type){case"code":this.tmplProps=t.obj;break;case"string":this.tmplStr=t.obj;break;default:throw Error("Unexpected template object type "+t.type+"; expected 'code', or 'string'")}else{if(!u.isString(t))throw Error("src must be a string or an object describing the source");this.tmplStr=t}if(this.path=n,r)try{this.h()}catch(t){throw u.t(this.path,this.env.opts.dev,t)}else this.compiled=!1},n.render=function(t,e,n){var r=this;"function"==typeof t?(n=t,t={}):"function"==typeof e&&(n=e,e=null);var o=!e;try{this.compile()}catch(t){var i=u.t(this.path,this.env.opts.dev,t);if(n)return O(n,i);throw i}var a=new _(t||{},this.blocks,this.env),s=e?e.push(!0):new E;s.topLevel=!0;var c=null,f=!1;return this.rootRenderFunc(this.env,a,s,b,(function(t,e){if(!f||!n||void 0===e)if(t&&(t=u.t(r.path,r.env.opts.dev,t),f=!0),n)o?O(n,t,e):n(t,e);else{if(t)throw t;c=e}})),c},n.getExported=function(t,e,n){"function"==typeof t&&(n=t,t={}),"function"==typeof e&&(n=e,e=null);try{this.compile()}catch(t){if(n)return n(t);throw t}var r=e?e.push():new E;r.topLevel=!0;var o=new _(t||{},this.blocks,this.env);this.rootRenderFunc(this.env,o,r,b,(function(t){t?n(t,null):n(null,o.getExported())}))},n.compile=function(){this.compiled||this.h()},n.h=function(){var t;if(this.tmplProps)t=this.tmplProps;else{var e=s.compile(this.tmplStr,this.env.asyncFilters,this.env.extensionsList,this.path,this.env.opts);t=Function(e)()}this.blocks=this.v(t),this.rootRenderFunc=t.root,this.compiled=!0},n.v=function(t){var e={};return u.keys(t).forEach((function(n){"b_"===n.slice(0,2)&&(e[n.slice(2)]=t[n])})),e},e}(g);t.exports={Environment:j,Template:A}},function(t,e,n){var r=n(9),o=[],i=[],a=r.makeRequestCallFromTimer((function(){if(i.length)throw i.shift()}));function u(t){var e;(e=o.length?o.pop():new s).task=t,r(e)}function s(){this.task=null}t.exports=u,s.prototype.call=function(){try{this.task.call()}catch(t){u.onerror?u.onerror(t):(i.push(t),a())}finally{this.task=null,o[o.length]=this}}},function(t,e,n){!function(e){function n(t){o.length||r(),o[o.length]=t}t.exports=n;var r,o=[],i=0,a=1024;function u(){for(;i<o.length;){var t=i;if(i+=1,o[t].call(),i>a){for(var e=0,n=o.length-i;e<n;e++)o[e]=o[e+i];o.length-=i,i=0}}o.length=0,i=0}var s,c,f,l=void 0!==e?e:self,p=l.MutationObserver||l.WebKitMutationObserver;function h(t){return function(){var e=setTimeout(r,0),n=setInterval(r,50);function r(){clearTimeout(e),clearInterval(n),t()}}}"function"==typeof p?(s=1,c=new p(u),f=document.createTextNode(""),c.observe(f,{characterData:!0}),r=function(){s=-s,f.data=s}):r=h(u),n.requestFlush=r,n.makeRequestCallFromTimer=h}(n(10))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r;!function(n){var o=function(){var t=Array.prototype.slice.call(arguments);"function"==typeof t[0]&&t[0].apply(null,t.splice(1))},i=function(t){"function"==typeof setImmediate?setImmediate(t):"undefined"!=typeof process&&process.nextTick?process.nextTick(t):setTimeout(t,0)},a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=function(t,e,n){var r=n?i:o;if(e=e||function(){},!a(t))return e(Error("First argument to waterfall must be an array of functions"));if(!t.length)return e();var u=function(t){return function(n){if(n)e.apply(null,arguments),e=function(){};else{var o=Array.prototype.slice.call(arguments,1),i=t.next();i?o.push(u(i)):o.push(e),r((function(){t.apply(null,o)}))}}};u(function(t){var e=function(n){var r=function(){return t.length&&t[n].apply(null,arguments),r.next()};return r.next=function(){return n<t.length-1?e(n+1):null},r};return e(0)}(t))()};void 0===(r=function(){return u}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){var r=n(1),o=n(2);function i(t,e){return null==t||!1===t?e:t}function a(t){return t!=t}function u(t){var e=(t=i(t,"")).toLowerCase();return o.copySafeness(t,e.charAt(0).toUpperCase()+e.slice(1))}function s(t){if(r.isString(t))return t.split("");if(r.isObject(t))return r.r(t||{}).map((function(t){return{key:t[0],value:t[1]}}));if(r.isArray(t))return t;throw new r.TemplateError("list filter: type not iterable")}function c(t){return function(e,n,o){void 0===n&&(n="truthy");var i=this,a=i.env.getTest(n);return r.toArray(e).filter((function(e){return a.call(i,e,o)===t}))}}function f(t){return o.copySafeness(t,t.replace(/^\s*|\s*$/g,""))}(e=t.exports={}).abs=Math.abs,e.batch=function(t,e,n){var r,o=[],i=[];for(r=0;r<t.length;r++)r%e==0&&i.length&&(o.push(i),i=[]),i.push(t[r]);if(i.length){if(n)for(r=i.length;r<e;r++)i.push(n);o.push(i)}return o},e.capitalize=u,e.center=function(t,e){if(e=e||80,(t=i(t,"")).length>=e)return t;var n=e-t.length,a=r.repeat(" ",n/2-n%2),u=r.repeat(" ",n/2);return o.copySafeness(t,a+t+u)},e.default=function(t,e,n){return n?t||e:void 0!==t?t:e},e.dictsort=function(t,e,n){if(!r.isObject(t))throw new r.TemplateError("dictsort filter: val must be an object");var o,i=[];for(var a in t)i.push([a,t[a]]);if(void 0===n||"key"===n)o=0;else{if("value"!==n)throw new r.TemplateError("dictsort filter: You can only sort by either key or value");o=1}return i.sort((function(t,n){var i=t[o],a=n[o];return e||(r.isString(i)&&(i=i.toUpperCase()),r.isString(a)&&(a=a.toUpperCase())),i>a?1:i===a?0:-1})),i},e.dump=function(t,e){return JSON.stringify(t,null,e)},e.escape=function(t){return t instanceof o.SafeString?t:(t=null==t?"":t,o.markSafe(r.escape(t.toString())))},e.safe=function(t){return t instanceof o.SafeString?t:(t=null==t?"":t,o.markSafe(t.toString()))},e.first=function(t){return t[0]},e.forceescape=function(t){return t=null==t?"":t,o.markSafe(r.escape(t.toString()))},e.groupby=function(t,e){return r.groupBy(t,e,this.env.opts.throwOnUndefined)},e.indent=function(t,e,n){if(""===(t=i(t,"")))return"";e=e||4;var a=t.split("\n"),u=r.repeat(" ",e),s=a.map((function(t,e){return 0!==e||n?""+u+t:t})).join("\n");return o.copySafeness(t,s)},e.join=function(t,e,n){return e=e||"",n&&(t=r.map(t,(function(t){return t[n]}))),t.join(e)},e.last=function(t){return t[t.length-1]},e.length=function(t){var e=i(t,"");return void 0!==e?"function"==typeof Map&&e instanceof Map||"function"==typeof Set&&e instanceof Set?e.size:!r.isObject(e)||e instanceof o.SafeString?e.length:r.keys(e).length:0},e.list=s,e.lower=function(t){return(t=i(t,"")).toLowerCase()},e.nl2br=function(t){return null==t?"":o.copySafeness(t,t.replace(/\r\n|\n/g,"<br />\n"))},e.random=function(t){return t[Math.floor(Math.random()*t.length)]},e.reject=c(!1),e.rejectattr=function(t,e){return t.filter((function(t){return!t[e]}))},e.select=c(!0),e.selectattr=function(t,e){return t.filter((function(t){return!!t[e]}))},e.replace=function(t,e,n,r){var i=t;if(e instanceof RegExp)return t.replace(e,n);void 0===r&&(r=-1);var a="";if("number"==typeof e)e=""+e;else if("string"!=typeof e)return t;if("number"==typeof t&&(t=""+t),"string"!=typeof t&&!(t instanceof o.SafeString))return t;if(""===e)return a=n+t.split("").join(n)+n,o.copySafeness(t,a);var u=t.indexOf(e);if(0===r||-1===u)return t;for(var s=0,c=0;u>-1&&(-1===r||c<r);)a+=t.substring(s,u)+n,s=u+e.length,c++,u=t.indexOf(e,s);return s<t.length&&(a+=t.substring(s)),o.copySafeness(i,a)},e.reverse=function(t){var e;return(e=r.isString(t)?s(t):r.map(t,(function(t){return t}))).reverse(),r.isString(t)?o.copySafeness(t,e.join("")):e},e.round=function(t,e,n){var r=Math.pow(10,e=e||0);return("ceil"===n?Math.ceil:"floor"===n?Math.floor:Math.round)(t*r)/r},e.slice=function(t,e,n){for(var r=Math.floor(t.length/e),o=t.length%e,i=[],a=0,u=0;u<e;u++){var s=a+u*r;u<o&&a++;var c=a+(u+1)*r,f=t.slice(s,c);n&&u>=o&&f.push(n),i.push(f)}return i},e.sum=function(t,e,n){return void 0===n&&(n=0),e&&(t=r.map(t,(function(t){return t[e]}))),n+t.reduce((function(t,e){return t+e}),0)},e.sort=o.makeMacro(["value","reverse","case_sensitive","attribute"],[],(function(t,e,n,o){var i=this,a=r.map(t,(function(t){return t})),u=r.getAttrGetter(o);return a.sort((function(t,a){var s=o?u(t):t,c=o?u(a):a;if(i.env.opts.throwOnUndefined&&o&&(void 0===s||void 0===c))throw new TypeError('sort: attribute "'+o+'" resolved to undefined');return!n&&r.isString(s)&&r.isString(c)&&(s=s.toLowerCase(),c=c.toLowerCase()),s<c?e?1:-1:s>c?e?-1:1:0})),a})),e.string=function(t){return o.copySafeness(t,t)},e.striptags=function(t,e){var n=f((t=i(t,"")).replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>|<!--[\s\S]*?-->/gi,"")),r="";return r=e?n.replace(/^ +| +$/gm,"").replace(/ +/g," ").replace(/(\r\n)/g,"\n").replace(/\n\n\n+/g,"\n\n"):n.replace(/\s+/gi," "),o.copySafeness(t,r)},e.title=function(t){var e=(t=i(t,"")).split(" ").map((function(t){return u(t)}));return o.copySafeness(t,e.join(" "))},e.trim=f,e.truncate=function(t,e,n,r){var a=t;if(e=e||255,(t=i(t,"")).length<=e)return t;if(n)t=t.substring(0,e);else{var u=t.lastIndexOf(" ",e);-1===u&&(u=e),t=t.substring(0,u)}return t+=null!=r?r:"...",o.copySafeness(a,t)},e.upper=function(t){return(t=i(t,"")).toUpperCase()},e.urlencode=function(t){var e=encodeURIComponent;return r.isString(t)?e(t):(r.isArray(t)?t:r.r(t)).map((function(t){var n=t[0],r=t[1];return e(n)+"="+e(r)})).join("&")};var l=/^(?:\(|<|&lt;)?(.*?)(?:\.|,|\)|\n|&gt;)?$/,p=/^[\w.!#$%&'*+\-\/=?\^`{|}~]+@[a-z\d\-]+(\.[a-z\d\-]+)+$/i,h=/^https?:\/\/.*$/,d=/^www\./,v=/\.(?:org|net|com)(?:\:|\/|$)/;e.urlize=function(t,e,n){a(e)&&(e=1/0);var r=!0===n?' rel="nofollow"':"";return t.split(/(\s+)/).filter((function(t){return t&&t.length})).map((function(t){var n=t.match(l),o=n?n[1]:t,i=o.substr(0,e);return h.test(o)?'<a href="'+o+'"'+r+">"+i+"</a>":d.test(o)?'<a href="http://'+o+'"'+r+">"+i+"</a>":p.test(o)?'<a href="mailto:'+o+'">'+o+"</a>":v.test(o)?'<a href="http://'+o+'"'+r+">"+i+"</a>":t})).join("")},e.wordcount=function(t){var e=(t=i(t,""))?t.match(/\w+/g):null;return e?e.length:null},e.float=function(t,e){var n=parseFloat(t);return a(n)?e:n};var y=o.makeMacro(["value","default","base"],[],(function(t,e,n){void 0===n&&(n=10);var r=parseInt(t,n);return a(r)?e:r}));e.int=y,e.d=e.default,e.e=e.escape},function(t,e,n){var r,o="object"==typeof Reflect?Reflect:null,i=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function u(){u.init.call(this)}t.exports=u,t.exports.once=function(t,e){return new Promise((function(n,r){function o(){void 0!==i&&t.removeListener("error",i),n([].slice.call(arguments))}var i;"error"!==e&&(i=function(n){t.removeListener(e,o),r(n)},t.once("error",i)),t.once(e,o)}))},u.EventEmitter=u,u.prototype.y=void 0,u.prototype.b=0,u.prototype.w=void 0;var s=10;function c(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function f(t){return void 0===t.w?u.defaultMaxListeners:t.w}function l(t,e,n,r){var o,i,a;if(c(n),void 0===(i=t.y)?(i=t.y=Object.create(null),t.b=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t.y),a=i[e]),void 0===a)a=i[e]=n,++t.b;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(o=f(t))>0&&a.length>o&&!a.warned){a.warned=!0;var u=Error("Possible EventEmitter memory leak detected. "+a.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=a.length,console&&console.warn&&console.warn(u)}return t}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return o.listener=n,r.wrapFn=o,o}function h(t,e,n){var r=t.y;if(void 0===r)return[];var o=r[e];return void 0===o?[]:"function"==typeof o?n?[o.listener||o]:[o]:n?function(t){for(var e=Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(o):v(o,o.length)}function d(t){var e=this.y;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function v(t,e){for(var n=Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");s=t}}),u.init=function(){void 0!==this.y&&this.y!==Object.getPrototypeOf(this).y||(this.y=Object.create(null),this.b=0),this.w=this.w||void 0},u.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this.w=t,this},u.prototype.getMaxListeners=function(){return f(this)},u.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,o=this.y;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var u=Error("Unhandled error."+(a?" ("+a.message+")":""));throw u.context=a,u}var s=o[t];if(void 0===s)return!1;if("function"==typeof s)i(s,this,e);else{var c=s.length,f=v(s,c);for(n=0;n<c;++n)i(f[n],this,e)}return!0},u.prototype.addListener=function(t,e){return l(this,t,e,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(t,e){return l(this,t,e,!0)},u.prototype.once=function(t,e){return c(e),this.on(t,p(this,t,e)),this},u.prototype.prependOnceListener=function(t,e){return c(e),this.prependListener(t,p(this,t,e)),this},u.prototype.removeListener=function(t,e){var n,r,o,i,a;if(c(e),void 0===(r=this.y))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this.b?this.y=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(o=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,o=i;break}if(o<0)return this;0===o?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,o),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this.y))return this;if(void 0===n.removeListener)return 0===arguments.length?(this.y=Object.create(null),this.b=0):void 0!==n[t]&&(0==--this.b?this.y=Object.create(null):delete n[t]),this;if(0===arguments.length){var o,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(o=i[r])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this.y=Object.create(null),this.b=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},u.prototype.listeners=function(t){return h(this,t,!0)},u.prototype.rawListeners=function(t){return h(this,t,!1)},u.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},u.prototype.listenerCount=d,u.prototype.eventNames=function(){return this.b>0?r(this.y):[]}},function(t,e,n){var r=n(2).SafeString;e.callable=function(t){return"function"==typeof t},e.defined=function(t){return void 0!==t},e.divisibleby=function(t,e){return t%e==0},e.escaped=function(t){return t instanceof r},e.equalto=function(t,e){return t===e},e.eq=e.equalto,e.sameas=e.equalto,e.even=function(t){return t%2==0},e.falsy=function(t){return!t},e.ge=function(t,e){return t>=e},e.greaterthan=function(t,e){return t>e},e.gt=e.greaterthan,e.le=function(t,e){return t<=e},e.lessthan=function(t,e){return t<e},e.lt=e.lessthan,e.lower=function(t){return t.toLowerCase()===t},e.ne=function(t,e){return t!==e},e.null=function(t){return null===t},e.number=function(t){return"number"==typeof t},e.odd=function(t){return t%2==1},e.string=function(t){return"string"==typeof t},e.truthy=function(t){return!!t},e.undefined=function(t){return void 0===t},e.upper=function(t){return t.toUpperCase()===t},e.iterable=function(t){return"undefined"!=typeof Symbol?!!t[Symbol.iterator]:Array.isArray(t)||"string"==typeof t},e.mapping=function(t){var e=null!=t&&"object"==typeof t&&!Array.isArray(t);return Set?e&&!(t instanceof Set):e}},function(t,e,n){t.exports=function(){return{range:function(t,e,n){void 0===e?(e=t,t=0,n=1):n||(n=1);var r=[];if(n>0)for(var o=t;o<e;o+=n)r.push(o);else for(var i=t;i>e;i+=n)r.push(i);return r},cycler:function(){return t=Array.prototype.slice.call(arguments),e=-1,{current:null,reset:function(){e=-1,this.current=null},next:function(){return++e>=t.length&&(e=0),this.current=t[e],this.current}};var t,e},joiner:function(t){return function(t){t=t||",";var e=!0;return function(){var n=e?"":t;return e=!1,n}}(t)}}}},function(t,e,n){var r=n(0);t.exports=function(t,e){function n(t,e){if(this.name=t,this.path=t,this.defaultEngine=e.defaultEngine,this.ext=r.extname(t),!this.ext&&!this.defaultEngine)throw Error("No default engine was specified and no extension was provided.");this.ext||(this.name+=this.ext=("."!==this.defaultEngine[0]?".":"")+this.defaultEngine)}return n.prototype.render=function(e,n){t.render(this.name,e,n)},e.set("view",n),e.set("nunjucksEnv",t),t}},function(t,e,n){t.exports=function(){var t,e,n=this.runtime,r=this.lib,o=this.compiler.Compiler,i=this.parser.Parser,a=(this.nodes,this.lexer,n.contextOrFrameLookup),u=n.memberLookup;function s(t,e){return Object.prototype.hasOwnProperty.call(t,e)}o&&(t=o.prototype.assertType),i&&(e=i.prototype.parseAggregate),n.contextOrFrameLookup=function(t,e,n){var r=a.apply(this,arguments);if(void 0!==r)return r;switch(n){case"True":return!0;case"False":return!1;case"None":return null;default:return}};var c={pop:function(t){if(void 0===t)return this.pop();if(t>=this.length||t<0)throw Error("KeyError");return this.splice(t,1)},append:function(t){return this.push(t)},remove:function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return this.splice(e,1);throw Error("ValueError")},count:function(t){for(var e=0,n=0;n<this.length;n++)this[n]===t&&e++;return e},index:function(t){var e;if(-1===(e=this.indexOf(t)))throw Error("ValueError");return e},find:function(t){return this.indexOf(t)},insert:function(t,e){return this.splice(t,0,e)}},f={items:function(){return r.r(this)},values:function(){return r.u(this)},keys:function(){return r.keys(this)},get:function(t,e){var n=this[t];return void 0===n&&(n=e),n},has_key:function(t){return s(this,t)},pop:function(t,e){var n=this[t];if(void 0===n&&void 0!==e)n=e;else{if(void 0===n)throw Error("KeyError");delete this[t]}return n},popitem:function(){var t=r.keys(this);if(!t.length)throw Error("KeyError");var e=t[0],n=this[e];return delete this[e],[e,n]},setdefault:function(t,e){return void 0===e&&(e=null),t in this||(this[t]=e),this[t]},update:function(t){return r.f(this,t),null}};return f.iteritems=f.items,f.itervalues=f.values,f.iterkeys=f.keys,n.memberLookup=function(t,e,o){return 4===arguments.length?function(t,e,r,o){t=t||[],null===e&&(e=o<0?t.length-1:0),null===r?r=o<0?-1:t.length:r<0&&(r+=t.length),e<0&&(e+=t.length);for(var i=[],a=e;!(a<0||a>t.length||o>0&&a>=r||o<0&&a<=r);a+=o)i.push(n.memberLookup(t,a));return i}.apply(this,arguments):(t=t||{},r.isArray(t)&&s(c,e)?c[e].bind(t):r.isObject(t)&&s(f,e)?f[e].bind(t):u.apply(this,arguments))},function(){n.contextOrFrameLookup=a,n.memberLookup=u,o&&(o.prototype.assertType=t),i&&(i.prototype.parseAggregate=e)}}}])})),hn=[].join,dn=j!=Object,vn=Me("join",",");
/*! Browser bundle of nunjucks 3.2.3 (slim, only works with precompiled templates) */function yn(t){this.scripter=t}$t({target:"Array",proto:!0,forced:dn||!vn},{join:function(t){return hn.call(A(this),void 0===t?",":t)}}),function(){
/*
	   * Library to normalize key codes across browsers.  This works with keydown
	   * events; keypress events are not fired for all keys, and the codes are
	   * different for them.  It returns an object with the following fields:
	   * { int code, bool shift, bool alt, bool ctrl }.  The normalized keycodes
	   * obey the following rules:
	   *
	   * For alphabetic characters, the ASCII code of the uppercase version
	   *
	   * For codes that are identical across all browsers (this includes all
	   * modifiers, esc, delete, arrows, etc.), the common keycode
	   *
	   * For numeric keypad keys, the value returned by numkey().
	   * (Usually 96 + the number)
	   *
	   * For symbols, the ASCII code of the character that appears when shift
	   * is not held down, EXCEPT for '" => 222 (conflicts with right-arrow/pagedown),
	   * .> => 190 (conflicts with Delete) and `~ => 126 (conflicts with Num0).
	   *
	   * Basic usage:
	   * document.onkeydown = function(e) {
	   *    do_something_with(KeyCode.translateEvent(e)
	   * };
	   *
	   * The naming conventions for functions use 'code' to represent an integer
	   * keycode, 'key' to represent a key description (specified above), and 'e'
	   * to represent an event object.
	   *
	   * There's also functionality to track and detect which keys are currently
	   * being held down: install 'key_up' and 'key_down' on their respective event
	   * handlers, and then check with 'is_down'.
	   *
	   * @fileoverview
	   * @author Jonathan Tang
	   * @version 0.9
	   * @license BSD
	   */
var t=["ctrl","alt","shift"],e={},n={58:59,43:61,60:44,95:45,62:46,63:47,96:192,124:92,39:222,34:222,33:49,64:50,35:51,36:52,37:53,94:54,38:55,42:56,40:57,41:58,123:91,125:93};function r(t){return t.substr(0,1).toUpperCase()+t.substr(1).toLowerCase()}navigator.userAgent.indexOf("Gecko"),navigator.userAgent.indexOf("MSIE");var o=-1!=navigator.platform.indexOf("Win"),i=window.opera&&window.opera.version()<9.5,a=navigator.vendor&&-1!=navigator.vendor.indexOf("KDE"),u=navigator.vendor&&-1!=navigator.vendor.indexOf("iCab"),s={};if(i&&o)e=s;else if(i||a||u){var c=[33,64,35,36,37,94,38,42,40,41,58,43,60,95,62,63,124,34];e=s;for(var f=0;f<c.length;++f)e[c[f]]=n[c[f]]}else e={186:59,187:61,188:44,109:95,107:61,189:95,190:62,191:47,192:126,219:91,220:92,221:93};a&&(e[0]=45,e[127]=46,e[45]=95);var l={32:"SPACE",13:"ENTER",9:"TAB",8:"BACKSPACE",16:"SHIFT",17:"CTRL",18:"ALT",20:"CAPS_LOCK",144:"NUM_LOCK",145:"SCROLL_LOCK",37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",33:"PAGE_UP",34:"PAGE_DOWN",36:"HOME",35:"END",45:"INSERT",46:"DELETE",27:"ESCAPE",19:"PAUSE",222:"'"};var p={codes:{},ctrl:!1,alt:!1,shift:!1};function h(t){p.ctrl=t.ctrl,p.alt=t.alt,p.shift=t.shift}function d(t,e){return t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift}if(void 0!==window.KeyCode)var v=window.KeyCode;var y=window.KeyCode={no_conflict:function(){return window.KeyCode=v,y},fkey:function(t){return 111+t},numkey:function(t){switch(t){case"*":return 106;case"/":return 111;case".":return 110;default:return 96+t}},key:function(t){var e,r=t.charCodeAt(0);return(e=r)>=97&&e<=122?r-32:n[r]||r},key_equals:function(t,e){return t.code==e.code&&d(t,e)},translate_key_code:function(t){return e[t]||t},translate_event:function(t){var e=(t=t||window.event).which||t.keyCode;return{code:y.translate_key_code(e),shift:t.shiftKey,alt:t.altKey,ctrl:t.ctrlKey}},key_down:function(t){var e=y.translate_event(t);p.codes[e.code]=e.code,h(e)},key_up:function(t){var e=y.translate_event(t);delete p.codes[e.code],h(e)},is_down:function(t){var e=t.code;return e==y.CTRL?p.ctrl:e==y.ALT?p.alt:e==y.SHIFT?p.shift:void 0!==p.codes[e]&&d(t,p)},hot_key:function(e){for(var n=[],o=0;o<t.length;++o){var i=t[o];e[i]&&i.toUpperCase()!=l[e.code]&&n.push(r(i))}var a=e.code,u=l[a]||function(t){return t>=112&&t<=123&&"F"+(t-111)}(a)||function(t){if(t>=96&&t<106)return"Num"+(t-96);switch(t){case 106:return"Num*";case 111:return"Num/";case 110:return"Num.";default:return!1}}(a)||String.fromCharCode(a);return n.push(r(u)),n.join("+")}};for(var g in l)y[l[g]]=g}(),yn.prototype.insert=function(t){switch(t.type){case"text/javascript":return this.scripter.injectjs(t.url,{id:t.id,async:t.async,attrs:t.attrs,location:t.location,global:t.global});case"text/css":return this.scripter.injectcss(t.url,{id:t.id,attrs:t.attrs,location:t.location});default:throw new Error("Invalid External type.")}};var gn=yn,mn=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},bn=[],wn=bn.sort,En=y((function(){bn.sort(void 0)})),xn=y((function(){bn.sort(null)})),On=Me("sort");$t({target:"Array",proto:!0,forced:En||!xn||!On},{sort:function(t){return void 0===t?wn.call(je(this)):wn.call(je(this),mn(t))}});var Sn=B.f,jn=Function.prototype,_n=jn.toString,An=/^\s*function ([^ (]*)/,kn="name";g&&!(kn in jn)&&Sn(jn,kn,{configurable:!0,get:function(){try{return _n.call(this).match(An)[1]}catch(t){return""}}});var Ln=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return D(n),function(t){if(!k(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0);$t({target:"Object",stat:!0},{setPrototypeOf:Ln});var Tn=!y((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Rn=rt("IE_PROTO"),Pn=Object.prototype,In=Tn?Object.getPrototypeOf:function(t){return t=je(t),R(t,Rn)?t[Rn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Pn:null},Cn=y((function(){In(1)}));function Mn(t,e,n){var r=new Error(t,e,n);return r.name="RouteNotFound",Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,Mn),r}$t({target:"Object",stat:!0,forced:Cn,sham:!Tn},{getPrototypeOf:function(t){return In(je(t))}}),Mn.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(Mn,Error):Mn.__proto__=Error;var Fn=Mn,Nn=p(ln),Dn=Fn;function Un(){this.routes=[],this.middlewares=[]}Un.prototype.getInitialRoute=function(){for(var t=0;t<this.routes.length;t++)if(!0===this.routes[t].opts.initial)return this.routes[t]},Un.prototype.insert=function(t){t.isMiddleware()?this.middlewares.push(t):this.routes.push(t),this.sortByDepth()},Un.prototype.match=function(t){for(var e=0;e<this.routes.length;e++){var n=this.routes[e].pathMatcher(t);if(n)return[this.routes[e],n]}throw new Dn("Invalid request path: "+t)},Un.prototype.matchMiddleware=function(t){for(var e=0;e<this.middlewares.length;e++){var n=this.middlewares[e].pathMatcher(t);if(n)return[this.middlewares[e],n]}return[]},Un.prototype.hasMatch=function(t){for(var e=0;e<this.routes.length;e++){if(this.routes[e].pathMatcher(t))return!0}return!1},Un.prototype.sortByDepth=function(){this.routes.sort((function(t,e){return t.pathDepth>e.pathDepth?-1:t.pathDepth<e.pathDepth?1:0})),this.middlewares.sort((function(t,e){return t.pathDepth>e.pathDepth?-1:t.pathDepth<e.pathDepth?1:0}))};var Bn=Un,Vn=function(t,e,n){if(mn(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},$n=[].push,Kn=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,a=7==t,u=5==t||i;return function(s,c,f,l){for(var p,h,d=je(s),v=j(d),y=Vn(c,f,3),g=wt(v.length),m=0,b=l||Ke,w=e?b(s,g):n||a?b(s,0):void 0;g>m;m++)if((u||m in v)&&(h=y(p=v[m],m,d),t))if(e)w[m]=h;else if(h)switch(t){case 3:return!0;case 5:return p;case 6:return m;case 2:$n.call(w,p)}else switch(t){case 4:return!1;case 7:$n.call(w,p)}return i?-1:r||o?o:w}},Gn={forEach:Kn(0),map:Kn(1),filter:Kn(2),some:Kn(3),every:Kn(4),find:Kn(5),findIndex:Kn(6),filterOut:Kn(7)},Wn=Gn.filter,qn=We("filter");function zn(t,e,n){var r=new Error(t,e,n);return r.name="ComponentNotFound",Object.setPrototypeOf(r,Object.getPrototypeOf(this)),Error.captureStackTrace&&Error.captureStackTrace(r,zn),r}$t({target:"Array",proto:!0,forced:!qn},{filter:function(t){return Wn(this,t,arguments.length>1?arguments[1]:void 0)}}),zn.prototype=Object.create(Error.prototype,{constructor:{value:Error,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(zn,Error):zn.__proto__=Error;var Hn=zn;function Xn(){this.components=[]}Xn.prototype.insert=function(t){this.components.push(t)},Xn.prototype.getComponentByName=function(t){var e=this.components.filter((function(e){return e.name==t}));if(!e||e.length<1)throw new Hn('View component "'+t+'" not found.');return e[0]};var Yn=Xn,Zn=a.default.objectkit;function Jn(){this.path=null}Jn.prototype.set=function(t){var e=Zn.getProp(t,"path"),n=this.path!=e;this.path=e,this.params=Zn.getProp(t,"params"),this.component=Zn.getProp(t,"component"),n&&(window.history.pushState(null,null,this.path),nn.emit("SCREEN",[{path:this.path}]))};var Qn=Jn,tr=a.default.validationkit;function er(t){this.element=t}er.prototype.cleanup=function(){this.element.innerHTML=""},er.prototype.patch=function(t){this.element.innerHTML=t},er.prototype.findChildren=function(){var t=this.element.querySelectorAll("[data-frond-component]");return tr.isEmpty(t)?[]:t},er.prototype.findChildByName=function(t){return this.element.querySelector('[data-frond-component="'+t+'"]')};var nr=er,rr=v.Promise,or=B.f,ir=pe("toStringTag"),ar=function(t,e,n){t&&!R(t=n?t:t.prototype,ir)&&or(t,ir,{configurable:!0,value:e})},ur=pe("species"),sr=function(t){var e=vt(t),n=B.f;g&&e&&!e[ur]&&n(e,ur,{configurable:!0,get:function(){return this}})},cr={},fr=pe("iterator"),lr=Array.prototype,pr={};pr[pe("toStringTag")]="z";var hr="[object z]"===String(pr),dr=pe("toStringTag"),vr="Arguments"==O(function(){return arguments}()),yr=hr?O:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),dr))?n:vr?O(e):"Object"==(r=O(e))&&"function"==typeof e.callee?"Arguments":r},gr=pe("iterator"),mr=function(t){var e=t.return;if(void 0!==e)return D(e.call(t)).value},br=function(t,e){this.stopped=t,this.result=e},wr=function(t,e,n){var r,o,i,a,u,s,c,f,l=n&&n.that,p=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=Vn(e,l,1+p+d),y=function(t){return r&&mr(r),new br(!0,t)},g=function(t){return p?(D(t),d?v(t[0],t[1],y):v(t[0],t[1])):d?v(t,y):v(t)};if(h)r=t;else{if("function"!=typeof(o=function(t){if(null!=t)return t[gr]||t["@@iterator"]||cr[yr(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(f=o)&&(cr.Array===f||lr[fr]===f)){for(i=0,a=wt(t.length);a>i;i++)if((u=g(t[i]))&&u instanceof br)return u;return new br(!1)}r=o.call(t)}for(s=r.next;!(c=s.call(r)).done;){try{u=g(c.value)}catch(t){throw mr(r),t}if("object"==typeof u&&u&&u instanceof br)return u}return new br(!1)},Er=pe("iterator"),xr=!1;try{var Or=0,Sr={next:function(){return{done:!!Or++}},return:function(){xr=!0}};Sr[Er]=function(){return this},Array.from(Sr,(function(){throw 2}))}catch(t){}var jr,_r,Ar,kr=pe("species"),Lr=function(t,e){var n,r=D(t).constructor;return void 0===r||null==(n=D(r)[kr])?e:mn(n)},Tr=vt("document","documentElement"),Rr=/(iphone|ipod|ipad).*applewebkit/i.test(ne),Pr=v.location,Ir=v.setImmediate,Cr=v.clearImmediate,Mr=v.process,Fr=v.MessageChannel,Nr=v.Dispatch,Dr=0,Ur={},Br="onreadystatechange",Vr=function(t){if(Ur.hasOwnProperty(t)){var e=Ur[t];delete Ur[t],e()}},$r=function(t){return function(){Vr(t)}},Kr=function(t){Vr(t.data)},Gr=function(t){v.postMessage(t+"",Pr.protocol+"//"+Pr.host)};Ir&&Cr||(Ir=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Ur[++Dr]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},jr(Dr),Dr},Cr=function(t){delete Ur[t]},ee?jr=function(t){Mr.nextTick($r(t))}:Nr&&Nr.now?jr=function(t){Nr.now($r(t))}:Fr&&!Rr?(Ar=(_r=new Fr).port2,_r.port1.onmessage=Kr,jr=Vn(Ar.postMessage,Ar,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts&&Pr&&"file:"!==Pr.protocol&&!y(Gr)?(jr=Gr,v.addEventListener("message",Kr,!1)):jr=Br in C("script")?function(t){Tr.appendChild(C("script")).onreadystatechange=function(){Tr.removeChild(this),Vr(t)}}:function(t){setTimeout($r(t),0)});var Wr,qr,zr,Hr,Xr,Yr,Zr,Jr,Qr={set:Ir,clear:Cr},to=/web0s(?!.*chrome)/i.test(ne),eo=N.f,no=Qr.set,ro=v.MutationObserver||v.WebKitMutationObserver,oo=v.document,io=v.process,ao=v.Promise,uo=eo(v,"queueMicrotask"),so=uo&&uo.value;so||(Wr=function(){var t,e;for(ee&&(t=io.domain)&&t.exit();qr;){e=qr.fn,qr=qr.next;try{e()}catch(t){throw qr?Hr():zr=void 0,t}}zr=void 0,t&&t.enter()},Rr||ee||to||!ro||!oo?ao&&ao.resolve?(Zr=ao.resolve(void 0),Jr=Zr.then,Hr=function(){Jr.call(Zr,Wr)}):Hr=ee?function(){io.nextTick(Wr)}:function(){no.call(v,Wr)}:(Xr=!0,Yr=oo.createTextNode(""),new ro(Wr).observe(Yr,{characterData:!0}),Hr=function(){Yr.data=Xr=!Xr}));var co,fo,lo,po,ho=so||function(t){var e={fn:t,next:void 0};zr&&(zr.next=e),qr||(qr=e,Hr()),zr=e},vo=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=mn(e),this.reject=mn(n)},yo={f:function(t){return new vo(t)}},go=function(t,e){if(D(t),k(e)&&e.constructor===t)return e;var n=yo.f(t);return(0,n.resolve)(e),n.promise},mo=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},bo=Qr.set,wo=pe("species"),Eo="Promise",xo=lt.get,Oo=lt.set,So=lt.getterFor(Eo),jo=rr,_o=v.TypeError,Ao=v.document,ko=v.process,Lo=vt("fetch"),To=yo.f,Ro=To,Po=!!(Ao&&Ao.createEvent&&v.dispatchEvent),Io="function"==typeof PromiseRejectionEvent,Co="unhandledrejection",Mo=Bt(Eo,(function(){if(!(X(jo)!==String(jo))){if(66===ae)return!0;if(!ee&&!Io)return!0}if(ae>=51&&/native code/.test(jo))return!1;var t=jo.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[wo]=e,!(t.then((function(){}))instanceof e)})),Fo=Mo||!function(t,e){if(!e&&!xr)return!1;var n=!1;try{var r={};r[Er]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}((function(t){jo.all(t).catch((function(){}))})),No=function(t){var e;return!(!k(t)||"function"!=typeof(e=t.then))&&e},Do=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;ho((function(){for(var r=t.value,o=1==t.state,i=0;n.length>i;){var a,u,s,c=n[i++],f=o?c.ok:c.fail,l=c.resolve,p=c.reject,h=c.domain;try{f?(o||(2===t.rejection&&$o(t),t.rejection=1),!0===f?a=r:(h&&h.enter(),a=f(r),h&&(h.exit(),s=!0)),a===c.promise?p(_o("Promise-chain cycle")):(u=No(a))?u.call(a,l,p):l(a)):p(r)}catch(t){h&&!s&&h.exit(),p(t)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Bo(t)}))}},Uo=function(t,e,n){var r,o;Po?((r=Ao.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),v.dispatchEvent(r)):r={promise:e,reason:n},!Io&&(o=v["on"+t])?o(r):t===Co&&function(t,e){var n=v.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Bo=function(t){bo.call(v,(function(){var e,n=t.facade,r=t.value;if(Vo(t)&&(e=mo((function(){ee?ko.emit("unhandledRejection",r,n):Uo(Co,n,r)})),t.rejection=ee||Vo(t)?2:1,e.error))throw e.value}))},Vo=function(t){return 1!==t.rejection&&!t.parent},$o=function(t){bo.call(v,(function(){var e=t.facade;ee?ko.emit("rejectionHandled",e):Uo("rejectionhandled",e,t.value)}))},Ko=function(t,e,n){return function(r){t(e,r,n)}},Go=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Do(t,!0))},Wo=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw _o("Promise can't be resolved itself");var r=No(e);r?ho((function(){var n={done:!1};try{r.call(e,Ko(Wo,n,t),Ko(Go,n,t))}catch(e){Go(n,e,t)}})):(t.value=e,t.state=1,Do(t,!1))}catch(e){Go({done:!1},e,t)}}};Mo&&(jo=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,jo,Eo),mn(t),co.call(this);var e=xo(this);try{t(Ko(Wo,e),Ko(Go,e))}catch(t){Go(e,t)}},(co=function(t){Oo(this,{type:Eo,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var r in e)pt(t,r,e[r],n);return t}(jo.prototype,{then:function(t,e){var n=So(this),r=To(Lr(this,jo));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=ee?ko.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Do(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),fo=function(){var t=new co,e=xo(t);this.promise=t,this.resolve=Ko(Wo,e),this.reject=Ko(Go,e)},yo.f=To=function(t){return t===jo||t===lo?new fo(t):Ro(t)},"function"==typeof rr&&(po=rr.prototype.then,pt(rr.prototype,"then",(function(t,e){var n=this;return new jo((function(t,e){po.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Lo&&$t({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return go(jo,Lo.apply(v,arguments))}}))),$t({global:!0,wrap:!0,forced:Mo},{Promise:jo}),ar(jo,Eo,!1),sr(Eo),lo=vt(Eo),$t({target:Eo,stat:!0,forced:Mo},{reject:function(t){var e=To(this);return e.reject.call(void 0,t),e.promise}}),$t({target:Eo,stat:!0,forced:Mo},{resolve:function(t){return go(this,t)}}),$t({target:Eo,stat:!0,forced:Fo},{all:function(t){var e=this,n=To(e),r=n.resolve,o=n.reject,i=mo((function(){var n=mn(e.resolve),i=[],a=0,u=1;wr(t,(function(t){var s=a++,c=!1;i.push(void 0),u++,n.call(e,t).then((function(t){c||(c=!0,i[s]=t,--u||r(i))}),o)})),--u||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=To(e),r=n.reject,o=mo((function(){var o=mn(e.resolve);wr(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var qo=hr?{}.toString:function(){return"[object "+yr(this)+"]"};hr||pt(Object.prototype,"toString",qo,{unsafe:!0});var zo=Object.assign,Ho=Object.defineProperty,Xo=!zo||y((function(){if(g&&1!==zo({b:1},zo(Ho({},"a",{enumerable:!0,get:function(){Ho(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=zo({},t)[n]||Ie(zo({},e)).join("")!=r}))?function(t,e){for(var n=je(t),r=arguments.length,o=1,i=Rt.f,a=w.f;r>o;)for(var u,s=j(arguments[o++]),c=i?Ie(s).concat(i(s)):Ie(s),f=c.length,l=0;f>l;)u=c[l++],g&&!a.call(s,u)||(n[u]=s[u]);return n}:zo;$t({target:"Object",stat:!0,forced:Object.assign!==Xo},{assign:Xo});var Yo=pe("match"),Zo=function(t){var e;return k(t)&&(void 0!==(e=t[Yo])?!!e:"RegExp"==O(t))},Jo=[].push,Qo=Math.min,ti=4294967295,ei=!y((function(){return!RegExp(ti,"y")}));function ni(){this.assets=Object.assign({},window.frondjs.assetManifest||{})}be("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(_(this)),o=void 0===n?ti:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!Zo(t))return e.call(r,t,o);for(var i,a,u,s=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,l=new RegExp(t.source,c+"g");(i=Jt.call(l,r))&&!((a=l.lastIndex)>f&&(s.push(r.slice(f,i.index)),i.length>1&&i.index<r.length&&Jo.apply(s,i.slice(1)),u=i[0].length,f=a,s.length>=o));)l.lastIndex===i.index&&l.lastIndex++;return f===r.length?!u&&l.test("")||s.push(""):s.push(r.slice(f)),s.length>o?s.slice(0,o):s}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=_(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(String(o),e,n)},function(t,o){var i=n(r,t,this,o,r!==e);if(i.done)return i.value;var a=D(t),u=String(this),s=Lr(a,RegExp),c=a.unicode,f=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(ei?"y":"g"),l=new s(ei?a:"^(?:"+a.source+")",f),p=void 0===o?ti:o>>>0;if(0===p)return[];if(0===u.length)return null===Se(l,u)?[u]:[];for(var h=0,d=0,v=[];d<u.length;){l.lastIndex=ei?d:0;var y,g=Se(l,ei?u:u.slice(d));if(null===g||(y=Qo(wt(l.lastIndex+(ei?0:d)),u.length))===h)d=Oe(u,d,c);else{if(v.push(u.slice(h,d)),v.length===p)return v;for(var m=1;m<=g.length-1;m++)if(v.push(g[m]),v.length===p)return v;d=h=y}}return v.push(u.slice(h)),v}]}),!ei),ni.prototype.get=function(t){if(!this.assets.hasOwnProperty(t))throw new Error("No such asset.");return this.assets[t]};var ri=new ni,oi=B.f,ii=Tt.f,ai=lt.set,ui=pe("match"),si=v.RegExp,ci=si.prototype,fi=/a/g,li=/a/g,pi=new si(fi)!==fi,hi=Wt.UNSUPPORTED_Y;if(g&&Bt("RegExp",!pi||hi||y((function(){return li[ui]=!1,si(fi)!=fi||si(li)==li||"/a/i"!=si(fi,"i")})))){for(var di=function(t,e){var n,r=this instanceof di,o=Zo(t),i=void 0===e;if(!r&&o&&t.constructor===di&&i)return t;pi?o&&!i&&(t=t.source):t instanceof di&&(i&&(e=Kt.call(t)),t=t.source),hi&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var a,u,s,c,f,l=(a=pi?new si(t,e):si(t,e),u=r?this:ci,s=di,Ln&&"function"==typeof(c=u.constructor)&&c!==s&&k(f=c.prototype)&&f!==s.prototype&&Ln(a,f),a);return hi&&n&&ai(l,{sticky:n}),l},vi=function(t){t in di||oi(di,t,{configurable:!0,get:function(){return si[t]},set:function(e){si[t]=e}})},yi=ii(si),gi=0;yi.length>gi;)vi(yi[gi++]);ci.constructor=di,di.prototype=ci,pt(v,"RegExp",di)}sr("RegExp");var mi="toString",bi=RegExp.prototype,wi=bi.toString,Ei=y((function(){return"/a/b"!=wi.call({source:"a",flags:"b"})})),xi=wi.name!=mi;(Ei||xi)&&pt(RegExp.prototype,mi,(function(){var t=D(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in bi)?Kt.call(t):n)}),{unsafe:!0});var Oi="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Si="["+Oi+"]",ji=RegExp("^"+Si+Si+"*"),_i=RegExp(Si+Si+"*$"),Ai=function(t){return function(e){var n=String(_(e));return 1&t&&(n=n.replace(ji,"")),2&t&&(n=n.replace(_i,"")),n}},ki={start:Ai(1),end:Ai(2),trim:Ai(3)},Li=ki.trim,Ti=v.parseInt,Ri=/^[+-]?0[Xx]/,Pi=8!==Ti(Oi+"08")||22!==Ti(Oi+"0x16")?function(t,e){var n=Li(String(t));return Ti(n,e>>>0||(Ri.test(n)?16:10))}:Ti;$t({global:!0,forced:parseInt!=Pi},{parseInt:Pi});var Ii=function t(e){this.domain="messages",this.locale_data=void 0;var n=["domain","locale_data"];if(this.isValidObject(e))for(var r in e)for(var o=0;o<n.length;o++)r==n[o]&&this.isValidObject(e[r])&&(this[r]=e[r]);var i=this.locale_data;if(this.locale_data=void 0,this.parse_locale_data(i),void 0===t._locale_data[this.domain])throw new Error("Error: Gettext 'locale_data' does not contain the domain '"+this.domain+"'");return this};Ii.context_glue="\\004",Ii._locale_data={},Ii.prototype.parse_locale_data=function(t){for(var e in void 0===Ii._locale_data&&(Ii._locale_data={}),t)if(t.hasOwnProperty(e)&&this.isValidObject(t[e])){var n=!1;for(var r in t[e]){n=!0;break}if(n){var o=t[e];for(var i in""==e&&(e="messages"),this.isValidObject(Ii._locale_data[e])||(Ii._locale_data[e]={}),this.isValidObject(Ii._locale_data[e].head)||(Ii._locale_data[e].head={}),this.isValidObject(Ii._locale_data[e].msgs)||(Ii._locale_data[e].msgs={}),o)if(""==i){var a=o[i];for(var u in a){var s=u.toLowerCase();Ii._locale_data[e].head[s]=a[u]}}else Ii._locale_data[e].msgs[i]=o[i]}}for(var e in Ii._locale_data)if(this.isValidObject(Ii._locale_data[e].head["plural-forms"])&&void 0===Ii._locale_data[e].head.plural_func){var c=Ii._locale_data[e].head["plural-forms"];if(!new RegExp("^(\\s*nplurals\\s*=\\s*[0-9]+\\s*;\\s*plural\\s*=\\s*(?:\\s|[-\\?\\|&=!<>+*/%:;a-zA-Z0-9_()])+)","m").test(c))throw new Error("Syntax error in language file. Plural-Forms header is invalid ["+c+"]");var f=Ii._locale_data[e].head["plural-forms"];/;\s*$/.test(f)||(f=f.concat(";"));var l="var plural; var nplurals; "+f+' return { "nplural" : nplurals, "plural" : (plural === true ? 1 : plural ? plural : 0) };';Ii._locale_data[e].head.plural_func=new Function("n",l)}else void 0===Ii._locale_data[e].head.plural_func&&(Ii._locale_data[e].head.plural_func=function(t){return{nplural:2,plural:1!=t?1:0}})},Ii.prototype.textdomain=function(t){return t&&t.length&&(this.domain=t),this.domain},Ii.prototype.gettext=function(t){return this.dcnpgettext(null,undefined,t,undefined,undefined,undefined)},Ii.prototype.dgettext=function(t,e){return this.dcnpgettext(t,undefined,e,undefined,undefined,undefined)},Ii.prototype.dcgettext=function(t,e,n){return this.dcnpgettext(t,undefined,e,undefined,undefined,n)},Ii.prototype.ngettext=function(t,e,n){return this.dcnpgettext(null,undefined,t,e,n,undefined)},Ii.prototype.dngettext=function(t,e,n,r){return this.dcnpgettext(t,undefined,e,n,r,undefined)},Ii.prototype.dcngettext=function(t,e,n,r,o){return this.dcnpgettext(t,undefined,e,n,r,o,o)},Ii.prototype.pgettext=function(t,e){return this.dcnpgettext(null,t,e,undefined,undefined,undefined)},Ii.prototype.dpgettext=function(t,e,n){return this.dcnpgettext(t,e,n,undefined,undefined,undefined)},Ii.prototype.dcpgettext=function(t,e,n,r){return this.dcnpgettext(t,e,n,undefined,undefined,r)},Ii.prototype.npgettext=function(t,e,n,r){return this.dcnpgettext(null,t,e,n,r,undefined)},Ii.prototype.dnpgettext=function(t,e,n,r,o){return this.dcnpgettext(t,e,n,r,o,undefined)},Ii.prototype.dcnpgettext=function(t,e,n,r,o,i){if(!this.isValidObject(n))return"";var a=this.isValidObject(r),u=this.isValidObject(e)?e+Ii.context_glue+n:n,s=this.isValidObject(t)?t:this.isValidObject(this.domain)?this.domain:"messages",c=new Array;if(void 0!==Ii._locale_data&&this.isValidObject(Ii._locale_data[s]))c.push(Ii._locale_data[s]);else if(void 0!==Ii._locale_data)for(var f in Ii._locale_data)c.push(Ii._locale_data[f]);var l,p=[],h=!1;if(c.length)for(var d=0;d<c.length;d++){var v=c[d];if(this.isValidObject(v.msgs[u])){for(var y=0;y<v.msgs[u].length;y++)p[y]=v.msgs[u][y];if(p.shift(),l=v,h=!0,p.length>0&&0!=p[0].length)break}}0!=p.length&&0!=p[0].length||(p=[n,r]);var g=p[0];if(a){var m;if(h&&this.isValidObject(l.head.plural_func)){var b=l.head.plural_func(o);b.plural||(b.plural=0),b.nplural||(b.nplural=0),b.nplural<=b.plural&&(b.plural=0),m=b.plural}else m=1!=o?1:0;this.isValidObject(p[m])&&(g=p[m])}return g},Ii.strargs=function(t,e){null==e||void 0===e?e=[]:e.constructor!=Array&&(e=[e]);for(var n="";;){var r,o=t.indexOf("%");if(-1==o){n+=t;break}if(n+=t.substr(0,o),"%%"==t.substr(o,2))n+="%",t=t.substr(o+2);else if(r=t.substr(o).match(/^%(\d+)/)){var i=parseInt(r[1]),a=r[1].length;i>0&&null!=e[i-1]&&void 0!==e[i-1]&&(n+=e[i-1]),t=t.substr(o+1+a)}else n+="%",t=t.substr(o+1)}return n},Ii.prototype.strargs=function(t,e){return Ii.strargs(t,e)},Ii.prototype.isArray=function(t){return this.isValidObject(t)&&t.constructor==Array},Ii.prototype.isValidObject=function(t){return null!=t&&void 0!==t};var Ci=Ii,Mi=a.default.validationkit,Fi=a.default.typekit;function Ni(){this.gettext=null,this.appLocale=null,this.opts={},this.multilingual=!1,window._=function(t){return t}}Ni.prototype.defaultOptions={localStorageKeyName:"frond_locale",carryAppLocaleIn:"ADDRESS_BAR",translationsURI:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")},Ni.prototype.reMatchLocaleInPath=/^(\/[a-zA-Z]{2}(-[a-zA-Z]{2})?)\/?(?![a-zA-Z0-9]+)/g,Ni.prototype.isMultilingual=function(){return!0===this.multilingual},Ni.prototype.getAppLocale=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!0===t?this.slugifyLocale(this.appLocale):this.appLocale},Ni.prototype.isLocaleCarriedOnAddressBar=function(){return"ADDRESS_BAR"==this.opts.carryAppLocaleIn},Ni.prototype.isNotDefaultLocale=function(){return!!this.isMultilingual()&&this.getAppLocale()!=this.opts.defaultLocale},Ni.prototype.configure=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=window.frondjs.supportedLocales;return new Promise((function(r,o){return Mi.isEmpty(n)?o(new Error("You set i18n but there is no translation found. Did you forget to translate the files inside translations folder?")):Mi.isEmpty(t.defaultLocale)?o(new Error("You should set defaultLocale.")):((n.length>0||n[0]!=e.opts.defaultLocale)&&(e.multilingual=!0),e.opts=Object.assign({},e.defaultOptions,t),e.appLocale=e.detectAppLocale(n),void e.loadTranslation().then((function(t){return Fi.isObject(t)?(e.gettext=new Ci({domain:"messages",locale_data:{messages:t}}),window._=function(t){return e.gettext.gettext(t)},r()):r()})))}))},Ni.prototype.detectAppLocale=function(t){var e=null;if("ADDRESS_BAR"==this.opts.carryAppLocaleIn){var n=window.location.pathname;if(!this.reMatchLocaleInPath.test(n))return this.opts.defaultLocale;e=n.match(this.reMatchLocaleInPath)[0].replace(/\/+/g,"")}else{if("LOCAL_STORAGE"!=this.opts.carryAppLocaleIn)throw new Error("The carryAppLocaleIn option seems invalid.");e=localStorage.getItem(this.localStorageKeyName)}return-1!==t.indexOf(this.formatLocale(e))?e:this.opts.defaultLocale},Ni.prototype.loadTranslation=function(){var t=null;try{t=ri.get("translations/"+this.appLocale+".json")}catch(t){return Promise.resolve(null)}return fetch(this.opts.translationsURI+"/"+t).then((function(t){return t.json()}))},Ni.prototype.slugifyLocale=function(t){return t.toLowerCase().replace("_","-")},Ni.prototype.formatLocale=function(t){return t.split("-")[0]+"_"+t.split("-")[1].toUpperCase()};var Di=new Ni;function Ui(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Bi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bi(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Vi(){this.internalsPrefix="FROND_",this.state=f.default.create({})}Vi.prototype.set=function(t,e){var n,r,o;this.state.updateState((o=e,(r=t)in(n={})?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n))},Vi.prototype.setInternal=function(t,e){return this.set(this.internalsPrefix+t,e)},Vi.prototype.get=function(t){var e=this.state.getState();return e.hasOwnProperty(t)?e[t]:void 0},Vi.prototype.getInternal=function(t){return this.get(this.internalsPrefix+t)};var $i=new Vi,Ki=a.default.objectkit;function Gi(){this.store={}}Gi.prototype.set=function(t,e){return this.store[t]=e,this},Gi.prototype.get=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return Ki.getProp(this.store,t,e)};var Wi=new Gi,qi=Gn.map,zi=We("map");$t({target:"Array",proto:!0,forced:!zi},{map:function(t){return qi(this,t,arguments.length>1?arguments[1]:void 0)}});var Hi,Xi,Yi,Zi=pe("iterator"),Ji=!1;[].keys&&("next"in(Yi=[].keys())?(Xi=In(In(Yi)))!==Object.prototype&&(Hi=Xi):Ji=!0),(null==Hi||y((function(){var t={};return Hi[Zi].call(t)!==t})))&&(Hi={}),R(Hi,Zi)||V(Hi,Zi,(function(){return this}));var Qi,ta={IteratorPrototype:Hi,BUGGY_SAFARI_ITERATORS:Ji},ea=g?Object.defineProperties:function(t,e){D(t);for(var n,r=Ie(e),o=r.length,i=0;o>i;)B.f(t,n=r[i++],e[n]);return t},na=rt("IE_PROTO"),ra=function(){},oa=function(t){return"<script>"+t+"</"+"script>"},ia=function(){try{Qi=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ia=Qi?function(t){t.write(oa("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Qi):((e=C("iframe")).style.display="none",Tr.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(oa("document.F=Object")),t.close(),t.F);for(var n=kt.length;n--;)delete ia.prototype[kt[n]];return ia()};ot[na]=!0;var aa=Object.create||function(t,e){var n;return null!==t?(ra.prototype=D(t),n=new ra,ra.prototype=null,n[na]=t):n=ia(),void 0===e?n:ea(n,e)},ua=ta.IteratorPrototype,sa=function(){return this},ca=ta.IteratorPrototype,fa=ta.BUGGY_SAFARI_ITERATORS,la=pe("iterator"),pa="keys",ha="values",da="entries",va=function(){return this},ya=function(t,e,n,r,o,i,a){!function(t,e,n){var r=e+" Iterator";t.prototype=aa(ua,{next:E(1,n)}),ar(t,r,!1),cr[r]=sa}(n,e,r);var u,s,c,f=function(t){if(t===o&&v)return v;if(!fa&&t in h)return h[t];switch(t){case pa:case ha:case da:return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",p=!1,h=t.prototype,d=h[la]||h["@@iterator"]||o&&h[o],v=!fa&&d||f(o),y="Array"==e&&h.entries||d;if(y&&(u=In(y.call(new t)),ca!==Object.prototype&&u.next&&(In(u)!==ca&&(Ln?Ln(u,ca):"function"!=typeof u[la]&&V(u,la,va)),ar(u,l,!0))),o==ha&&d&&d.name!==ha&&(p=!0,v=function(){return d.call(this)}),h[la]!==v&&V(h,la,v),cr[e]=v,o)if(s={values:f(ha),keys:i?v:f(pa),entries:f(da)},a)for(c in s)(fa||p||!(c in h))&&pt(h,c,s[c]);else $t({target:e,proto:!0,forced:fa||p},s);return s},ga=Ee.charAt,ma="String Iterator",ba=lt.set,wa=lt.getterFor(ma);ya(String,"String",(function(t){ba(this,{type:ma,string:String(t),index:0})}),(function(){var t,e=wa(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=ga(n,r),e.index+=t.length,{value:t,done:!1})}));var Ea=pe("unscopables"),xa=Array.prototype;null==xa[Ea]&&B.f(xa,Ea,{configurable:!0,value:aa(null)});var Oa=function(t){xa[Ea][t]=!0},Sa="Array Iterator",ja=lt.set,_a=lt.getterFor(Sa),Aa=ya(Array,"Array",(function(t,e){ja(this,{type:Sa,target:A(t),index:0,kind:e})}),(function(){var t=_a(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");cr.Arguments=cr.Array,Oa("keys"),Oa("values"),Oa("entries");var ka={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},La=pe("iterator"),Ta=pe("toStringTag"),Ra=Aa.values;for(var Pa in ka){var Ia=v[Pa],Ca=Ia&&Ia.prototype;if(Ca){if(Ca[La]!==Ra)try{V(Ca,La,Ra)}catch(t){Ca[La]=Ra}if(Ca[Ta]||V(Ca,Ta,Pa),ka[Pa])for(var Ma in Aa)if(Ca[Ma]!==Aa[Ma])try{V(Ca,Ma,Aa[Ma])}catch(t){Ca[Ma]=Aa[Ma]}}}var Fa=function(t,e,n,r,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.id=t,this.url=e,this.type=n,this.async=r,this.location=o,this.attrs=i,this.global=a},Na=a.default.typekit,Da=function(t,e){var n=t.externalsRepository;if(!Na.isArray(e))throw new Error("Invalid type.");var r=e.map((function(t){return new Fa(t.id,t.url,t.type,t.async||!0,t.location||"bodyEnd",t.attrs||{},t.global||null)})).map((function(t){return n.insert(t)}));return Promise.all(r)};function Ua(t,e,n){this.pathExpression=t,this.pathMatcher=Nn.match(this.pathExpression,{decode:decodeURIComponent}),this.pathDepth=Nn.pathToRegexp(t).length,this.opts=e,this.componentname=n}Ua.prototype.isMiddleware=function(){return!0===this.opts.middleware};var Ba=Ua,Va=ki.trim;$t({target:"String",proto:!0,forced:function(t){return y((function(){return!!Oi[t]()||"âÂá "!="âÂá "[t]()||Oi[t].name!==t}))}("trim")},{trim:function(){return Va(this)}});var $a=a.default.typekit;function Ka(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;this.name=t,this.state=n,this.on=r,this.services=o,this.template=e,this.eventEmitter=s.default.create(),this.ready=!1,this.refs={},this.initState(),this.registerEvents()}Ka.prototype.origin=window.location.origin,Ka.prototype.initState=function(){$a.isObject(this.state)?(this.hasState=!0,this.state=f.default.create(this.state)):(this.hasState=!1,this.state=void 0)},Ka.prototype.getState=function(){return this.state?this.state.getState():{}},Ka.prototype.updateState=function(t){this.state.updateState(t)},Ka.prototype.hasState=function(){return!!this.state},Ka.prototype.registerEvents=function(){var t=this;$a.isObject(this.on)?(this.hasEvents=!0,Object.keys(this.on).map((function(e){return t.eventEmitter.on(e,t.on[e])}))):this.hasEvents=!1},Ka.prototype.emit=function(t){if(!("update"==t&&!1===this.ready||"ready"==t&&!0===this.ready))return"ready"==t&&(this.ready=!0),this.eventEmitter.emit.apply(this,[t])},Ka.prototype.next=function(){this.eventEmitter.emit("_next")},Ka.prototype.findReferences=function(t){for(var e=t.querySelectorAll("[data-frond-ref]"),n=0;n<e.length;n++){var r=e[n].dataset.frondRef;if(-1!==r.indexOf("[]")){var o=r.replace("[]","");$a.isArray(this.refs[o])?this.refs[o].push(e[n]):this.refs[o]=[e[n]]}else this.refs[r]=e[n]}},Ka.prototype.findNativeLinks=function(t,e,n){for(var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=t.querySelectorAll("a[href]"),a=function(){var t=i[u],a=t.getAttribute("href");if(!a||"#"==a.slice(0,1))return"continue";var s="/"==a.slice(0,1),c=-1!==a.indexOf(r.origin);if(!s&&!c)return"continue";var f=o+(c?a.slice(r.origin.length):a);t.setAttribute("href",f),e.hasMatch(f)&&t.addEventListener("click",(function(t){return n(t,f)}))},u=0;u<i.length;u++)a()},Ka.prototype.registerServices=function(t){for(var e=t.querySelectorAll("[data-frond-services]"),n=0;n<e.length;n++)for(var r=e[n],o=r.dataset.frondServices.trim().split(" "),i=0;i<o.length;i++){var a=Ui(o[i].split(":"),2),u=a[0],s=a[1];this.registerService(r,u,s)}},Ka.prototype.registerService=function(t,e,n){var r=this;switch(e){case"enter":t.addEventListener("keydown",(function(t){if("Enter"==window.KeyCode.hot_key(window.KeyCode.translate_event(t)))return r.services[n].apply(r,[t])}));break;default:t.addEventListener(e,(function(t){return r.services[n].apply(r,[t])}))}},Ka.prototype.call=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.services;if("function"!=typeof n[t])throw new Error("No service found with the name "+t);return n[t].apply(this,e)};var Ga=Ka,Wa=function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=null;try{i=e.componentRepository.getComponentByName(n)}catch(t){throw t.name,t}var a=Object.assign({},{frond:e.config},i.getState()),u=e.nunjucks.render(i.template.name,a);r.patch(u),i.findReferences(r.element),i.findNativeLinks(r.element,e.routeRepository,e.onNativeLinkClick,e.config.getInternal("ROUTES_PREFIX")||""),i.registerServices(r.element);for(var s=r.findChildren(),c=0;c<s.length;c++){var f=s[c].dataset.frondComponent;t(e,f,new nr(s[c]))}o.length>0&&i.eventEmitter.once("_next",(function(){e.requestRepository.set({path:o[1].path,params:o[1].params,component:o[0].componentname}),t(e,o[0].componentname,r)})),i.emit("update"),i.emit("ready"),i.emit("render")},qa=function(t,e){if("string"==typeof e)return t.componentRepository.getComponentByName(e);var n=e();if(!n.name)throw new Error("Component should have a name.");var r=new Ga(n.name,n.template,n.state||void 0,n.on||void 0,n.services||void 0);return r.hasState&&r.state.subscribe((function(e,n){var o=t.rootWrapperDOMElement.findChildByName(r.name),i=o?new nr(o):t.rootWrapperDOMElement;Wa(t,r.name,i)})),t.componentRepository.insert(r),r};a.default.typekit;var za=function(t,e,n,r){var o=qa(t,r),i=(t.config.getInternal("ROUTES_PREFIX")||"")+e;"/"==i.slice(-1)&&i.length>1&&(i=i.slice(0,-1));var a=new Ba(i,n,o.name);return t.routeRepository.insert(a),a},Ha=function(t,e){var n=t.config.getInternal("ROUTES_PREFIX")||"";n&&0!==e.indexOf(n)&&(e=n+e),e.length>1&&"/"==e.slice(-1)&&(e=e.slice(0,-1));var r=t.routeRepository.matchMiddleware(e),o=null;try{o=t.routeRepository.match(e)}catch(t){throw t.name,t}if(r.length>0){window.history.pushState(null,null,t.requestRepository.path);var i=Ui(r,2),a=i[0];return i[1],void Wa(t,a.componentname,t.rootWrapperDOMElement,o)}t.requestRepository.set({path:o[1].path,params:o[1].params,component:o[0].componentname}),Wa(t,o[0].componentname,t.rootWrapperDOMElement)},Xa=a.default.typekit;return Nn.match,function(){var t=Da,e=za,n=qa,r=Ha,o=c.default.create(),i=new gn(o),a=new Bn,s=new Yn,l=new Qn,p={externalsRepository:i,routeRepository:a,componentRepository:s,requestRepository:l,nunjucks:null,config:$i};function h(t){r(p,t)}return p.onNativeLinkClick=function(t,e){return t.preventDefault(),h(e)},window.onpopstate=function(t){return h(document.location.pathname)},{config:p.config,state:f.default.create({}),request:l,eventEmitter:nn,i18n:Di,init:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p.rootWrapperDOMElement=new nr(t);var n=new pn.Environment;n.addGlobal("_",(function(t){return window._(t)})),p.nunjucks=n,Di.isNotDefaultLocale()&&Di.isLocaleCarriedOnAddressBar()&&(e.ROUTES_PREFIX="/"+Di.getAppLocale(!0));var r=["ROUTES_PREFIX"];e.ROUTES_PREFIX&&(e.ROUTES_PREFIX=("/"+e.ROUTES_PREFIX).replace(/\/\//,"/"));for(var o=Object.keys(e),i=0;i<o.length;i++){var a=o[i];-1!==r.indexOf(a)&&p.config.setInternal(a,e[a])}},externals:{inject:function(e){return t(p,e)}},meta:u.default,scripter:o,route:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=void 0===r?{}:n,i=void 0===r?n:r;if(!Xa.isObject(o))throw new Error("Invalid route options.");if(!Xa.isFunction(i))throw new Error("Invalid route component.");return e(p,t,o,i)},component:function(){return n.apply(void 0,[p].concat(Array.prototype.slice.call(arguments)))},middleware:function(t,n,r){var o=void 0===r?{}:n,i=void 0===r?n:r;if(!Xa.isObject(o))throw new Error("Invalid route options.");if(!Xa.isFunction(i))throw new Error("Invalid route component.");return o.middleware=!0,e(p,t,o,i)},render:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(p,t.path)},goto:h,asset:ri,memoryStore:Wi,getInitialRoute:function(){return a.getInitialRoute()}}}()}));
